(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var vo,se,$h,ir,Tc,Bh,jh,Hh,nl,va,Ea,zh,Ui={},qh=[],Yp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Zi=Array.isArray;function sn(n,e){for(var t in e)n[t]=e[t];return n}function rl(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function re(n,e,t){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?vo.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)a[s]===void 0&&(a[s]=n.defaultProps[s]);return Ms(n,a,r,i,null)}function Ms(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++$h,__i:-1,__u:0};return i==null&&se.vnode!=null&&se.vnode(s),s}function kt(n){return n.children}function Wt(n,e){this.props=n,this.context=e}function Fr(n,e){if(e==null)return n.__?Fr(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Fr(n):null}function Wh(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Wh(n)}}function wa(n){(!n.__d&&(n.__d=!0)&&ir.push(n)&&!Xs.__r++||Tc!=se.debounceRendering)&&((Tc=se.debounceRendering)||Bh)(Xs)}function Xs(){for(var n,e,t,r,i,s,a,l=1;ir.length;)ir.length>l&&ir.sort(jh),n=ir.shift(),l=ir.length,n.__d&&(t=void 0,i=(r=(e=n).__v).__e,s=[],a=[],e.__P&&((t=sn({},r)).__v=r.__v+1,se.vnode&&se.vnode(t),il(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,s,i??Fr(r),!!(32&r.__u),a),t.__v=r.__v,t.__.__k[t.__i]=t,Qh(s,t,a),t.__e!=i&&Wh(t)));Xs.__r=0}function Gh(n,e,t,r,i,s,a,l,c,u,p){var f,g,v,k,O,P,L,V=r&&r.__k||qh,B=e.length;for(c=Jp(t,e,V,c,B),f=0;f<B;f++)(v=t.__k[f])!=null&&(g=v.__i==-1?Ui:V[v.__i]||Ui,v.__i=f,P=il(n,v,g,i,s,a,l,c,u,p),k=v.__e,v.ref&&g.ref!=v.ref&&(g.ref&&sl(g.ref,null,v),p.push(v.ref,v.__c||k,v)),O==null&&k!=null&&(O=k),(L=!!(4&v.__u))||g.__k===v.__k?c=Kh(v,c,n,L):typeof v.type=="function"&&P!==void 0?c=P:k&&(c=k.nextSibling),v.__u&=-7);return t.__e=O,c}function Jp(n,e,t,r,i){var s,a,l,c,u,p=t.length,f=p,g=0;for(n.__k=new Array(i),s=0;s<i;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=s+g,(a=n.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Ms(null,a,null,null,null):Zi(a)?Ms(kt,{children:a},null,null,null):a.constructor==null&&a.__b>0?Ms(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=n,a.__b=n.__b+1,l=null,(u=a.__i=Xp(a,t,c,f))!=-1&&(f--,(l=t[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(i>p?g--:i<p&&g++),typeof a.type!="function"&&(a.__u|=4)):u!=c&&(u==c-1?g--:u==c+1?g++:(u>c?g--:g++,a.__u|=4))):n.__k[s]=null;if(f)for(s=0;s<p;s++)(l=t[s])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=Fr(l)),Jh(l,l));return r}function Kh(n,e,t,r){var i,s;if(typeof n.type=="function"){for(i=n.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=n,e=Kh(i[s],e,t,r));return e}n.__e!=e&&(r&&(e&&n.type&&!e.parentNode&&(e=Fr(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Zs(n,e){return e=e||[],n==null||typeof n=="boolean"||(Zi(n)?n.some(function(t){Zs(t,e)}):e.push(n)),e}function Xp(n,e,t,r){var i,s,a,l=n.key,c=n.type,u=e[t],p=u!=null&&(2&u.__u)==0;if(u===null&&n.key==null||p&&l==u.key&&c==u.type)return t;if(r>(p?1:0)){for(i=t-1,s=t+1;i>=0||s<e.length;)if((u=e[a=i>=0?i--:s++])!=null&&(2&u.__u)==0&&l==u.key&&c==u.type)return a}return-1}function Ic(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||Yp.test(e)?t:t+"px"}function As(n,e,t,r,i){var s,a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Ic(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Ic(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Hh,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r?t.u=r.u:(t.u=nl,n.addEventListener(e,s?Ea:va,s)):n.removeEventListener(e,s?Ea:va,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Rc(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=nl++;else if(e.t<t.u)return;return t(se.event?se.event(e):e)}}}function il(n,e,t,r,i,s,a,l,c,u){var p,f,g,v,k,O,P,L,V,B,te,q,C,T,_,y,R,I=e.type;if(e.constructor!=null)return null;128&t.__u&&(c=!!(32&t.__u),s=[l=e.__e=t.__e]),(p=se.__b)&&p(e);e:if(typeof I=="function")try{if(L=e.props,V="prototype"in I&&I.prototype.render,B=(p=I.contextType)&&r[p.__c],te=p?B?B.props.value:p.__:r,t.__c?P=(f=e.__c=t.__c).__=f.__E:(V?e.__c=f=new I(L,te):(e.__c=f=new Wt(L,te),f.constructor=I,f.render=em),B&&B.sub(f),f.props=L,f.state||(f.state={}),f.context=te,f.__n=r,g=f.__d=!0,f.__h=[],f._sb=[]),V&&f.__s==null&&(f.__s=f.state),V&&I.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=sn({},f.__s)),sn(f.__s,I.getDerivedStateFromProps(L,f.__s))),v=f.props,k=f.state,f.__v=e,g)V&&I.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),V&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(V&&I.getDerivedStateFromProps==null&&L!==v&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(L,te),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(L,f.__s,te)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(f.props=L,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(A){A&&(A.__=e)}),q=0;q<f._sb.length;q++)f.__h.push(f._sb[q]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(L,f.__s,te),V&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(v,k,O)})}if(f.context=te,f.props=L,f.__P=n,f.__e=!1,C=se.__r,T=0,V){for(f.state=f.__s,f.__d=!1,C&&C(e),p=f.render(f.props,f.state,f.context),_=0;_<f._sb.length;_++)f.__h.push(f._sb[_]);f._sb=[]}else do f.__d=!1,C&&C(e),p=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++T<25);f.state=f.__s,f.getChildContext!=null&&(r=sn(sn({},r),f.getChildContext())),V&&!g&&f.getSnapshotBeforeUpdate!=null&&(O=f.getSnapshotBeforeUpdate(v,k)),y=p,p!=null&&p.type===kt&&p.key==null&&(y=Yh(p.props.children)),l=Gh(n,Zi(y)?y:[y],e,t,r,i,s,a,l,c,u),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),P&&(f.__E=f.__=null)}catch(A){if(e.__v=null,c||s!=null)if(A.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,e.__e=l}else{for(R=s.length;R--;)rl(s[R]);Ta(e)}else e.__e=t.__e,e.__k=t.__k,A.then||Ta(e);se.__e(A,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=Zp(t.__e,e,t,r,i,s,a,c,u);return(p=se.diffed)&&p(e),128&e.__u?void 0:l}function Ta(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ta)}function Qh(n,e,t){for(var r=0;r<t.length;r++)sl(t[r],t[++r],t[++r]);se.__c&&se.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(s){s.call(i)})}catch(s){se.__e(s,i.__v)}})}function Yh(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Zi(n)?n.map(Yh):sn({},n)}function Zp(n,e,t,r,i,s,a,l,c){var u,p,f,g,v,k,O,P=t.props,L=e.props,V=e.type;if(V=="svg"?i="http://www.w3.org/2000/svg":V=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((v=s[u])&&"setAttribute"in v==!!V&&(V?v.localName==V:v.nodeType==3)){n=v,s[u]=null;break}}if(n==null){if(V==null)return document.createTextNode(L);n=document.createElementNS(i,V,L.is&&L),l&&(se.__m&&se.__m(e,s),l=!1),s=null}if(V==null)P===L||l&&n.data==L||(n.data=L);else{if(s=s&&vo.call(n.childNodes),P=t.props||Ui,!l&&s!=null)for(P={},u=0;u<n.attributes.length;u++)P[(v=n.attributes[u]).name]=v.value;for(u in P)if(v=P[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=v;else if(!(u in L)){if(u=="value"&&"defaultValue"in L||u=="checked"&&"defaultChecked"in L)continue;As(n,u,null,v,i)}}for(u in L)v=L[u],u=="children"?g=v:u=="dangerouslySetInnerHTML"?p=v:u=="value"?k=v:u=="checked"?O=v:l&&typeof v!="function"||P[u]===v||As(n,u,v,P[u],i);if(p)l||f&&(p.__html==f.__html||p.__html==n.innerHTML)||(n.innerHTML=p.__html),e.__k=[];else if(f&&(n.innerHTML=""),Gh(e.type=="template"?n.content:n,Zi(g)?g:[g],e,t,r,V=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:t.__k&&Fr(t,0),l,c),s!=null)for(u=s.length;u--;)rl(s[u]);l||(u="value",V=="progress"&&k==null?n.removeAttribute("value"):k!=null&&(k!==n[u]||V=="progress"&&!k||V=="option"&&k!=P[u])&&As(n,u,k,P[u],i),u="checked",O!=null&&O!=n[u]&&As(n,u,O,P[u],i))}return n}function sl(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){se.__e(i,t)}}function Jh(n,e,t){var r,i;if(se.unmount&&se.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||sl(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){se.__e(s,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&Jh(r[i],e,t||typeof n.type!="function");t||rl(n.__e),n.__c=n.__=n.__e=void 0}function em(n,e,t){return this.constructor(n,t)}function tm(n,e,t){var r,i,s,a;e==document&&(e=document.documentElement),se.__&&se.__(n,e),i=(r=!1)?null:e.__k,s=[],a=[],il(e,n=e.__k=re(kt,null,[n]),i||Ui,Ui,e.namespaceURI,i?null:e.firstChild?vo.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,a),Qh(s,n,a)}function It(n){function e(t){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(a){a.__e=!0,wa(a)})},this.sub=function(s){r.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),a&&a.call(s)}}),t.children}return e.__c="__cC"+zh++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}vo=qh.slice,se={__e:function(n,e,t,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),a=i.__d),a)return i.__E=i}catch(l){n=l}throw n}},$h=0,Wt.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=sn({},this.state),typeof n=="function"&&(n=n(sn({},t),this.props)),n&&sn(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),wa(this))},Wt.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),wa(this))},Wt.prototype.render=kt,ir=[],Bh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jh=function(n,e){return n.__v.__b-e.__v.__b},Xs.__r=0,Hh=/(PointerCapture)$|Capture$/i,nl=0,va=Rc(!1),Ea=Rc(!0),zh=0;var nm=0;function j(n,e,t,r,i,s){e||(e={});var a,l,c=e;if("ref"in c)for(l in c={},e)l=="ref"?a=e[l]:c[l]=e[l];var u={type:n,props:c,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--nm,__i:-1,__u:0,__source:i,__self:s};if(typeof n=="function"&&(a=n.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return se.vnode&&se.vnode(u),u}var cr,Ie,Zo,Ac,$i=0,Xh=[],Ce=se,bc=Ce.__b,Sc=Ce.__r,Pc=Ce.diffed,Cc=Ce.__c,kc=Ce.unmount,Dc=Ce.__;function es(n,e){Ce.__h&&Ce.__h(Ie,n,$i||e),$i=0;var t=Ie.__H||(Ie.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function Me(n){return $i=1,rm(ed,n)}function rm(n,e,t){var r=es(cr++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):ed(void 0,e),function(l){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,l);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=Ie,!Ie.__f)){var i=function(l,c,u){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(g){return!!g.__c});if(p.every(function(g){return!g.__N}))return!s||s.call(this,l,c,u);var f=r.__c.props!==l;return p.forEach(function(g){if(g.__N){var v=g.__[0];g.__=g.__N,g.__N=void 0,v!==g.__[0]&&(f=!0)}}),s&&s.call(this,l,c,u)||f};Ie.__f=!0;var s=Ie.shouldComponentUpdate,a=Ie.componentWillUpdate;Ie.componentWillUpdate=function(l,c,u){if(this.__e){var p=s;s=void 0,i(l,c,u),s=p}a&&a.call(this,l,c,u)},Ie.shouldComponentUpdate=i}return r.__N||r.__}function mt(n,e){var t=es(cr++,3);!Ce.__s&&ol(t.__H,e)&&(t.__=n,t.u=e,Ie.__H.__h.push(t))}function Zh(n,e){var t=es(cr++,4);!Ce.__s&&ol(t.__H,e)&&(t.__=n,t.u=e,Ie.__h.push(t))}function Ur(n){return $i=5,wt(function(){return{current:n}},[])}function wt(n,e){var t=es(cr++,7);return ol(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function $r(n,e){return $i=8,wt(function(){return n},e)}function _e(n){var e=Ie.context[n.__c],t=es(cr++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Ie)),e.props.value):n.__}function im(){for(var n;n=Xh.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(xs),n.__H.__h.forEach(Ia),n.__H.__h=[]}catch(e){n.__H.__h=[],Ce.__e(e,n.__v)}}Ce.__b=function(n){Ie=null,bc&&bc(n)},Ce.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Dc&&Dc(n,e)},Ce.__r=function(n){Sc&&Sc(n),cr=0;var e=(Ie=n.__c).__H;e&&(Zo===Ie?(e.__h=[],Ie.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(xs),e.__h.forEach(Ia),e.__h=[],cr=0)),Zo=Ie},Ce.diffed=function(n){Pc&&Pc(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Xh.push(e)!==1&&Ac===Ce.requestAnimationFrame||((Ac=Ce.requestAnimationFrame)||sm)(im)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Zo=Ie=null},Ce.__c=function(n,e){e.some(function(t){try{t.__h.forEach(xs),t.__h=t.__h.filter(function(r){return!r.__||Ia(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Ce.__e(r,t.__v)}}),Cc&&Cc(n,e)},Ce.unmount=function(n){kc&&kc(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{xs(r)}catch(i){e=i}}),t.__H=void 0,e&&Ce.__e(e,t.__v))};var Nc=typeof requestAnimationFrame=="function";function sm(n){var e,t=function(){clearTimeout(r),Nc&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,35);Nc&&(e=requestAnimationFrame(t))}function xs(n){var e=Ie,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Ie=e}function Ia(n){var e=Ie;n.__c=n.__(),Ie=e}function ol(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function ed(n,e){return typeof e=="function"?e(n):e}function td(n,e){for(var t in e)n[t]=e[t];return n}function Ra(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function Lc(n){n()}function Oc(n,e){this.props=n,this.context=e}function om(n,e){function t(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),e?!e(this.props,i)||!a:Ra(this.props,i)}function r(i){return this.shouldComponentUpdate=t,re(n,i)}return r.displayName="Memo("+(n.displayName||n.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=n,r}(Oc.prototype=new Wt).isPureReactComponent=!0,Oc.prototype.shouldComponentUpdate=function(n,e){return Ra(this.props,n)||Ra(this.state,e)};var Vc=se.__b;se.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Vc&&Vc(n)};var am=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function al(n){function e(t){var r=td({},t);return delete r.ref,n(r,t.ref||null)}return e.$$typeof=am,e.render=n,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var lm=se.__e;se.__e=function(n,e,t,r){if(n.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}lm(n,e,t,r)};var Mc=se.unmount;function nd(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=td({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return nd(r,e,t)})),n}function rd(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return rd(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function ea(){this.__u=0,this.o=null,this.__b=null}function id(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function bs(){this.i=null,this.l=null}se.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),Mc&&Mc(n)},(ea.prototype=new Wt).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var i=id(r.__v),s=!1,a=function(){s||(s=!0,t.__R=null,i?i(l):l())};t.__R=a;var l=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=rd(c,c.__c.__P,c.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(a,a)},ea.prototype.componentWillUnmount=function(){this.o=[]},ea.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=nd(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&re(kt,null,n.fallback);return i&&(i.__u&=-33),[re(kt,null,e.__a?null:n.children),i]};var xc=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(bs.prototype=new Wt).__a=function(n){var e=this,t=id(e.__v),r=e.l.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),xc(e,n,r)):i()};t?t(s):s()}},bs.prototype.render=function(n){this.i=null,this.l=new Map;var e=Zs(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},bs.prototype.componentDidUpdate=bs.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){xc(n,t,e)})};var cm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,um=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,hm=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dm=/[A-Z0-9]/g,fm=typeof document<"u",pm=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};Wt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Wt.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Fc=se.event;function mm(){}function gm(){return this.cancelBubble}function _m(){return this.defaultPrevented}se.event=function(n){return Fc&&(n=Fc(n)),n.persist=mm,n.isPropagationStopped=gm,n.isDefaultPrevented=_m,n.nativeEvent=n};var ym={enumerable:!1,configurable:!0,get:function(){return this.class}},Uc=se.vnode;se.vnode=function(n){typeof n.type=="string"&&(function(e){var t=e.props,r=e.type,i={},s=r.indexOf("-")===-1;for(var a in t){var l=t[a];if(!(a==="value"&&"defaultValue"in t&&l==null||fm&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||pm(t.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":hm.test(a)&&(a=c):c=a="oninput":s&&um.test(a)?a=a.replace(dm,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&i[a=c]&&(a="oninputCapture"),i[a]=l}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Zs(t.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Zs(t.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",ym)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i})(n),n.$$typeof=cm,Uc&&Uc(n)};var $c=se.__r;se.__r=function(n){$c&&$c(n),n.__c};var Bc=se.diffed;se.diffed=function(n){Bc&&Bc(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};var vm=function(n,e){return n(e)};var sd=n=>{throw TypeError(n)},Em=(n,e,t)=>e.has(n)||sd("Cannot "+t),ta=(n,e,t)=>(Em(n,e,"read from private field"),t?t.call(n):e.get(n)),wm=(n,e,t)=>e.has(n)?sd("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),jc="popstate";function Tm(n={}){function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return Bi("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Fn(i)}return Rm(e,t,null,n)}function le(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function De(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Im(){return Math.random().toString(36).substring(2,10)}function Hc(n,e){return{usr:n.state,key:n.key,idx:e}}function Bi(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?qn(e):e,state:t,key:e&&e.key||r||Im()}}function Fn({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function qn(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Rm(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",c=null,u=p();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function p(){return(a.state||{idx:null}).idx}function f(){l="POP";let P=p(),L=P==null?null:P-u;u=P,c&&c({action:l,location:O.location,delta:L})}function g(P,L){l="PUSH";let V=Bi(O.location,P,L);u=p()+1;let B=Hc(V,u),te=O.createHref(V);try{a.pushState(B,"",te)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(te)}s&&c&&c({action:l,location:O.location,delta:1})}function v(P,L){l="REPLACE";let V=Bi(O.location,P,L);u=p();let B=Hc(V,u),te=O.createHref(V);a.replaceState(B,"",te),s&&c&&c({action:l,location:O.location,delta:0})}function k(P){return od(P)}let O={get action(){return l},get location(){return n(i,a)},listen(P){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(jc,f),c=P,()=>{i.removeEventListener(jc,f),c=null}},createHref(P){return e(i,P)},createURL:k,encodeLocation(P){let L=k(P);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:g,replace:v,go(P){return a.go(P)}};return O}function od(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),le(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Fn(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var bi,zc=class{constructor(n){if(wm(this,bi,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(ta(this,bi).has(n))return ta(this,bi).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){ta(this,bi).set(n,e)}};bi=new WeakMap;var Am=new Set(["lazy","caseSensitive","path","id","index","children"]);function bm(n){return Am.has(n)}var Sm=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function Pm(n){return Sm.has(n)}function Cm(n){return n.index===!0}function ji(n,e,t=[],r={},i=!1){return n.map((s,a)=>{let l=[...t,String(a)],c=typeof s.id=="string"?s.id:l.join("-");if(le(s.index!==!0||!s.children,"Cannot specify children on an index route"),le(i||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),Cm(s)){let u={...s,...e(s),id:c};return r[c]=u,u}else{let u={...s,...e(s),id:c,children:void 0};return r[c]=u,s.children&&(u.children=ji(s.children,e,l,r,i)),u}})}function In(n,e,t="/"){return Fs(n,e,t,!1)}function Fs(n,e,t,r){let i=typeof e=="string"?qn(e):e,s=Tt(i.pathname||"/",t);if(s==null)return null;let a=ad(n);Dm(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=jm(s);l=$m(a[c],u,r)}return l}function km(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function ad(n,e=[],t=[],r="",i=!1){let s=(a,l,c=i,u)=>{let p={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&c)return;le(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let f=Gt([r,p.relativePath]),g=t.concat(p);a.children&&a.children.length>0&&(le(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),ad(a.children,e,g,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:Fm(f,a.index),routesMeta:g})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let c of ld(a.path))s(a,l,!0,c)}),e}function ld(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=ld(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function Dm(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Um(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Nm=/^:[\w-]+$/,Lm=3,Om=2,Vm=1,Mm=10,xm=-2,qc=n=>n==="*";function Fm(n,e){let t=n.split("/"),r=t.length;return t.some(qc)&&(r+=xm),e&&(r+=Om),t.filter(i=>!qc(i)).reduce((i,s)=>i+(Nm.test(s)?Lm:s===""?Vm:Mm),r)}function Um(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function $m(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",f=eo({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},p),g=c.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=eo({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Gt([s,f.pathname]),pathnameBase:Wm(Gt([s,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(s=Gt([s,f.pathnameBase]))}return a}function eo(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Bm(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:p,isOptional:f},g)=>{if(p==="*"){let k=l[g]||"";a=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const v=l[g];return f&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:n}}function Bm(n,e=!1,t=!0){De(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jm(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return De(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Tt(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Hm({basename:n,pathname:e}){return e==="/"?n:Gt([n,e])}function zm(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?qn(n):n;return{pathname:t?t.startsWith("/")?t:qm(t,e):e,search:Gm(r),hash:Km(i)}}function qm(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function na(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cd(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Eo(n){let e=cd(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function wo(n,e,t,r=!1){let i;typeof n=="string"?i=qn(n):(i={...n},le(!i.pathname||!i.pathname.includes("?"),na("?","pathname","search",i)),le(!i.pathname||!i.pathname.includes("#"),na("#","pathname","hash",i)),le(!i.search||!i.search.includes("#"),na("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}l=f>=0?e[f]:"/"}let c=zm(i,l),u=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||p)&&(c.pathname+="/"),c}var Gt=n=>n.join("/").replace(/\/\/+/g,"/"),Wm=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Gm=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Km=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,to=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Hi(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ud=["POST","PUT","PATCH","DELETE"],Qm=new Set(ud),Ym=["GET",...ud],Jm=new Set(Ym),Xm=new Set([301,302,303,307,308]),Zm=new Set([307,308]),ra={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},eg={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ii={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ll=n=>tg.test(n),ng=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),hd="remix-router-transitions",dd=Symbol("ResetLoaderData");function rg(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";le(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||ng,s={},a=ji(n.routes,i,void 0,s),l,c=n.basename||"/";c.startsWith("/")||(c=`/${c}`);let u=n.dataStrategy||lg,p={...n.future},f=null,g=new Set,v=null,k=null,O=null,P=n.hydrationData!=null,L=In(a,n.history.location,c),V=!1,B=null,te;if(L==null&&!n.patchRoutesOnNavigation){let w=Et(404,{pathname:n.history.location.pathname}),{matches:b,route:N}=Ss(a);te=!0,L=b,B={[N.id]:w}}else if(L&&!n.hydrationData&&Mt(L,a,n.history.location.pathname).active&&(L=null),L)if(L.some(w=>w.route.lazy))te=!1;else if(!L.some(w=>w.route.loader))te=!0;else{let w=n.hydrationData?n.hydrationData.loaderData:null,b=n.hydrationData?n.hydrationData.errors:null;if(b){let N=L.findIndex(x=>b[x.route.id]!==void 0);te=L.slice(0,N+1).every(x=>!ba(x.route,w,b))}else te=L.every(N=>!ba(N.route,w,b))}else{te=!1,L=[];let w=Mt(null,a,n.history.location.pathname);w.active&&w.matches&&(V=!0,L=w.matches)}let q,C={historyAction:n.history.action,location:n.history.location,matches:L,initialized:te,navigation:ra,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||B,fetchers:new Map,blockers:new Map},T="POP",_=!1,y,R=!1,I=new Map,A=null,E=!1,ae=!1,Le=new Set,ge=new Map,lt=0,Ue=-1,Xe=new Map,Ze=new Set,st=new Map,ht=new Map,dt=new Set,gt=new Map,dn,Zt=null;function ii(){if(f=n.history.listen(({action:w,location:b,delta:N})=>{if(dn){dn(),dn=void 0;return}De(gt.size===0||N!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let x=Qn({currentLocation:C.location,nextLocation:b,historyAction:w});if(x&&N!=null){let $=new Promise(W=>{dn=W});n.history.go(N*-1),Kn(x,{state:"blocked",location:b,proceed(){Kn(x,{state:"proceeding",proceed:void 0,reset:void 0,location:b}),$.then(()=>n.history.go(N))},reset(){let W=new Map(C.blockers);W.set(x,Ii),He({blockers:W})}});return}return Ot(w,b)}),t){Ig(e,I);let w=()=>Rg(e,I);e.addEventListener("pagehide",w),A=()=>e.removeEventListener("pagehide",w)}return C.initialized||Ot("POP",C.location,{initialHydration:!0}),q}function si(){f&&f(),A&&A(),g.clear(),y&&y.abort(),C.fetchers.forEach((w,b)=>ci(b)),C.blockers.forEach((w,b)=>Vt(b))}function fs(w){return g.add(w),()=>g.delete(w)}function He(w,b={}){w.matches&&(w.matches=w.matches.map($=>{let W=s[$.route.id],G=$.route;return G.element!==W.element||G.errorElement!==W.errorElement||G.hydrateFallbackElement!==W.hydrateFallbackElement?{...$,route:W}:$})),C={...C,...w};let N=[],x=[];C.fetchers.forEach(($,W)=>{$.state==="idle"&&(dt.has(W)?N.push(W):x.push(W))}),dt.forEach($=>{!C.fetchers.has($)&&!ge.has($)&&N.push($)}),[...g].forEach($=>$(C,{deletedFetchers:N,viewTransitionOpts:b.viewTransitionOpts,flushSync:b.flushSync===!0})),N.forEach($=>ci($)),x.forEach($=>C.fetchers.delete($))}function fn(w,b,{flushSync:N}={}){let x=C.actionData!=null&&C.navigation.formMethod!=null&&ut(C.navigation.formMethod)&&C.navigation.state==="loading"&&w.state?._isRedirect!==!0,$;b.actionData?Object.keys(b.actionData).length>0?$=b.actionData:$=null:x?$=C.actionData:$=null;let W=b.loaderData?tu(C.loaderData,b.loaderData,b.matches||[],b.errors):C.loaderData,G=C.blockers;G.size>0&&(G=new Map(G),G.forEach((Q,K)=>G.set(K,Ii)));let z=E?!1:fi(w,b.matches||C.matches),J=_===!0||C.navigation.formMethod!=null&&ut(C.navigation.formMethod)&&w.state?._isRedirect!==!0;l&&(a=l,l=void 0),E||T==="POP"||(T==="PUSH"?n.history.push(w,w.state):T==="REPLACE"&&n.history.replace(w,w.state));let Y;if(T==="POP"){let Q=I.get(C.location.pathname);Q&&Q.has(w.pathname)?Y={currentLocation:C.location,nextLocation:w}:I.has(w.pathname)&&(Y={currentLocation:w,nextLocation:C.location})}else if(R){let Q=I.get(C.location.pathname);Q?Q.add(w.pathname):(Q=new Set([w.pathname]),I.set(C.location.pathname,Q)),Y={currentLocation:C.location,nextLocation:w}}He({...b,actionData:$,loaderData:W,historyAction:T,location:w,initialized:!0,navigation:ra,revalidation:"idle",restoreScrollPosition:z,preventScrollReset:J,blockers:G},{viewTransitionOpts:Y,flushSync:N===!0}),T="POP",_=!1,R=!1,E=!1,ae=!1,Zt?.resolve(),Zt=null}async function oi(w,b){if(typeof w=="number"){n.history.go(w);return}let N=Aa(C.location,C.matches,c,w,b?.fromRouteId,b?.relative),{path:x,submission:$,error:W}=Wc(!1,N,b),G=C.location,z=Bi(C.location,x,b&&b.state);z={...z,...n.history.encodeLocation(z)};let J=b&&b.replace!=null?b.replace:void 0,Y="PUSH";J===!0?Y="REPLACE":J===!1||$!=null&&ut($.formMethod)&&$.formAction===C.location.pathname+C.location.search&&(Y="REPLACE");let Q=b&&"preventScrollReset"in b?b.preventScrollReset===!0:void 0,K=(b&&b.flushSync)===!0,ce=Qn({currentLocation:G,nextLocation:z,historyAction:Y});if(ce){Kn(ce,{state:"blocked",location:z,proceed(){Kn(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),oi(w,b)},reset(){let ye=new Map(C.blockers);ye.set(ce,Ii),He({blockers:ye})}});return}await Ot(Y,z,{submission:$,pendingError:W,preventScrollReset:Q,replace:b&&b.replace,enableViewTransition:b&&b.viewTransition,flushSync:K})}function ai(){Zt||(Zt=Ag()),tn(),He({revalidation:"loading"});let w=Zt.promise;return C.navigation.state==="submitting"?w:C.navigation.state==="idle"?(Ot(C.historyAction,C.location,{startUninterruptedRevalidation:!0}),w):(Ot(T||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:R===!0}),w)}async function Ot(w,b,N){y&&y.abort(),y=null,T=w,E=(N&&N.startUninterruptedRevalidation)===!0,Ke(C.location,C.matches),_=(N&&N.preventScrollReset)===!0,R=(N&&N.enableViewTransition)===!0;let x=l||a,$=N&&N.overrideNavigation,W=N?.initialHydration&&C.matches&&C.matches.length>0&&!V?C.matches:In(x,b,c),G=(N&&N.flushSync)===!0;if(W&&C.initialized&&!ae&&gg(C.location,b)&&!(N&&N.submission&&ut(N.submission.formMethod))){fn(b,{matches:W},{flushSync:G});return}let z=Mt(W,x,b.pathname);if(z.active&&z.matches&&(W=z.matches),!W){let{error:Qe,notFoundMatches:we,route:ve}=wr(b.pathname);fn(b,{matches:we,loaderData:{},errors:{[ve.id]:Qe}},{flushSync:G});return}y=new AbortController;let J=Rr(n.history,b,y.signal,N&&N.submission),Y=n.unstable_getContext?await n.unstable_getContext():new zc,Q;if(N&&N.pendingError)Q=[Rn(W).route.id,{type:"error",error:N.pendingError}];else if(N&&N.submission&&ut(N.submission.formMethod)){let Qe=await jo(J,b,N.submission,W,Y,z.active,N&&N.initialHydration===!0,{replace:N.replace,flushSync:G});if(Qe.shortCircuited)return;if(Qe.pendingActionResult){let[we,ve]=Qe.pendingActionResult;if(pt(ve)&&Hi(ve.error)&&ve.error.status===404){y=null,fn(b,{matches:Qe.matches,loaderData:{},errors:{[we]:ve.error}});return}}W=Qe.matches||W,Q=Qe.pendingActionResult,$=ia(b,N.submission),G=!1,z.active=!1,J=Rr(n.history,J.url,J.signal)}let{shortCircuited:K,matches:ce,loaderData:ye,errors:Pe}=await li(J,b,W,Y,z.active,$,N&&N.submission,N&&N.fetcherSubmission,N&&N.replace,N&&N.initialHydration===!0,G,Q);K||(y=null,fn(b,{matches:ce||W,...nu(Q),loaderData:ye,errors:Pe}))}async function jo(w,b,N,x,$,W,G,z={}){tn();let J=wg(b,N);if(He({navigation:J},{flushSync:z.flushSync===!0}),W){let K=await xt(x,b.pathname,w.signal);if(K.type==="aborted")return{shortCircuited:!0};if(K.type==="error"){if(K.partialMatches.length===0){let{matches:ye,route:Pe}=Ss(a);return{matches:ye,pendingActionResult:[Pe.id,{type:"error",error:K.error}]}}let ce=Rn(K.partialMatches).route.id;return{matches:K.partialMatches,pendingActionResult:[ce,{type:"error",error:K.error}]}}else if(K.matches)x=K.matches;else{let{notFoundMatches:ce,error:ye,route:Pe}=wr(b.pathname);return{matches:ce,pendingActionResult:[Pe.id,{type:"error",error:ye}]}}}let Y,Q=Us(x,b);if(!Q.route.action&&!Q.route.lazy)Y={type:"error",error:Et(405,{method:w.method,pathname:b.pathname,routeId:Q.route.id})};else{let K=kr(i,s,w,x,Q,G?[]:r,$),ce=await pn(w,K,$,null);if(Y=ce[Q.route.id],!Y){for(let ye of x)if(ce[ye.route.id]){Y=ce[ye.route.id];break}}if(w.signal.aborted)return{shortCircuited:!0}}if(sr(Y)){let K;return z&&z.replace!=null?K=z.replace:K=Xc(Y.response.headers.get("Location"),new URL(w.url),c)===C.location.pathname+C.location.search,await en(w,Y,!0,{submission:N,replace:K}),{shortCircuited:!0}}if(pt(Y)){let K=Rn(x,Q.route.id);return(z&&z.replace)!==!0&&(T="PUSH"),{matches:x,pendingActionResult:[K.route.id,Y,Q.route.id]}}return{matches:x,pendingActionResult:[Q.route.id,Y]}}async function li(w,b,N,x,$,W,G,z,J,Y,Q,K){let ce=W||ia(b,G),ye=G||z||iu(ce),Pe=!E&&!Y;if($){if(Pe){let Oe=_r(K);He({navigation:ce,...Oe!==void 0?{actionData:Oe}:{}},{flushSync:Q})}let he=await xt(N,b.pathname,w.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){if(he.partialMatches.length===0){let{matches:Ft,route:Ut}=Ss(a);return{matches:Ft,loaderData:{},errors:{[Ut.id]:he.error}}}let Oe=Rn(he.partialMatches).route.id;return{matches:he.partialMatches,loaderData:{},errors:{[Oe]:he.error}}}else if(he.matches)N=he.matches;else{let{error:Oe,notFoundMatches:Ft,route:Ut}=wr(b.pathname);return{matches:Ft,loaderData:{},errors:{[Ut.id]:Oe}}}}let Qe=l||a,{dsMatches:we,revalidatingFetchers:ve}=Gc(w,x,i,s,n.history,C,N,ye,b,Y?[]:r,Y===!0,ae,Le,dt,st,Ze,Qe,c,n.patchRoutesOnNavigation!=null,K);if(Ue=++lt,!n.dataStrategy&&!we.some(he=>he.shouldLoad)&&!we.some(he=>he.route.unstable_middleware)&&ve.length===0){let he=mn();return fn(b,{matches:N,loaderData:{},errors:K&&pt(K[1])?{[K[0]]:K[1].error}:null,...nu(K),...he?{fetchers:new Map(C.fetchers)}:{}},{flushSync:Q}),{shortCircuited:!0}}if(Pe){let he={};if(!$){he.navigation=ce;let Oe=_r(K);Oe!==void 0&&(he.actionData=Oe)}ve.length>0&&(he.fetchers=ps(ve)),He(he,{flushSync:Q})}ve.forEach(he=>{bt(he.key),he.controller&&ge.set(he.key,he.controller)});let yt=()=>ve.forEach(he=>bt(he.key));y&&y.signal.addEventListener("abort",yt);let{loaderResults:gn,fetcherResults:vt}=await ms(we,ve,w,x);if(w.signal.aborted)return{shortCircuited:!0};y&&y.signal.removeEventListener("abort",yt),ve.forEach(he=>ge.delete(he.key));let et=Ps(gn);if(et)return await en(w,et.result,!0,{replace:J}),{shortCircuited:!0};if(et=Ps(vt),et)return Ze.add(et.key),await en(w,et.result,!0,{replace:J}),{shortCircuited:!0};let{loaderData:St,errors:nn}=eu(C,N,gn,K,ve,vt);Y&&C.errors&&(nn={...C.errors,...nn});let rn=mn(),Jn=Er(Ue),Xn=rn||Jn||ve.length>0;return{matches:N,loaderData:St,errors:nn,...Xn?{fetchers:new Map(C.fetchers)}:{}}}function _r(w){if(w&&!pt(w[1]))return{[w[0]]:w[1].data};if(C.actionData)return Object.keys(C.actionData).length===0?null:C.actionData}function ps(w){return w.forEach(b=>{let N=C.fetchers.get(b.key),x=Ri(void 0,N?N.data:void 0);C.fetchers.set(b.key,x)}),new Map(C.fetchers)}async function ze(w,b,N,x){bt(w);let $=(x&&x.flushSync)===!0,W=l||a,G=Aa(C.location,C.matches,c,N,b,x?.relative),z=In(W,G,c),J=Mt(z,W,G);if(J.active&&J.matches&&(z=J.matches),!z){_t(w,b,Et(404,{pathname:G}),{flushSync:$});return}let{path:Y,submission:Q,error:K}=Wc(!0,G,x);if(K){_t(w,b,K,{flushSync:$});return}let ce=n.unstable_getContext?await n.unstable_getContext():new zc,ye=(x&&x.preventScrollReset)===!0;if(Q&&ut(Q.formMethod)){await Ge(w,b,Y,z,ce,J.active,$,ye,Q);return}st.set(w,{routeId:b,path:Y}),await yr(w,b,Y,z,ce,J.active,$,ye,Q)}async function Ge(w,b,N,x,$,W,G,z,J){tn(),st.delete(w);let Y=C.fetchers.get(w);At(w,Tg(J,Y),{flushSync:G});let Q=new AbortController,K=Rr(n.history,N,Q.signal,J);if(W){let be=await xt(x,new URL(K.url).pathname,K.signal,w);if(be.type==="aborted")return;if(be.type==="error"){_t(w,b,be.error,{flushSync:G});return}else if(be.matches)x=be.matches;else{_t(w,b,Et(404,{pathname:N}),{flushSync:G});return}}let ce=Us(x,N);if(!ce.route.action&&!ce.route.lazy){let be=Et(405,{method:J.formMethod,pathname:N,routeId:b});_t(w,b,be,{flushSync:G});return}ge.set(w,Q);let ye=lt,Pe=kr(i,s,K,x,ce,r,$),we=(await pn(K,Pe,$,w))[ce.route.id];if(K.signal.aborted){ge.get(w)===Q&&ge.delete(w);return}if(dt.has(w)){if(sr(we)||pt(we)){At(w,Tn(void 0));return}}else{if(sr(we))if(ge.delete(w),Ue>ye){At(w,Tn(void 0));return}else return Ze.add(w),At(w,Ri(J)),en(K,we,!1,{fetcherSubmission:J,preventScrollReset:z});if(pt(we)){_t(w,b,we.error);return}}let ve=C.navigation.location||C.location,yt=Rr(n.history,ve,Q.signal),gn=l||a,vt=C.navigation.state!=="idle"?In(gn,C.navigation.location,c):C.matches;le(vt,"Didn't find any matches after fetcher action");let et=++lt;Xe.set(w,et);let St=Ri(J,we.data);C.fetchers.set(w,St);let{dsMatches:nn,revalidatingFetchers:rn}=Gc(yt,$,i,s,n.history,C,vt,J,ve,r,!1,ae,Le,dt,st,Ze,gn,c,n.patchRoutesOnNavigation!=null,[ce.route.id,we]);rn.filter(be=>be.key!==w).forEach(be=>{let Zn=be.key,gs=C.fetchers.get(Zn),$t=Ri(void 0,gs?gs.data:void 0);C.fetchers.set(Zn,$t),bt(Zn),be.controller&&ge.set(Zn,be.controller)}),He({fetchers:new Map(C.fetchers)});let Jn=()=>rn.forEach(be=>bt(be.key));Q.signal.addEventListener("abort",Jn);let{loaderResults:Xn,fetcherResults:he}=await ms(nn,rn,yt,$);if(Q.signal.aborted)return;if(Q.signal.removeEventListener("abort",Jn),Xe.delete(w),ge.delete(w),rn.forEach(be=>ge.delete(be.key)),C.fetchers.has(w)){let be=Tn(we.data);C.fetchers.set(w,be)}let Oe=Ps(Xn);if(Oe)return en(yt,Oe.result,!1,{preventScrollReset:z});if(Oe=Ps(he),Oe)return Ze.add(Oe.key),en(yt,Oe.result,!1,{preventScrollReset:z});let{loaderData:Ft,errors:Ut}=eu(C,vt,Xn,void 0,rn,he);Er(et),C.navigation.state==="loading"&&et>Ue?(le(T,"Expected pending action"),y&&y.abort(),fn(C.navigation.location,{matches:vt,loaderData:Ft,errors:Ut,fetchers:new Map(C.fetchers)})):(He({errors:Ut,loaderData:tu(C.loaderData,Ft,vt,Ut),fetchers:new Map(C.fetchers)}),ae=!1)}async function yr(w,b,N,x,$,W,G,z,J){let Y=C.fetchers.get(w);At(w,Ri(J,Y?Y.data:void 0),{flushSync:G});let Q=new AbortController,K=Rr(n.history,N,Q.signal);if(W){let ve=await xt(x,new URL(K.url).pathname,K.signal,w);if(ve.type==="aborted")return;if(ve.type==="error"){_t(w,b,ve.error,{flushSync:G});return}else if(ve.matches)x=ve.matches;else{_t(w,b,Et(404,{pathname:N}),{flushSync:G});return}}let ce=Us(x,N);ge.set(w,Q);let ye=lt,Pe=kr(i,s,K,x,ce,r,$),we=(await pn(K,Pe,$,w))[ce.route.id];if(ge.get(w)===Q&&ge.delete(w),!K.signal.aborted){if(dt.has(w)){At(w,Tn(void 0));return}if(sr(we))if(Ue>ye){At(w,Tn(void 0));return}else{Ze.add(w),await en(K,we,!1,{preventScrollReset:z});return}if(pt(we)){_t(w,b,we.error);return}At(w,Tn(we.data))}}async function en(w,b,N,{submission:x,fetcherSubmission:$,preventScrollReset:W,replace:G}={}){b.response.headers.has("X-Remix-Revalidate")&&(ae=!0);let z=b.response.headers.get("Location");le(z,"Expected a Location header on the redirect Response"),z=Xc(z,new URL(w.url),c);let J=Bi(C.location,z,{_isRedirect:!0});if(t){let Pe=!1;if(b.response.headers.has("X-Remix-Reload-Document"))Pe=!0;else if(ll(z)){const Qe=od(z,!0);Pe=Qe.origin!==e.location.origin||Tt(Qe.pathname,c)==null}if(Pe){G?e.location.replace(z):e.location.assign(z);return}}y=null;let Y=G===!0||b.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Q,formAction:K,formEncType:ce}=C.navigation;!x&&!$&&Q&&K&&ce&&(x=iu(C.navigation));let ye=x||$;if(Zm.has(b.response.status)&&ye&&ut(ye.formMethod))await Ot(Y,J,{submission:{...ye,formAction:z},preventScrollReset:W||_,enableViewTransition:N?R:void 0});else{let Pe=ia(J,x);await Ot(Y,J,{overrideNavigation:Pe,fetcherSubmission:$,preventScrollReset:W||_,enableViewTransition:N?R:void 0})}}async function pn(w,b,N,x){let $,W={};try{$=await ug(u,w,b,x,N,!1)}catch(G){return b.filter(z=>z.shouldLoad).forEach(z=>{W[z.route.id]={type:"error",error:G}}),W}if(w.signal.aborted)return W;for(let[G,z]of Object.entries($))if(vg(z)){let J=z.result;W[G]={type:"redirect",response:pg(J,w,G,b,c)}}else W[G]=await fg(z);return W}async function ms(w,b,N,x){let $=pn(N,w,x,null),W=Promise.all(b.map(async J=>{if(J.matches&&J.match&&J.request&&J.controller){let Q=(await pn(J.request,J.matches,x,J.key))[J.match.route.id];return{[J.key]:Q}}else return Promise.resolve({[J.key]:{type:"error",error:Et(404,{pathname:J.path})}})})),G=await $,z=(await W).reduce((J,Y)=>Object.assign(J,Y),{});return{loaderResults:G,fetcherResults:z}}function tn(){ae=!0,st.forEach((w,b)=>{ge.has(b)&&Le.add(b),bt(b)})}function At(w,b,N={}){C.fetchers.set(w,b),He({fetchers:new Map(C.fetchers)},{flushSync:(N&&N.flushSync)===!0})}function _t(w,b,N,x={}){let $=Rn(C.matches,b);ci(w),He({errors:{[$.route.id]:N},fetchers:new Map(C.fetchers)},{flushSync:(x&&x.flushSync)===!0})}function vr(w){return ht.set(w,(ht.get(w)||0)+1),dt.has(w)&&dt.delete(w),C.fetchers.get(w)||eg}function ci(w){let b=C.fetchers.get(w);ge.has(w)&&!(b&&b.state==="loading"&&Xe.has(w))&&bt(w),st.delete(w),Xe.delete(w),Ze.delete(w),dt.delete(w),Le.delete(w),C.fetchers.delete(w)}function Ho(w){let b=(ht.get(w)||0)-1;b<=0?(ht.delete(w),dt.add(w)):ht.set(w,b),He({fetchers:new Map(C.fetchers)})}function bt(w){let b=ge.get(w);b&&(b.abort(),ge.delete(w))}function ui(w){for(let b of w){let N=vr(b),x=Tn(N.data);C.fetchers.set(b,x)}}function mn(){let w=[],b=!1;for(let N of Ze){let x=C.fetchers.get(N);le(x,`Expected fetcher: ${N}`),x.state==="loading"&&(Ze.delete(N),w.push(N),b=!0)}return ui(w),b}function Er(w){let b=[];for(let[N,x]of Xe)if(x<w){let $=C.fetchers.get(N);le($,`Expected fetcher: ${N}`),$.state==="loading"&&(bt(N),Xe.delete(N),b.push(N))}return ui(b),b.length>0}function hi(w,b){let N=C.blockers.get(w)||Ii;return gt.get(w)!==b&&gt.set(w,b),N}function Vt(w){C.blockers.delete(w),gt.delete(w)}function Kn(w,b){let N=C.blockers.get(w)||Ii;le(N.state==="unblocked"&&b.state==="blocked"||N.state==="blocked"&&b.state==="blocked"||N.state==="blocked"&&b.state==="proceeding"||N.state==="blocked"&&b.state==="unblocked"||N.state==="proceeding"&&b.state==="unblocked",`Invalid blocker state transition: ${N.state} -> ${b.state}`);let x=new Map(C.blockers);x.set(w,b),He({blockers:x})}function Qn({currentLocation:w,nextLocation:b,historyAction:N}){if(gt.size===0)return;gt.size>1&&De(!1,"A router only supports one blocker at a time");let x=Array.from(gt.entries()),[$,W]=x[x.length-1],G=C.blockers.get($);if(!(G&&G.state==="proceeding")&&W({currentLocation:w,nextLocation:b,historyAction:N}))return $}function wr(w){let b=Et(404,{pathname:w}),N=l||a,{matches:x,route:$}=Ss(N);return{notFoundMatches:x,route:$,error:b}}function Yn(w,b,N){if(v=w,O=b,k=N||null,!P&&C.navigation===ra){P=!0;let x=fi(C.location,C.matches);x!=null&&He({restoreScrollPosition:x})}return()=>{v=null,O=null,k=null}}function di(w,b){return k&&k(w,b.map(x=>km(x,C.loaderData)))||w.key}function Ke(w,b){if(v&&O){let N=di(w,b);v[N]=O()}}function fi(w,b){if(v){let N=di(w,b),x=v[N];if(typeof x=="number")return x}return null}function Mt(w,b,N){if(n.patchRoutesOnNavigation)if(w){if(Object.keys(w[0].params).length>0)return{active:!0,matches:Fs(b,N,c,!0)}}else return{active:!0,matches:Fs(b,N,c,!0)||[]};return{active:!1,matches:null}}async function xt(w,b,N,x){if(!n.patchRoutesOnNavigation)return{type:"success",matches:w};let $=w;for(;;){let W=l==null,G=l||a,z=s;try{await n.patchRoutesOnNavigation({signal:N,path:b,matches:$,fetcherKey:x,patch:(Q,K)=>{N.aborted||Kc(Q,K,G,z,i,!1)}})}catch(Q){return{type:"error",error:Q,partialMatches:$}}finally{W&&!N.aborted&&(a=[...a])}if(N.aborted)return{type:"aborted"};let J=In(G,b,c);if(J)return{type:"success",matches:J};let Y=Fs(G,b,c,!0);if(!Y||$.length===Y.length&&$.every((Q,K)=>Q.route.id===Y[K].route.id))return{type:"success",matches:null};$=Y}}function zo(w){s={},l=ji(w,i,void 0,s)}function qo(w,b,N=!1){let x=l==null;Kc(w,b,l||a,s,i,N),x&&(a=[...a],He({}))}return q={get basename(){return c},get future(){return p},get state(){return C},get routes(){return a},get window(){return e},initialize:ii,subscribe:fs,enableScrollRestoration:Yn,navigate:oi,fetch:ze,revalidate:ai,createHref:w=>n.history.createHref(w),encodeLocation:w=>n.history.encodeLocation(w),getFetcher:vr,deleteFetcher:Ho,dispose:si,getBlocker:hi,deleteBlocker:Vt,patchRoutes:qo,_internalFetchControllers:ge,_internalSetRoutes:zo,_internalSetStateDoNotUseOrYouWillBreakYourApp(w){He(w)}},q}function ig(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Aa(n,e,t,r,i,s){let a,l;if(i){a=[];for(let u of e)if(a.push(u),u.route.id===i){l=u;break}}else a=e,l=e[e.length-1];let c=wo(r||".",Eo(a),Tt(n.pathname,t)||n.pathname,s==="path");if(r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&l){let u=cl(c.search);if(l.route.index&&!u)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&u){let p=new URLSearchParams(c.search),f=p.getAll("index");p.delete("index"),f.filter(v=>v).forEach(v=>p.append("index",v));let g=p.toString();c.search=g?`?${g}`:""}}return t!=="/"&&(c.pathname=Hm({basename:t,pathname:c.pathname})),Fn(c)}function Wc(n,e,t){if(!t||!ig(t))return{path:e};if(t.formMethod&&!Eg(t.formMethod))return{path:e,error:Et(405,{method:t.formMethod})};let r=()=>({path:e,error:Et(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=yd(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ut(s))return r();let f=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((g,[v,k])=>`${g}${v}=${k}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:f}}}else if(t.formEncType==="application/json"){if(!ut(s))return r();try{let f=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:f,text:void 0}}}catch{return r()}}}le(typeof FormData=="function","FormData is not available in this environment");let l,c;if(t.formData)l=Pa(t.formData),c=t.formData;else if(t.body instanceof FormData)l=Pa(t.body),c=t.body;else if(t.body instanceof URLSearchParams)l=t.body,c=Zc(l);else if(t.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(t.body),c=Zc(l)}catch{return r()}let u={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ut(u.formMethod))return{path:e,submission:u};let p=qn(e);return n&&p.search&&cl(p.search)&&l.append("index",""),p.search=`?${l}`,{path:Fn(p),submission:u}}function Gc(n,e,t,r,i,s,a,l,c,u,p,f,g,v,k,O,P,L,V,B){let te=B?pt(B[1])?B[1].error:B[1].data:void 0,q=i.createURL(s.location),C=i.createURL(c),T;if(p&&s.errors){let E=Object.keys(s.errors)[0];T=a.findIndex(ae=>ae.route.id===E)}else if(B&&pt(B[1])){let E=B[0];T=a.findIndex(ae=>ae.route.id===E)-1}let _=B?B[1].statusCode:void 0,y=_&&_>=400,R={currentUrl:q,currentParams:s.matches[0]?.params||{},nextUrl:C,nextParams:a[0].params,...l,actionResult:te,actionStatus:_},I=a.map((E,ae)=>{let{route:Le}=E,ge=null;if(T!=null&&ae>T?ge=!1:Le.lazy?ge=!0:Le.loader==null?ge=!1:p?ge=ba(Le,s.loaderData,s.errors):sg(s.loaderData,s.matches[ae],E)&&(ge=!0),ge!==null)return Sa(t,r,n,E,u,e,ge);let lt=y?!1:f||q.pathname+q.search===C.pathname+C.search||q.search!==C.search||og(s.matches[ae],E),Ue={...R,defaultShouldRevalidate:lt},Xe=no(E,Ue);return Sa(t,r,n,E,u,e,Xe,Ue)}),A=[];return k.forEach((E,ae)=>{if(p||!a.some(ht=>ht.route.id===E.routeId)||v.has(ae))return;let Le=s.fetchers.get(ae),ge=Le&&Le.state!=="idle"&&Le.data===void 0,lt=In(P,E.path,L);if(!lt){if(V&&ge)return;A.push({key:ae,routeId:E.routeId,path:E.path,matches:null,match:null,request:null,controller:null});return}if(O.has(ae))return;let Ue=Us(lt,E.path),Xe=new AbortController,Ze=Rr(i,E.path,Xe.signal),st=null;if(g.has(ae))g.delete(ae),st=kr(t,r,Ze,lt,Ue,u,e);else if(ge)f&&(st=kr(t,r,Ze,lt,Ue,u,e));else{let ht={...R,defaultShouldRevalidate:y?!1:f};no(Ue,ht)&&(st=kr(t,r,Ze,lt,Ue,u,e,ht))}st&&A.push({key:ae,routeId:E.routeId,path:E.path,matches:st,match:Ue,request:Ze,controller:Xe})}),{dsMatches:I,revalidatingFetchers:A}}function ba(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&n.id in e,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function sg(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function og(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function no(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Kc(n,e,t,r,i,s){let a;if(n){let u=r[n];le(u,`No route found to patch children into: routeId = ${n}`),u.children||(u.children=[]),a=u.children}else a=t;let l=[],c=[];if(e.forEach(u=>{let p=a.find(f=>fd(u,f));p?c.push({existingRoute:p,newRoute:u}):l.push(u)}),l.length>0){let u=ji(l,i,[n||"_","patch",String(a?.length||"0")],r);a.push(...u)}if(s&&c.length>0)for(let u=0;u<c.length;u++){let{existingRoute:p,newRoute:f}=c[u],g=p,[v]=ji([f],i,[],{},!0);Object.assign(g,{element:v.element?v.element:g.element,errorElement:v.errorElement?v.errorElement:g.errorElement,hydrateFallbackElement:v.hydrateFallbackElement?v.hydrateFallbackElement:g.hydrateFallbackElement})}}function fd(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>e.children?.some(i=>fd(t,i))):!1}var Qc=new WeakMap,pd=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(le(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[n];if(!s)return;let a=Qc.get(i);a||(a={},Qc.set(i,a));let l=a[n];if(l)return l;let c=(async()=>{let u=bm(n),f=i[n]!==void 0&&n!=="hasErrorBoundary";if(u)De(!u,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),a[n]=Promise.resolve();else if(f)De(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let g=await s();g!=null&&(Object.assign(i,{[n]:g}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(g=>g===void 0)&&(i.lazy=void 0))})();return a[n]=c,c},Yc=new WeakMap;function ag(n,e,t,r,i){let s=t[n.id];if(le(s,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=Yc.get(s);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let f=(async()=>{le(typeof n.lazy=="function","No lazy route function found");let g=await n.lazy(),v={};for(let k in g){let O=g[k];if(O===void 0)continue;let P=Pm(k),V=s[k]!==void 0&&k!=="hasErrorBoundary";P?De(!P,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):V?De(!V,`Route "${s.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):v[k]=O}Object.assign(s,v),Object.assign(s,{...r(s),lazy:void 0})})();return Yc.set(s,f),f.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:f}}let a=Object.keys(n.lazy),l=[],c;for(let p of a){if(i&&i.includes(p))continue;let f=pd({key:p,route:n,manifest:t,mapRouteProperties:r});f&&(l.push(f),p===e&&(c=f))}let u=l.length>0?Promise.all(l).then(()=>{}):void 0;return u?.catch(()=>{}),c?.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:c}}async function Jc(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function lg(n){return n.matches.some(e=>e.route.unstable_middleware)?md(n,()=>Jc(n)):Jc(n)}function md(n,e){return cg(n,e,r=>r,_g,t);function t(r,i,s){if(s)return Promise.resolve(Object.assign(s.value,{[i]:{type:"error",result:r}}));{let{matches:a}=n,l=Math.min(a.findIndex(u=>u.route.id===i)||0,a.findIndex(u=>u.unstable_shouldCallHandler())||0),c=Rn(a,a[l].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function cg(n,e,t,r,i){let{matches:s,request:a,params:l,context:c}=n,u=s.flatMap(f=>f.route.unstable_middleware?f.route.unstable_middleware.map(g=>[f.route.id,g]):[]);return await gd({request:a,params:l,context:c},u,e,t,r,i)}async function gd(n,e,t,r,i,s,a=0){let{request:l}=n;if(l.signal.aborted)throw l.signal.reason??new Error(`Request aborted: ${l.method} ${l.url}`);let c=e[a];if(!c)return await t();let[u,p]=c,f,g=async()=>{if(f)throw new Error("You may only call `next()` once per middleware");try{return f={value:await gd(n,e,t,r,i,s,a+1)},f.value}catch(v){return f={value:await s(v,u,f)},f.value}};try{let v=await p(n,g),k=v!=null?r(v):void 0;return i(k)?k:f?k??f.value:(f={value:await g()},f.value)}catch(v){return await s(v,u,f)}}function _d(n,e,t,r,i){let s=pd({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),a=ag(r.route,ut(t.method)?"action":"loader",e,n,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function Sa(n,e,t,r,i,s,a,l=null){let c=!1,u=_d(n,e,t,r,i);return{...r,_lazyPromises:u,shouldLoad:a,unstable_shouldRevalidateArgs:l,unstable_shouldCallHandler(p){return c=!0,l?typeof p=="boolean"?no(r,{...l,defaultShouldRevalidate:p}):no(r,l):a},resolve(p){return c||a||p&&!ut(t.method)&&(r.route.lazy||r.route.loader)?hg({request:t,match:r,lazyHandlerPromise:u?.handler,lazyRoutePromise:u?.route,handlerOverride:p,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function kr(n,e,t,r,i,s,a,l=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:l,unstable_shouldCallHandler:()=>!1,_lazyPromises:_d(n,e,t,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Sa(n,e,t,c,s,a,!0,l))}async function ug(n,e,t,r,i,s){t.some(u=>u._lazyPromises?.middleware)&&await Promise.all(t.map(u=>u._lazyPromises?.middleware));let a={request:e,params:t[0].params,context:i,matches:t},c=await n({...a,fetcherKey:r,unstable_runClientMiddleware:u=>{let p=a;return md(p,()=>u({...p,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(u=>[u._lazyPromises?.handler,u._lazyPromises?.route]))}catch{}return c}async function hg({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,l,c=ut(n.method),u=c?"action":"loader",p=f=>{let g,v=new Promise((P,L)=>g=L);l=()=>g(),n.signal.addEventListener("abort",l);let k=P=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):f({request:n,params:e.params,context:s},...P!==void 0?[P]:[]),O=(async()=>{try{return{type:"data",result:await(i?i(L=>k(L)):k())}}catch(P){return{type:"error",result:P}}})();return Promise.race([O,v])};try{let f=c?e.route.action:e.route.loader;if(t||r)if(f){let g,[v]=await Promise.all([p(f).catch(k=>{g=k}),t,r]);if(g!==void 0)throw g;a=v}else{await t;let g=c?e.route.action:e.route.loader;if(g)[a]=await Promise.all([p(g),r]);else if(u==="action"){let v=new URL(n.url),k=v.pathname+v.search;throw Et(405,{method:n.method,pathname:k,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(f)a=await p(f);else{let g=new URL(n.url),v=g.pathname+g.search;throw Et(404,{pathname:v})}}catch(f){return{type:"error",result:f}}finally{l&&n.signal.removeEventListener("abort",l)}return a}async function dg(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function fg(n){let{result:e,type:t}=n;if(vd(e)){let r;try{r=await dg(e)}catch(i){return{type:"error",error:i}}return t==="error"?{type:"error",error:new to(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return t==="error"?ru(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new to(e.init?.status||500,void 0,e.data),statusCode:Hi(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Hi(e)?e.status:void 0}:ru(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function pg(n,e,t,r,i){let s=n.headers.get("Location");if(le(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!ll(s)){let a=r.slice(0,r.findIndex(l=>l.route.id===t)+1);s=Aa(new URL(e.url),a,i,s),n.headers.set("Location",s)}return n}function Xc(n,e,t){if(ll(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Tt(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return n}function Rr(n,e,t,r){let i=n.createURL(yd(e)).toString(),s={signal:t};if(r&&ut(r.formMethod)){let{formMethod:a,formEncType:l}=r;s.method=a.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=Pa(r.formData):s.body=r.formData}return new Request(i,s)}function Pa(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Zc(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function mg(n,e,t,r=!1,i=!1){let s={},a=null,l,c=!1,u={},p=t&&pt(t[1])?t[1].error:void 0;return n.forEach(f=>{if(!(f.route.id in e))return;let g=f.route.id,v=e[g];if(le(!sr(v),"Cannot handle redirect results in processLoaderData"),pt(v)){let k=v.error;if(p!==void 0&&(k=p,p=void 0),a=a||{},i)a[g]=k;else{let O=Rn(n,g);a[O.route.id]==null&&(a[O.route.id]=k)}r||(s[g]=dd),c||(c=!0,l=Hi(v.error)?v.error.status:500),v.headers&&(u[g]=v.headers)}else s[g]=v.data,v.statusCode&&v.statusCode!==200&&!c&&(l=v.statusCode),v.headers&&(u[g]=v.headers)}),p!==void 0&&t&&(a={[t[0]]:p},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:l||200,loaderHeaders:u}}function eu(n,e,t,r,i,s){let{loaderData:a,errors:l}=mg(e,t,r);return i.filter(c=>!c.matches||c.matches.some(u=>u.shouldLoad)).forEach(c=>{let{key:u,match:p,controller:f}=c;if(f&&f.signal.aborted)return;let g=s[u];if(le(g,"Did not find corresponding fetcher result"),pt(g)){let v=Rn(n.matches,p?.route.id);l&&l[v.route.id]||(l={...l,[v.route.id]:g.error}),n.fetchers.delete(u)}else if(sr(g))le(!1,"Unhandled fetcher revalidation redirect");else{let v=Tn(g.data);n.fetchers.set(u,v)}}),{loaderData:a,errors:l}}function tu(n,e,t,r){let i=Object.entries(e).filter(([,s])=>s!==dd).reduce((s,[a,l])=>(s[a]=l,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&n.hasOwnProperty(a)&&s.route.loader&&(i[a]=n[a]),r&&r.hasOwnProperty(a))break}return i}function nu(n){return n?pt(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Rn(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Ss(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Et(n,{pathname:e,routeId:t,method:r,type:i,message:s}={}){let a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&e&&t?l=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l=`Route "${t}" does not match URL "${e}"`):n===404?(a="Not Found",l=`No route matches URL "${e}"`):n===405&&(a="Method Not Allowed",r&&e&&t?l=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(l=`Invalid request method "${r.toUpperCase()}"`)),new to(n||500,a,new Error(l),!0)}function Ps(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(sr(i))return{key:r,result:i}}}function yd(n){let e=typeof n=="string"?qn(n):n;return Fn({...e,hash:""})}function gg(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function _g(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&yg(t))}function yg(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function vg(n){return vd(n.result)&&Xm.has(n.result.status)}function pt(n){return n.type==="error"}function sr(n){return(n&&n.type)==="redirect"}function ru(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function vd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function Eg(n){return Jm.has(n.toUpperCase())}function ut(n){return Qm.has(n.toUpperCase())}function cl(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Us(n,e){let t=typeof e=="string"?qn(e).search:e.search;if(n[n.length-1].route.index&&cl(t||""))return n[n.length-1];let r=cd(n);return r[r.length-1]}function iu(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:a}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function ia(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wg(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ri(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Tg(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Tn(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Ig(n,e){try{let t=n.sessionStorage.getItem(hd);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Rg(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(hd,JSON.stringify(t))}catch(r){De(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Ag(){let n,e,t=new Promise((r,i)=>{n=async s=>{r(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var pr=It(null);pr.displayName="DataRouter";var ts=It(null);ts.displayName="DataRouterState";It(!1);var ul=It({isTransitioning:!1});ul.displayName="ViewTransition";var Ed=It(new Map);Ed.displayName="Fetchers";var bg=It(null);bg.displayName="Await";var Nt=It(null);Nt.displayName="Navigation";var To=It(null);To.displayName="Location";var Lt=It({outlet:null,matches:[],isDataRoute:!1});Lt.displayName="Route";var hl=It(null);hl.displayName="RouteError";function Sg(n,{relative:e}={}){le(Yr(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=_e(Nt),{hash:i,pathname:s,search:a}=ns(n,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Gt([t,s])),r.createHref({pathname:l,search:a,hash:i})}function Yr(){return _e(To)!=null}function Wn(){return le(Yr(),"useLocation() may be used only in the context of a <Router> component."),_e(To).location}var wd="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Td(n){_e(Nt).static||Zh(n)}function Io(){let{isDataRoute:n}=_e(Lt);return n?jg():Pg()}function Pg(){le(Yr(),"useNavigate() may be used only in the context of a <Router> component.");let n=_e(pr),{basename:e,navigator:t}=_e(Nt),{matches:r}=_e(Lt),{pathname:i}=Wn(),s=JSON.stringify(Eo(r)),a=Ur(!1);return Td(()=>{a.current=!0}),$r((c,u={})=>{if(De(a.current,wd),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=wo(c,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Gt([e,p.pathname])),(u.replace?t.replace:t.push)(p,u.state,u)},[e,t,s,i,n])}var Cg=It(null);function kg(n){let e=_e(Lt).outlet;return e&&re(Cg.Provider,{value:n},e)}function ns(n,{relative:e}={}){let{matches:t}=_e(Lt),{pathname:r}=Wn(),i=JSON.stringify(Eo(t));return wt(()=>wo(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Dg(n,e,t,r,i){le(Yr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=_e(Nt),{matches:a}=_e(Lt),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",p=l?l.pathnameBase:"/",f=l&&l.route;{let V=f&&f.path||"";Id(u,!f||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let g=Wn(),v;v=g;let k=v.pathname||"/",O=k;if(p!=="/"){let V=p.replace(/^\//,"").split("/");O="/"+k.replace(/^\//,"").split("/").slice(V.length).join("/")}let P=In(n,{pathname:O});return De(f||P!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),De(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Mg(P&&P.map(V=>Object.assign({},V,{params:Object.assign({},c,V.params),pathname:Gt([p,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?p:Gt([p,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),a,t,r,i)}function Ng(){let n=Bg(),e=Hi(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=re(kt,null,re("p",null," Hey developer "),re("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",re("code",{style:s},"ErrorBoundary")," or"," ",re("code",{style:s},"errorElement")," prop on your route.")),re(kt,null,re("h2",null,"Unexpected Application Error!"),re("h3",{style:{fontStyle:"italic"}},e),t?re("pre",{style:i},t):null,a)}var Lg=re(Ng,null),Og=class extends Wt{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?re(Lt.Provider,{value:this.props.routeContext},re(hl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vg({routeContext:n,match:e,children:t}){let r=_e(pr);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),re(Lt.Provider,{value:n},t)}function Mg(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let u=s.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);le(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(t)for(let u=0;u<s.length;u++){let p=s[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=u),p.route.id){let{loaderData:f,errors:g}=t,v=p.route.loader&&!f.hasOwnProperty(p.route.id)&&(!g||g[p.route.id]===void 0);if(p.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,p,f)=>{let g,v=!1,k=null,O=null;t&&(g=a&&p.route.id?a[p.route.id]:void 0,k=p.route.errorElement||Lg,l&&(c<0&&f===0?(Id("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,O=null):c===f&&(v=!0,O=p.route.hydrateFallbackElement||null)));let P=e.concat(s.slice(0,f+1)),L=()=>{let V;return g?V=k:v?V=O:p.route.Component?V=re(p.route.Component,null):p.route.element?V=p.route.element:V=u,re(Vg,{match:p,routeContext:{outlet:u,matches:P,isDataRoute:t!=null},children:V})};return t&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?re(Og,{location:t.location,revalidation:t.revalidation,component:k,error:g,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0},unstable_onError:r}):L()},null)}function dl(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xg(n){let e=_e(pr);return le(e,dl(n)),e}function Fg(n){let e=_e(ts);return le(e,dl(n)),e}function Ug(n){let e=_e(Lt);return le(e,dl(n)),e}function fl(n){let e=Ug(n),t=e.matches[e.matches.length-1];return le(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $g(){return fl("useRouteId")}function Bg(){let n=_e(hl),e=Fg("useRouteError"),t=fl("useRouteError");return n!==void 0?n:e.errors?.[t]}function jg(){let{router:n}=xg("useNavigate"),e=fl("useNavigate"),t=Ur(!1);return Td(()=>{t.current=!0}),$r(async(i,s={})=>{De(t.current,wd),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var su={};function Id(n,e,t){!e&&!su[n]&&(su[n]=!0,De(!1,t))}var ou={};function au(n,e){!n&&!ou[e]&&(ou[e]=!0,console.warn(e))}function Hg(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&De(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:re(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&De(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:re(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&De(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:re(n.ErrorBoundary),ErrorBoundary:void 0})),e}var zg=["HydrateFallback","hydrateFallbackElement"],qg=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Wg({router:n,flushSync:e,unstable_onError:t}){let[r,i]=Me(n.state),[s,a]=Me(),[l,c]=Me({isTransitioning:!1}),[u,p]=Me(),[f,g]=Me(),[v,k]=Me(),O=Ur(new Map),P=$r(q=>{i(C=>(q.errors&&t&&Object.entries(q.errors).forEach(([T,_])=>{C.errors?.[T]!==_&&t(_)}),q))},[t]),L=$r((q,{deletedFetchers:C,flushSync:T,viewTransitionOpts:_})=>{q.fetchers.forEach((R,I)=>{R.data!==void 0&&O.current.set(I,R.data)}),C.forEach(R=>O.current.delete(R)),au(T===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let y=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(au(_==null||y,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!_||!y){e&&T?e(()=>P(q)):Lc(()=>P(q));return}if(e&&T){e(()=>{f&&(u&&u.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:_.currentLocation,nextLocation:_.nextLocation})});let R=n.window.document.startViewTransition(()=>{e(()=>P(q))});R.finished.finally(()=>{e(()=>{p(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),e(()=>g(R));return}f?(u&&u.resolve(),f.skipTransition(),k({state:q,currentLocation:_.currentLocation,nextLocation:_.nextLocation})):(a(q),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}))},[n.window,e,f,u,P]);Zh(()=>n.subscribe(L),[n,L]),mt(()=>{l.isTransitioning&&!l.flushSync&&p(new qg)},[l]),mt(()=>{if(u&&s&&n.window){let q=s,C=u.promise,T=n.window.document.startViewTransition(async()=>{Lc(()=>P(q)),await C});T.finished.finally(()=>{p(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(T)}},[s,u,n.window,P]),mt(()=>{u&&s&&r.location.key===s.location.key&&u.resolve()},[u,f,r.location,s]),mt(()=>{!l.isTransitioning&&v&&(a(v.state),c({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),k(void 0))},[l.isTransitioning,v]);let V=wt(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:q=>n.navigate(q),push:(q,C,T)=>n.navigate(q,{state:C,preventScrollReset:T?.preventScrollReset}),replace:(q,C,T)=>n.navigate(q,{replace:!0,state:C,preventScrollReset:T?.preventScrollReset})}),[n]),B=n.basename||"/",te=wt(()=>({router:n,navigator:V,static:!1,basename:B,unstable_onError:t}),[n,V,B,t]);return re(kt,null,re(pr.Provider,{value:te},re(ts.Provider,{value:r},re(Ed.Provider,{value:O.current},re(ul.Provider,{value:l},re(Yg,{basename:B,location:r.location,navigationType:r.historyAction,navigator:V},re(Gg,{routes:n.routes,future:n.future,state:r,unstable_onError:t})))))),null)}var Gg=om(Kg);function Kg({routes:n,future:e,state:t,unstable_onError:r}){return Dg(n,void 0,t,r,e)}function Qg({to:n,replace:e,state:t,relative:r}){le(Yr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_e(Nt);De(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=_e(Lt),{pathname:a}=Wn(),l=Io(),c=wo(n,Eo(s),a,r==="path"),u=JSON.stringify(c);return mt(()=>{l(JSON.parse(u),{replace:e,state:t,relative:r})},[l,u,r,e,t]),null}function Rd(n){return kg(n.context)}function Yg({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){le(!Yr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=wt(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=qn(t));let{pathname:c="/",search:u="",hash:p="",state:f=null,key:g="default"}=t,v=wt(()=>{let k=Tt(c,a);return k==null?null:{location:{pathname:k,search:u,hash:p,state:f,key:g},navigationType:r}},[a,c,u,p,f,g,r]);return De(v!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:re(Nt.Provider,{value:l},re(To.Provider,{children:e,value:v}))}var $s="get",Bs="application/x-www-form-urlencoded";function Ro(n){return n!=null&&typeof n.tagName=="string"}function Jg(n){return Ro(n)&&n.tagName.toLowerCase()==="button"}function Xg(n){return Ro(n)&&n.tagName.toLowerCase()==="form"}function Zg(n){return Ro(n)&&n.tagName.toLowerCase()==="input"}function e_(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function t_(n,e){return n.button===0&&(!e||e==="_self")&&!e_(n)}var Cs=null;function n_(){if(Cs===null)try{new FormData(document.createElement("form"),0),Cs=!1}catch{Cs=!0}return Cs}var r_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sa(n){return n!=null&&!r_.has(n)?(De(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bs}"`),null):n}function i_(n,e){let t,r,i,s,a;if(Xg(n)){let l=n.getAttribute("action");r=l?Tt(l,e):null,t=n.getAttribute("method")||$s,i=sa(n.getAttribute("enctype"))||Bs,s=new FormData(n)}else if(Jg(n)||Zg(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(r=c?Tt(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||$s,i=sa(n.getAttribute("formenctype"))||sa(l.getAttribute("enctype"))||Bs,s=new FormData(l,n),!n_()){let{name:u,type:p,value:f}=n;if(p==="image"){let g=u?`${u}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else u&&s.append(u,f)}}else{if(Ro(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$s,r=null,i=Bs,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pl(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function s_(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Tt(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function o_(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a_(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function l_(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await o_(s,t);return a.links?a.links():[]}return[]}));return d_(r.flat(1).filter(a_).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function lu(n,e,t,r,i,s){let a=(c,u)=>t[u]?c.route.id!==t[u].route.id:!0,l=(c,u)=>t[u].pathname!==c.pathname||t[u].route.path?.endsWith("*")&&t[u].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function c_(n,e,{includeHydrateFallback:t}={}){return u_(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function u_(n){return[...new Set(n)]}function h_(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function d_(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(h_(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function Ad(){let n=_e(pr);return pl(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function f_(){let n=_e(ts);return pl(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ml=It(void 0);ml.displayName="FrameworkContext";function bd(){let n=_e(ml);return pl(n,"You must render this element inside a <HydratedRouter> element"),n}function p_(n,e){let t=_e(ml),[r,i]=Me(!1),[s,a]=Me(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:p,onTouchStart:f}=e,g=Ur(null);mt(()=>{if(n==="render"&&a(!0),n==="viewport"){let O=L=>{L.forEach(V=>{a(V.isIntersecting)})},P=new IntersectionObserver(O,{threshold:.5});return g.current&&P.observe(g.current),()=>{P.disconnect()}}},[n]),mt(()=>{if(r){let O=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(O)}}},[r]);let v=()=>{i(!0)},k=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,g,{}]:[s,g,{onFocus:Ai(l,v),onBlur:Ai(c,k),onMouseEnter:Ai(u,v),onMouseLeave:Ai(p,k),onTouchStart:Ai(f,v)}]:[!1,g,{}]}function Ai(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function m_({page:n,...e}){let{router:t}=Ad(),r=wt(()=>In(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?re(__,{page:n,matches:r,...e}):null}function g_(n){let{manifest:e,routeModules:t}=bd(),[r,i]=Me([]);return mt(()=>{let s=!1;return l_(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function __({page:n,matches:e,...t}){let r=Wn(),{manifest:i,routeModules:s}=bd(),{basename:a}=Ad(),{loaderData:l,matches:c}=f_(),u=wt(()=>lu(n,e,c,i,r,"data"),[n,e,c,i,r]),p=wt(()=>lu(n,e,c,i,r,"assets"),[n,e,c,i,r]),f=wt(()=>{if(n===r.pathname+r.search+r.hash)return[];let k=new Set,O=!1;if(e.forEach(L=>{let V=i.routes[L.route.id];!V||!V.hasLoader||(!u.some(B=>B.route.id===L.route.id)&&L.route.id in l&&s[L.route.id]?.shouldRevalidate||V.hasClientLoader?O=!0:k.add(L.route.id))}),k.size===0)return[];let P=s_(n,a,"data");return O&&k.size>0&&P.searchParams.set("_routes",e.filter(L=>k.has(L.route.id)).map(L=>L.route.id).join(",")),[P.pathname+P.search]},[a,l,r,i,u,e,n,s]),g=wt(()=>c_(p,i),[p,i]),v=g_(p);return re(kt,null,f.map(k=>re("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),g.map(k=>re("link",{key:k,rel:"modulepreload",href:k,...t})),v.map(({key:k,link:O})=>re("link",{key:k,nonce:t.nonce,...O})))}function y_(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Sd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sd&&(window.__reactRouterVersion="7.8.2")}catch{}function v_(n,e){return rg({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:Tm({window:e?.window}),hydrationData:E_(),routes:n,mapRouteProperties:Hg,hydrationRouteProperties:zg,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function E_(){let n=window?.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:w_(n.errors)}),n}function w_(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new to(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}var Pd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cd=al(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:p,viewTransition:f,...g},v){let{basename:k}=_e(Nt),O=typeof u=="string"&&Pd.test(u),P,L=!1;if(typeof u=="string"&&O&&(P=u,Sd))try{let y=new URL(window.location.href),R=u.startsWith("//")?new URL(y.protocol+u):new URL(u),I=Tt(R.pathname,k);R.origin===y.origin&&I!=null?u=I+R.search+R.hash:L=!0}catch{De(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=Sg(u,{relative:i}),[B,te,q]=p_(r,g),C=A_(u,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:f});function T(y){e&&e(y),y.defaultPrevented||C(y)}let _=re("a",{...g,...q,href:P||V,onClick:L||s?e:T,ref:y_(v,te),target:c,"data-discover":!O&&t==="render"?"true":void 0});return B&&!O?re(kt,null,_,re(m_,{page:V})):_});Cd.displayName="Link";var T_=al(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:c,...u},p){let f=ns(a,{relative:u.relative}),g=Wn(),v=_e(ts),{navigator:k,basename:O}=_e(Nt),P=v!=null&&k_(f)&&l===!0,L=k.encodeLocation?k.encodeLocation(f).pathname:f.pathname,V=g.pathname,B=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(V=V.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&O&&(B=Tt(B,O)||B);const te=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let q=V===L||!i&&V.startsWith(L)&&V.charAt(te)==="/",C=B!=null&&(B===L||!i&&B.startsWith(L)&&B.charAt(L.length)==="/"),T={isActive:q,isPending:C,isTransitioning:P},_=q?e:void 0,y;typeof r=="function"?y=r(T):y=[r,q?"active":null,C?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(T):s;return re(Cd,{...u,"aria-current":_,className:y,ref:p,style:R,to:a,viewTransition:l},typeof c=="function"?c(T):c)});T_.displayName="NavLink";var I_=al(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=$s,action:l,onSubmit:c,relative:u,preventScrollReset:p,viewTransition:f,...g},v)=>{let k=P_(),O=C_(l,{relative:u}),P=a.toLowerCase()==="get"?"get":"post",L=typeof l=="string"&&Pd.test(l);return re("form",{ref:v,method:P,action:O,onSubmit:r?c:B=>{if(c&&c(B),B.defaultPrevented)return;B.preventDefault();let te=B.nativeEvent.submitter,q=te?.getAttribute("formmethod")||a;k(te||B.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:i,state:s,relative:u,preventScrollReset:p,viewTransition:f})},...g,"data-discover":!L&&n==="render"?"true":void 0})});I_.displayName="Form";function R_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kd(n){let e=_e(pr);return le(e,R_(n)),e}function A_(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let l=Io(),c=Wn(),u=ns(n,{relative:s});return $r(p=>{if(t_(p,e)){p.preventDefault();let f=t!==void 0?t:Fn(c)===Fn(u);l(n,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,l,u,t,r,e,n,i,s,a])}var b_=0,S_=()=>`__${String(++b_)}__`;function P_(){let{router:n}=kd("useSubmit"),{basename:e}=_e(Nt),t=$g();return $r(async(r,i={})=>{let{action:s,method:a,encType:l,formData:c,body:u}=i_(r,e);if(i.navigate===!1){let p=i.fetcherKey||S_();await n.fetch(p,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function C_(n,{relative:e}={}){let{basename:t}=_e(Nt),r=_e(Lt);le(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ns(n||".",{relative:e})},a=Wn();if(n==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let p=l.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Gt([t,s.pathname])),Fn(s)}function k_(n,{relative:e}={}){let t=_e(ul);le(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kd("useViewTransitionState"),i=ns(n,{relative:e});if(!t.isTransitioning)return!1;let s=Tt(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Tt(t.nextLocation.pathname,r)||t.nextLocation.pathname;return eo(i.pathname,a)!=null||eo(i.pathname,s)!=null}function D_(n){return re(Wg,{flushSync:vm,...n})}const Dd="/assets/ONGC-Logo-Cp829YDe.png",Nd="/assets/assamAirProductsLogo-CETox1ms.png",N_=()=>(console.log(location),j("div",{className:"navbar fixed",children:[j("img",{src:Dd,alt:"ongcLogo",className:""}),j("img",{src:Nd,alt:"assamAirLogo",className:""})]})),L_=()=>{};var cu={};const Ld=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},O_=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],l=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Od={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,l=a?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,p=s>>2,f=(s&3)<<4|l>>4;let g=(l&15)<<2|u>>6,v=u&63;c||(v=64,a||(g=64)),r.push(t[p],t[f],t[g],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ld(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):O_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||u==null||f==null)throw new V_;const g=s<<2|l>>4;if(r.push(g),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const k=u<<6&192|f;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class V_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M_=function(n){const e=Ld(n);return Od.encodeByteArray(e,!0)},ro=function(n){return M_(n).replace(/\./g,"")},Vd=function(n){try{return Od.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const F_=()=>x_().__FIREBASE_DEFAULTS__,U_=()=>{if(typeof process>"u"||typeof cu>"u")return;const n=cu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vd(n[1]);return e&&JSON.parse(e)},Ao=()=>{try{return L_()||F_()||U_()||$_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Md=n=>Ao()?.emulatorHosts?.[n],B_=n=>{const e=Md(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xd=()=>Ao()?.config,Fd=n=>Ao()?.[`_${n}`];class j_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Jr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ud(n){return(await fetch(n,{credentials:"include"})).ok}function H_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ro(JSON.stringify(t)),ro(JSON.stringify(a)),""].join(".")}const Li={};function z_(){const n={prod:[],emulator:[]};for(const e of Object.keys(Li))Li[e]?n.emulator.push(e):n.prod.push(e);return n}function q_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let uu=!1;function $d(n,e){if(typeof window>"u"||typeof document>"u"||!Jr(window.location.host)||Li[n]===e||Li[n]||uu)return;Li[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=z_().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{uu=!0,a()},g}function p(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=q_(r),v=t("text"),k=document.getElementById(v)||document.createElement("span"),O=t("learnmore"),P=document.getElementById(O)||document.createElement("a"),L=t("preprendIcon"),V=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const B=g.element;l(B),p(P,O);const te=u();c(V,L),B.append(V,k,P,te),document.body.appendChild(B)}s?(k.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function G_(){const n=Ao()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Y_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J_(){const n=it();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function X_(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z_(){try{return typeof indexedDB=="object"}catch{return!1}}function ey(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const ty="FirebaseError";class hn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ty,Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rs.prototype.create)}}class rs{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?ny(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new hn(i,l,r)}}function ny(n,e){return n.replace(ry,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ry=/\{\$([^}]+)}/g;function iy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ur(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(hu(s)&&hu(a)){if(!ur(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function hu(n){return n!==null&&typeof n=="object"}function is(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Si(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Pi(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sy(n,e){const t=new oy(n,e);return t.subscribe.bind(t)}class oy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ay(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=oa),i.error===void 0&&(i.error=oa),i.complete===void 0&&(i.complete=oa);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ay(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function oa(){}function Rt(n){return n&&n._delegate?n._delegate:n}class hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rr="[DEFAULT]";class ly{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new j_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uy(e))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rr){return this.instances.has(e)}getOptions(e=rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cy(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rr){return this.component?this.component.multipleInstances?e:rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cy(n){return n===rr?void 0:n}function uy(n){return n.instantiationMode==="EAGER"}class hy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ly(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ue||(ue={}));const dy={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},fy=ue.INFO,py={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},my=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=py[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gl{constructor(e){this.name=e,this._logLevel=fy,this._logHandler=my,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const gy=(n,e)=>e.some(t=>n instanceof t);let du,fu;function _y(){return du||(du=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yy(){return fu||(fu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bd=new WeakMap,Ca=new WeakMap,jd=new WeakMap,aa=new WeakMap,_l=new WeakMap;function vy(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Dn(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Bd.set(t,n)}).catch(()=>{}),_l.set(e,n),e}function Ey(n){if(Ca.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Ca.set(n,e)}let ka={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ca.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wy(n){ka=n(ka)}function Ty(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(la(this),e,...t);return jd.set(r,e.sort?e.sort():[e]),Dn(r)}:yy().includes(n)?function(...e){return n.apply(la(this),e),Dn(Bd.get(this))}:function(...e){return Dn(n.apply(la(this),e))}}function Iy(n){return typeof n=="function"?Ty(n):(n instanceof IDBTransaction&&Ey(n),gy(n,_y())?new Proxy(n,ka):n)}function Dn(n){if(n instanceof IDBRequest)return vy(n);if(aa.has(n))return aa.get(n);const e=Iy(n);return e!==n&&(aa.set(n,e),_l.set(e,n)),e}const la=n=>_l.get(n);function Ry(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=Dn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Dn(a.result),c.oldVersion,c.newVersion,Dn(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ay=["get","getKey","getAll","getAllKeys","count"],by=["put","add","delete","clear"],ca=new Map;function pu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ca.get(e))return ca.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=by.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ay.includes(t)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),i&&c.done]))[0]};return ca.set(e,s),s}wy(n=>({...n,get:(e,t,r)=>pu(e,t)||n.get(e,t,r),has:(e,t)=>!!pu(e,t)||n.has(e,t)}));class Sy{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Py(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Py(n){return n.getComponent()?.type==="VERSION"}const Da="@firebase/app",mu="0.14.6";const ln=new gl("@firebase/app"),Cy="@firebase/app-compat",ky="@firebase/analytics-compat",Dy="@firebase/analytics",Ny="@firebase/app-check-compat",Ly="@firebase/app-check",Oy="@firebase/auth",Vy="@firebase/auth-compat",My="@firebase/database",xy="@firebase/data-connect",Fy="@firebase/database-compat",Uy="@firebase/functions",$y="@firebase/functions-compat",By="@firebase/installations",jy="@firebase/installations-compat",Hy="@firebase/messaging",zy="@firebase/messaging-compat",qy="@firebase/performance",Wy="@firebase/performance-compat",Gy="@firebase/remote-config",Ky="@firebase/remote-config-compat",Qy="@firebase/storage",Yy="@firebase/storage-compat",Jy="@firebase/firestore",Xy="@firebase/ai",Zy="@firebase/firestore-compat",ev="firebase",tv="12.6.0";const Na="[DEFAULT]",nv={[Da]:"fire-core",[Cy]:"fire-core-compat",[Dy]:"fire-analytics",[ky]:"fire-analytics-compat",[Ly]:"fire-app-check",[Ny]:"fire-app-check-compat",[Oy]:"fire-auth",[Vy]:"fire-auth-compat",[My]:"fire-rtdb",[xy]:"fire-data-connect",[Fy]:"fire-rtdb-compat",[Uy]:"fire-fn",[$y]:"fire-fn-compat",[By]:"fire-iid",[jy]:"fire-iid-compat",[Hy]:"fire-fcm",[zy]:"fire-fcm-compat",[qy]:"fire-perf",[Wy]:"fire-perf-compat",[Gy]:"fire-rc",[Ky]:"fire-rc-compat",[Qy]:"fire-gcs",[Yy]:"fire-gcs-compat",[Jy]:"fire-fst",[Zy]:"fire-fst-compat",[Xy]:"fire-vertex","fire-js":"fire-js",[ev]:"fire-js-all"};const io=new Map,rv=new Map,La=new Map;function gu(n,e){try{n.container.addComponent(e)}catch(t){ln.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Br(n){const e=n.name;if(La.has(e))return ln.debug(`There were multiple attempts to register component ${e}.`),!1;La.set(e,n);for(const t of io.values())gu(t,n);for(const t of rv.values())gu(t,n);return!0}function yl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pt(n){return n==null?!1:n.settings!==void 0}const iv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nn=new rs("app","Firebase",iv);class sv{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const Xr=tv;function Hd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Na,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Nn.create("bad-app-name",{appName:String(i)});if(t||(t=xd()),!t)throw Nn.create("no-options");const s=io.get(i);if(s){if(ur(t,s.options)&&ur(r,s.config))return s;throw Nn.create("duplicate-app",{appName:i})}const a=new hy(i);for(const c of La.values())a.addComponent(c);const l=new sv(t,r,a);return io.set(i,l),l}function zd(n=Na){const e=io.get(n);if(!e&&n===Na&&xd())return Hd();if(!e)throw Nn.create("no-app",{appName:n});return e}function Ln(n,e,t){let r=nv[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ln.warn(a.join(" "));return}Br(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const ov="firebase-heartbeat-database",av=1,zi="firebase-heartbeat-store";let ua=null;function qd(){return ua||(ua=Ry(ov,av,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zi)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nn.create("idb-open",{originalErrorMessage:n.message})})),ua}async function lv(n){try{const t=(await qd()).transaction(zi),r=await t.objectStore(zi).get(Wd(n));return await t.done,r}catch(e){if(e instanceof hn)ln.warn(e.message);else{const t=Nn.create("idb-get",{originalErrorMessage:e?.message});ln.warn(t.message)}}}async function _u(n,e){try{const r=(await qd()).transaction(zi,"readwrite");await r.objectStore(zi).put(e,Wd(n)),await r.done}catch(t){if(t instanceof hn)ln.warn(t.message);else{const r=Nn.create("idb-set",{originalErrorMessage:t?.message});ln.warn(r.message)}}}function Wd(n){return`${n.name}!${n.options.appId}`}const cv=1024,uv=30;class hv{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uv){const i=pv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ln.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yu(),{heartbeatsToSend:t,unsentEntries:r}=dv(this._heartbeatsCache.heartbeats),i=ro(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ln.warn(e),""}}}function yu(){return new Date().toISOString().substring(0,10)}function dv(n,e=cv){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),vu(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),vu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z_()?ey().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lv(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _u(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _u(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vu(n){return ro(JSON.stringify({version:2,heartbeats:n})).length}function pv(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function mv(n){Br(new hr("platform-logger",e=>new Sy(e),"PRIVATE")),Br(new hr("heartbeat",e=>new hv(e),"PRIVATE")),Ln(Da,mu,n),Ln(Da,mu,"esm2020"),Ln("fire-js","")}mv("");function Gd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gv=Gd,Kd=new rs("auth","Firebase",Gd());const so=new gl("@firebase/auth");function _v(n,...e){so.logLevel<=ue.WARN&&so.warn(`Auth (${Xr}): ${n}`,...e)}function js(n,...e){so.logLevel<=ue.ERROR&&so.error(`Auth (${Xr}): ${n}`,...e)}function Dt(n,...e){throw vl(n,...e)}function Kt(n,...e){return vl(n,...e)}function Qd(n,e,t){const r={...gv(),[e]:t};return new rs("auth","Firebase",r).create(e,{appName:n.name})}function On(n){return Qd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vl(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Kd.create(n,...e)}function ee(n,e,...t){if(!n)throw vl(e,...t)}function on(n){const e="INTERNAL ASSERTION FAILED: "+n;throw js(e),new Error(e)}function cn(n,e){n||on(e)}function Oa(){return typeof self<"u"&&self.location?.href||""}function yv(){return Eu()==="http:"||Eu()==="https:"}function Eu(){return typeof self<"u"&&self.location?.protocol||null}function vv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yv()||Q_()||"connection"in navigator)?navigator.onLine:!0}function Ev(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ss{constructor(e,t){this.shortDelay=e,this.longDelay=t,cn(t>e,"Short delay should be less than long delay!"),this.isMobile=W_()||Y_()}get(){return vv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function El(n,e){cn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Yd{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Tv=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Iv=new ss(3e4,6e4);function mr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Gn(n,e,t,r,i={}){return Jd(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=is({key:n.config.apiKey,...a}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:c,...s};return K_()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Jr(n.emulatorConfig.host)&&(u.credentials="include"),Yd.fetch()(await Xd(n,n.config.apiHost,t,l),u)})}async function Jd(n,e,t){n._canInitEmulator=!1;const r={...wv,...e};try{const i=new Av(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ks(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ks(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ks(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw ks(n,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qd(n,p,u);Dt(n,p)}}catch(i){if(i instanceof hn)throw i;Dt(n,"network-request-failed",{message:String(i)})}}async function bo(n,e,t,r,i={}){const s=await Gn(n,e,t,r,i);return"mfaPendingCredential"in s&&Dt(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Xd(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?El(n.config,i):`${n.config.apiScheme}://${i}`;return Tv.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Rv(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Av{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kt(this.auth,"network-request-failed")),Iv.get())})}}function ks(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Kt(n,e,r);return i.customData._tokenResponse=t,i}function wu(n){return n!==void 0&&n.enterprise!==void 0}class bv{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rv(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Sv(n,e){return Gn(n,"GET","/v2/recaptchaConfig",mr(n,e))}async function Pv(n,e){return Gn(n,"POST","/v1/accounts:delete",e)}async function oo(n,e){return Gn(n,"POST","/v1/accounts:lookup",e)}function Oi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cv(n,e=!1){const t=Rt(n),r=await t.getIdToken(e),i=wl(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Oi(ha(i.auth_time)),issuedAtTime:Oi(ha(i.iat)),expirationTime:Oi(ha(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function ha(n){return Number(n)*1e3}function wl(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return js("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vd(t);return i?JSON.parse(i):(js("Failed to decode base64 JWT payload"),null)}catch(i){return js("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Tu(n){const e=wl(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hn&&kv(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kv({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Dv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Va{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oi(this.lastLoginAt),this.creationTime=Oi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ao(n){const e=n.auth,t=await n.getIdToken(),r=await qi(n,oo(e,{idToken:t}));ee(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?Zd(i.providerUserInfo):[],a=Lv(n.providerData,s),l=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!a?.length,u=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Va(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,p)}async function Nv(n){const e=Rt(n);await ao(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lv(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Zd(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Ov(n,e){const t=await Jd(n,{},async()=>{const r=is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await Xd(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return n.emulatorConfig&&Jr(n.emulatorConfig.host)&&(c.credentials="include"),Yd.fetch()(a,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Vv(n,e){return Gn(n,"POST","/v2/accounts:revokeToken",mr(n,e))}class Dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const t=Tu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Ov(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Dr;return r&&(ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dr,this.toJSON())}_performRefresh(){return on("not implemented")}}function wn(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ct{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Dv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Va(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await qi(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Cv(this,e)}reload(){return Nv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ct({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ao(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(On(this.auth));const e=await this.getIdToken();return await qi(this,Pv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:v,providerData:k,stsTokenManager:O}=t;ee(f&&O,e,"internal-error");const P=Dr.fromJSON(this.name,O);ee(typeof f=="string",e,"internal-error"),wn(r,e.name),wn(i,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof v=="boolean",e,"internal-error"),wn(s,e.name),wn(a,e.name),wn(l,e.name),wn(c,e.name),wn(u,e.name),wn(p,e.name);const L=new Ct({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:P,createdAt:u,lastLoginAt:p});return k&&Array.isArray(k)&&(L.providerData=k.map(V=>({...V}))),c&&(L._redirectEventId=c),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Dr;i.updateFromServerResponse(t);const s=new Ct({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ao(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Zd(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,l=new Dr;l.updateFromIdToken(r);const c=new Ct({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Va(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}}const Iu=new Map;function an(n){cn(n instanceof Function,"Expected a class definition");let e=Iu.get(n);return e?(cn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Iu.set(n,e),e)}class ef{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ef.type="NONE";const Ru=ef;function Hs(n,e,t){return`firebase:${n}:${e}:${t}`}class Nr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hs("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oo(this.auth,{idToken:e}).catch(()=>{});return t?Ct._fromGetAccountInfoResponse(this.auth,t,e):null}return Ct._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Nr(an(Ru),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||an(Ru);const a=Hs(r,e.config.apiKey,e.name);let l=null;for(const u of t)try{const p=await u._get(a);if(p){let f;if(typeof p=="string"){const g=await oo(e,{idToken:p}).catch(()=>{});if(!g)break;f=await Ct._fromGetAccountInfoResponse(e,g,p)}else f=Ct._fromJSON(e,p);u!==s&&(l=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Nr(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Nr(s,e,r))}}function Au(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sf(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(af(e))return"Blackberry";if(lf(e))return"Webos";if(nf(e))return"Safari";if((e.includes("chrome/")||rf(e))&&!e.includes("edge/"))return"Chrome";if(of(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function tf(n=it()){return/firefox\//i.test(n)}function nf(n=it()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rf(n=it()){return/crios\//i.test(n)}function sf(n=it()){return/iemobile/i.test(n)}function of(n=it()){return/android/i.test(n)}function af(n=it()){return/blackberry/i.test(n)}function lf(n=it()){return/webos/i.test(n)}function Tl(n=it()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Mv(n=it()){return Tl(n)&&!!window.navigator?.standalone}function xv(){return J_()&&document.documentMode===10}function cf(n=it()){return Tl(n)||of(n)||lf(n)||af(n)||/windows phone/i.test(n)||sf(n)}function uf(n,e=[]){let t;switch(n){case"Browser":t=Au(it());break;case"Worker":t=`${Au(it())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xr}/${r}`}class Fv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Uv(n,e={}){return Gn(n,"GET","/v2/passwordPolicy",mr(n,e))}const $v=6;class Bv{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$v,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class jv{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bu(this),this.idTokenSubscription=new bu(this),this.beforeStateQueue=new Fv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=an(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oo(this,{idToken:e}),r=await Ct._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ao(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ev()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(On(this));const t=e?Rt(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(On(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(On(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(an(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Uv(this),t=new Bv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Vv(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&an(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=await Nr.create(this,[an(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_v(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zr(n){return Rt(n)}class bu{constructor(e){this.auth=e,this.observer=null,this.addObserver=sy(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let So={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hv(n){So=n}function hf(n){return So.loadJS(n)}function zv(){return So.recaptchaEnterpriseScript}function qv(){return So.gapiScript}function Wv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Gv{constructor(){this.enterprise=new Kv}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Kv{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Qv="recaptcha-enterprise",df="NO_RECAPTCHA";class Yv{constructor(e){this.type=Qv,this.auth=Zr(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{Sv(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new bv(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function i(s,a,l){const c=window.grecaptcha;wu(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(df)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gv().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(l=>{if(!t&&wu(window.grecaptcha))i(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=zv();c.length!==0&&(c+=l),hf(c).then(()=>{i(l,s,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function Su(n,e,t,r=!1,i=!1){const s=new Yv(n);let a;if(i)a=df;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Pu(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Su(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Su(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function Jv(n,e){const t=yl(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ur(s,e??{}))return i;Dt(i,"already-initialized")}return t.initialize({options:e})}function Xv(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(an);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zv(n,e,t){const r=Zr(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ff(e),{host:a,port:l}=eE(e),c=l===null?"":`:${l}`,u={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ur(u,r.config.emulator)&&ur(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Jr(a)?(Ud(`${s}//${a}${c}`),$d("Auth",!0)):tE()}function ff(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eE(n){const e=ff(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Cu(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Cu(a)}}}function Cu(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tE(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Il{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,t){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}async function nE(n,e){return Gn(n,"POST","/v1/accounts:signUp",e)}async function rE(n,e){return bo(n,"POST","/v1/accounts:signInWithPassword",mr(n,e))}async function iE(n,e){return bo(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}async function sE(n,e){return bo(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}class Wi extends Il{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Wi(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Wi(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,t,"signInWithPassword",rE);case"emailLink":return iE(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,r,"signUpPassword",nE);case"emailLink":return sE(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Lr(n,e){return bo(n,"POST","/v1/accounts:signInWithIdp",mr(n,e))}const oE="http://localhost";class dr extends Il{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new dr(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Lr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Lr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lr(e,t)}buildRequest(){const e={requestUri:oE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=is(t)}return e}}function aE(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lE(n){const e=Si(Pi(n)).link,t=e?Si(Pi(e)).deep_link_id:null,r=Si(Pi(n)).deep_link_id;return(r?Si(Pi(r)).link:null)||r||t||e||n}class Rl{constructor(e){const t=Si(Pi(e)),r=t.apiKey??null,i=t.oobCode??null,s=aE(t.mode??null);ee(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lE(e);try{return new Rl(t)}catch{return null}}}class ei{constructor(){this.providerId=ei.PROVIDER_ID}static credential(e,t){return Wi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Rl.parseLink(t);return ee(r,"argument-error"),Wi._fromEmailAndCode(e,r.code,r.tenantId)}}ei.PROVIDER_ID="password";ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class os extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class An extends os{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return An.credential(e.oauthAccessToken)}catch{return null}}}An.FACEBOOK_SIGN_IN_METHOD="facebook.com";An.PROVIDER_ID="facebook.com";class bn extends os{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dr._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return bn.credential(t,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";class Sn extends os{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sn.credential(e.oauthAccessToken)}catch{return null}}}Sn.GITHUB_SIGN_IN_METHOD="github.com";Sn.PROVIDER_ID="github.com";class Pn extends os{constructor(){super("twitter.com")}static credential(e,t){return dr._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Pn.credential(t,r)}catch{return null}}}Pn.TWITTER_SIGN_IN_METHOD="twitter.com";Pn.PROVIDER_ID="twitter.com";class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ct._fromIdTokenResponse(e,r,i),a=ku(r);return new jr({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ku(r);return new jr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ku(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class lo extends hn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lo.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lo(e,t,r,i)}}function mf(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lo._fromErrorAndOperation(n,s,e,r):s})}async function cE(n,e,t=!1){const r=await qi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jr._forOperation(n,"link",r)}async function uE(n,e,t=!1){const{auth:r}=n;if(Pt(r.app))return Promise.reject(On(r));const i="reauthenticate";try{const s=await qi(n,mf(r,i,e,n),t);ee(s.idToken,r,"internal-error");const a=wl(s.idToken);ee(a,r,"internal-error");const{sub:l}=a;return ee(n.uid===l,r,"user-mismatch"),jr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dt(r,"user-mismatch"),s}}async function gf(n,e,t=!1){if(Pt(n.app))return Promise.reject(On(n));const r="signIn",i=await mf(n,r,e),s=await jr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function hE(n,e){return gf(Zr(n),e)}async function dE(n){const e=Zr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function fE(n,e,t){return Pt(n.app)?Promise.reject(On(n)):hE(Rt(n),ei.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dE(n),r})}function pE(n,e){return Rt(n).setPersistence(e)}function mE(n,e,t,r){return Rt(n).onIdTokenChanged(e,t,r)}function gE(n,e,t){return Rt(n).beforeAuthStateChanged(e,t)}function _f(n,e,t,r){return Rt(n).onAuthStateChanged(e,t,r)}function _E(n){return Rt(n).signOut()}const co="__sak";class yf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(co,"1"),this.storage.removeItem(co),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yE=1e3,vE=10;class vf extends yf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);xv()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vE):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},yE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vf.type="LOCAL";const Ef=vf;class wf extends yf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wf.type="SESSION";const Tf=wf;function EE(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Po{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Po(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async u=>u(t.origin,s)),c=await EE(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Po.receivers=[];function Al(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class wE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=Al("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Qt(){return window}function TE(n){Qt().location.href=n}function If(){return typeof Qt().WorkerGlobalScope<"u"&&typeof Qt().importScripts=="function"}async function IE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RE(){return navigator?.serviceWorker?.controller||null}function AE(){return If()?self:null}const Rf="firebaseLocalStorageDb",bE=1,uo="firebaseLocalStorage",Af="fbase_key";class as{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Co(n,e){return n.transaction([uo],e?"readwrite":"readonly").objectStore(uo)}function SE(){const n=indexedDB.deleteDatabase(Rf);return new as(n).toPromise()}function Ma(){const n=indexedDB.open(Rf,bE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(uo,{keyPath:Af})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(uo)?e(r):(r.close(),await SE(),e(await Ma()))})})}async function Du(n,e,t){const r=Co(n,!0).put({[Af]:e,value:t});return new as(r).toPromise()}async function PE(n,e){const t=Co(n,!1).get(e),r=await new as(t).toPromise();return r===void 0?null:r.value}function Nu(n,e){const t=Co(n,!0).delete(e);return new as(t).toPromise()}const CE=800,kE=3;class bf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ma(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>kE)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return If()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Po._getInstance(AE()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IE(),!this.activeServiceWorker)return;this.sender=new wE(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ma();return await Du(e,co,"1"),await Nu(e,co),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Du(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>PE(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Co(i,!1).getAll();return new as(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bf.type="LOCAL";const DE=bf;new ss(3e4,6e4);function NE(n,e){return e?an(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class bl extends Il{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LE(n){return gf(n.auth,new bl(n),n.bypassAuthState)}function OE(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),uE(t,new bl(n),n.bypassAuthState)}async function VE(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),cE(t,new bl(n),n.bypassAuthState)}class Sf{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LE;case"linkViaPopup":case"linkViaRedirect":return VE;case"reauthViaPopup":case"reauthViaRedirect":return OE;default:Dt(this.auth,"internal-error")}}resolve(e){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ME=new ss(2e3,1e4);class Cr extends Sf{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cr.currentPopupAction&&Cr.currentPopupAction.cancel(),Cr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){cn(this.filter.length===1,"Popup operations only handle one event");const e=Al();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ME.get())};e()}}Cr.currentPopupAction=null;const xE="pendingRedirect",zs=new Map;class FE extends Sf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=zs.get(this.auth._key());if(!e){try{const r=await UE(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}zs.set(this.auth._key(),e)}return this.bypassAuthState||zs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UE(n,e){const t=jE(e),r=BE(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $E(n,e){zs.set(n._key(),e)}function BE(n){return an(n._redirectPersistence)}function jE(n){return Hs(xE,n.config.apiKey,n.name)}async function HE(n,e,t=!1){if(Pt(n.app))return Promise.reject(On(n));const r=Zr(n),i=NE(r,e),a=await new FE(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const zE=600*1e3;class qE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Pf(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Kt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lu(e))}saveEventToCache(e){this.cachedEventUids.add(Lu(e)),this.lastProcessedEventTime=Date.now()}}function Lu(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Pf({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function WE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pf(n);default:return!1}}async function GE(n,e={}){return Gn(n,"GET","/v1/projects",e)}const KE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QE=/^https?/;async function YE(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GE(n);for(const t of e)try{if(JE(t))return}catch{}Dt(n,"unauthorized-domain")}function JE(n){const e=Oa(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!QE.test(t))return!1;if(KE.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const XE=new ss(3e4,6e4);function Ou(){const n=Qt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZE(n){return new Promise((e,t)=>{function r(){Ou(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ou(),t(Kt(n,"network-request-failed"))},timeout:XE.get()})}if(Qt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qt().gapi?.load)r();else{const i=Wv("iframefcb");return Qt()[i]=()=>{gapi.load?r():t(Kt(n,"network-request-failed"))},hf(`${qv()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw qs=null,e})}let qs=null;function ew(n){return qs=qs||ZE(n),qs}const tw=new ss(5e3,15e3),nw="__/auth/iframe",rw="emulator/auth/iframe",iw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ow(n){const e=n.config;ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?El(e,rw):`https://${n.config.authDomain}/${nw}`,r={apiKey:e.apiKey,appName:n.name,v:Xr},i=sw.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${is(r).slice(1)}`}async function aw(n){const e=await ew(n),t=Qt().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:ow(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iw,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Kt(n,"network-request-failed"),l=Qt().setTimeout(()=>{s(a)},tw.get());function c(){Qt().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}const lw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cw=500,uw=600,hw="_blank",dw="http://localhost";class Vu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fw(n,e,t,r=cw,i=uw){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...lw,width:r.toString(),height:i.toString(),top:s,left:a},u=it().toLowerCase();t&&(l=rf(u)?hw:t),tf(u)&&(e=e||dw,c.scrollbars="yes");const p=Object.entries(c).reduce((g,[v,k])=>`${g}${v}=${k},`,"");if(Mv(u)&&l!=="_self")return pw(e||"",l),new Vu(null);const f=window.open(e||"",l,p);ee(f,n,"popup-blocked");try{f.focus()}catch{}return new Vu(f)}function pw(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const mw="__/auth/handler",gw="emulator/auth/handler",_w=encodeURIComponent("fac");async function Mu(n,e,t,r,i,s){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xr,eventId:i};if(e instanceof pf){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",iy(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,f]of Object.entries({}))a[p]=f}if(e instanceof os){const p=e.getScopes().filter(f=>f!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await n._getAppCheckToken(),u=c?`#${_w}=${encodeURIComponent(c)}`:"";return`${yw(n)}?${is(l).slice(1)}${u}`}function yw({config:n}){return n.emulator?El(n,gw):`https://${n.authDomain}/${mw}`}const da="webStorageSupport";class vw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tf,this._completeRedirectFn=HE,this._overrideRedirectResult=$E}async _openPopup(e,t,r,i){cn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await Mu(e,t,r,Oa(),i);return fw(e,s,Al())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Mu(e,t,r,Oa(),i);return TE(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(cn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await aw(e),r=new qE(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(da,{type:da},i=>{const s=i?.[0]?.[da];s!==void 0&&t(!!s),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cf()||nf()||Tl()}}const Ew=vw;var xu="@firebase/auth",Fu="1.11.1";class ww{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Tw(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Iw(n){Br(new hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uf(n)},u=new jv(r,i,s,c);return Xv(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Br(new hr("auth-internal",e=>{const t=Zr(e.getProvider("auth").getImmediate());return(r=>new ww(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(xu,Fu,Tw(n)),Ln(xu,Fu,"esm2020")}const Rw=300,Aw=Fd("authIdTokenMaxAge")||Rw;let Uu=null;const bw=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Aw)return;const i=t?.token;Uu!==i&&(Uu=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Sw(n=zd()){const e=yl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Jv(n,{popupRedirectResolver:Ew,persistence:[DE,Ef,Tf]}),r=Fd("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=bw(s.toString());gE(t,a,()=>a(t.currentUser)),mE(t,l=>a(l))}}const i=Md("auth");return i&&Zv(t,`http://${i}`),t}function Pw(){return document.getElementsByTagName("head")?.[0]??document}Hv({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Kt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Pw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Iw("Browser");var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vn,Cf;(function(){var n;function e(T,_){function y(){}y.prototype=_.prototype,T.F=_.prototype,T.prototype=new y,T.prototype.constructor=T,T.D=function(R,I,A){for(var E=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)E[ae-2]=arguments[ae];return _.prototype[I].apply(R,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,y){y||(y=0);const R=Array(16);if(typeof _=="string")for(var I=0;I<16;++I)R[I]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(I=0;I<16;++I)R[I]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=T.g[0],y=T.g[1],I=T.g[2];let A=T.g[3],E;E=_+(A^y&(I^A))+R[0]+3614090360&4294967295,_=y+(E<<7&4294967295|E>>>25),E=A+(I^_&(y^I))+R[1]+3905402710&4294967295,A=_+(E<<12&4294967295|E>>>20),E=I+(y^A&(_^y))+R[2]+606105819&4294967295,I=A+(E<<17&4294967295|E>>>15),E=y+(_^I&(A^_))+R[3]+3250441966&4294967295,y=I+(E<<22&4294967295|E>>>10),E=_+(A^y&(I^A))+R[4]+4118548399&4294967295,_=y+(E<<7&4294967295|E>>>25),E=A+(I^_&(y^I))+R[5]+1200080426&4294967295,A=_+(E<<12&4294967295|E>>>20),E=I+(y^A&(_^y))+R[6]+2821735955&4294967295,I=A+(E<<17&4294967295|E>>>15),E=y+(_^I&(A^_))+R[7]+4249261313&4294967295,y=I+(E<<22&4294967295|E>>>10),E=_+(A^y&(I^A))+R[8]+1770035416&4294967295,_=y+(E<<7&4294967295|E>>>25),E=A+(I^_&(y^I))+R[9]+2336552879&4294967295,A=_+(E<<12&4294967295|E>>>20),E=I+(y^A&(_^y))+R[10]+4294925233&4294967295,I=A+(E<<17&4294967295|E>>>15),E=y+(_^I&(A^_))+R[11]+2304563134&4294967295,y=I+(E<<22&4294967295|E>>>10),E=_+(A^y&(I^A))+R[12]+1804603682&4294967295,_=y+(E<<7&4294967295|E>>>25),E=A+(I^_&(y^I))+R[13]+4254626195&4294967295,A=_+(E<<12&4294967295|E>>>20),E=I+(y^A&(_^y))+R[14]+2792965006&4294967295,I=A+(E<<17&4294967295|E>>>15),E=y+(_^I&(A^_))+R[15]+1236535329&4294967295,y=I+(E<<22&4294967295|E>>>10),E=_+(I^A&(y^I))+R[1]+4129170786&4294967295,_=y+(E<<5&4294967295|E>>>27),E=A+(y^I&(_^y))+R[6]+3225465664&4294967295,A=_+(E<<9&4294967295|E>>>23),E=I+(_^y&(A^_))+R[11]+643717713&4294967295,I=A+(E<<14&4294967295|E>>>18),E=y+(A^_&(I^A))+R[0]+3921069994&4294967295,y=I+(E<<20&4294967295|E>>>12),E=_+(I^A&(y^I))+R[5]+3593408605&4294967295,_=y+(E<<5&4294967295|E>>>27),E=A+(y^I&(_^y))+R[10]+38016083&4294967295,A=_+(E<<9&4294967295|E>>>23),E=I+(_^y&(A^_))+R[15]+3634488961&4294967295,I=A+(E<<14&4294967295|E>>>18),E=y+(A^_&(I^A))+R[4]+3889429448&4294967295,y=I+(E<<20&4294967295|E>>>12),E=_+(I^A&(y^I))+R[9]+568446438&4294967295,_=y+(E<<5&4294967295|E>>>27),E=A+(y^I&(_^y))+R[14]+3275163606&4294967295,A=_+(E<<9&4294967295|E>>>23),E=I+(_^y&(A^_))+R[3]+4107603335&4294967295,I=A+(E<<14&4294967295|E>>>18),E=y+(A^_&(I^A))+R[8]+1163531501&4294967295,y=I+(E<<20&4294967295|E>>>12),E=_+(I^A&(y^I))+R[13]+2850285829&4294967295,_=y+(E<<5&4294967295|E>>>27),E=A+(y^I&(_^y))+R[2]+4243563512&4294967295,A=_+(E<<9&4294967295|E>>>23),E=I+(_^y&(A^_))+R[7]+1735328473&4294967295,I=A+(E<<14&4294967295|E>>>18),E=y+(A^_&(I^A))+R[12]+2368359562&4294967295,y=I+(E<<20&4294967295|E>>>12),E=_+(y^I^A)+R[5]+4294588738&4294967295,_=y+(E<<4&4294967295|E>>>28),E=A+(_^y^I)+R[8]+2272392833&4294967295,A=_+(E<<11&4294967295|E>>>21),E=I+(A^_^y)+R[11]+1839030562&4294967295,I=A+(E<<16&4294967295|E>>>16),E=y+(I^A^_)+R[14]+4259657740&4294967295,y=I+(E<<23&4294967295|E>>>9),E=_+(y^I^A)+R[1]+2763975236&4294967295,_=y+(E<<4&4294967295|E>>>28),E=A+(_^y^I)+R[4]+1272893353&4294967295,A=_+(E<<11&4294967295|E>>>21),E=I+(A^_^y)+R[7]+4139469664&4294967295,I=A+(E<<16&4294967295|E>>>16),E=y+(I^A^_)+R[10]+3200236656&4294967295,y=I+(E<<23&4294967295|E>>>9),E=_+(y^I^A)+R[13]+681279174&4294967295,_=y+(E<<4&4294967295|E>>>28),E=A+(_^y^I)+R[0]+3936430074&4294967295,A=_+(E<<11&4294967295|E>>>21),E=I+(A^_^y)+R[3]+3572445317&4294967295,I=A+(E<<16&4294967295|E>>>16),E=y+(I^A^_)+R[6]+76029189&4294967295,y=I+(E<<23&4294967295|E>>>9),E=_+(y^I^A)+R[9]+3654602809&4294967295,_=y+(E<<4&4294967295|E>>>28),E=A+(_^y^I)+R[12]+3873151461&4294967295,A=_+(E<<11&4294967295|E>>>21),E=I+(A^_^y)+R[15]+530742520&4294967295,I=A+(E<<16&4294967295|E>>>16),E=y+(I^A^_)+R[2]+3299628645&4294967295,y=I+(E<<23&4294967295|E>>>9),E=_+(I^(y|~A))+R[0]+4096336452&4294967295,_=y+(E<<6&4294967295|E>>>26),E=A+(y^(_|~I))+R[7]+1126891415&4294967295,A=_+(E<<10&4294967295|E>>>22),E=I+(_^(A|~y))+R[14]+2878612391&4294967295,I=A+(E<<15&4294967295|E>>>17),E=y+(A^(I|~_))+R[5]+4237533241&4294967295,y=I+(E<<21&4294967295|E>>>11),E=_+(I^(y|~A))+R[12]+1700485571&4294967295,_=y+(E<<6&4294967295|E>>>26),E=A+(y^(_|~I))+R[3]+2399980690&4294967295,A=_+(E<<10&4294967295|E>>>22),E=I+(_^(A|~y))+R[10]+4293915773&4294967295,I=A+(E<<15&4294967295|E>>>17),E=y+(A^(I|~_))+R[1]+2240044497&4294967295,y=I+(E<<21&4294967295|E>>>11),E=_+(I^(y|~A))+R[8]+1873313359&4294967295,_=y+(E<<6&4294967295|E>>>26),E=A+(y^(_|~I))+R[15]+4264355552&4294967295,A=_+(E<<10&4294967295|E>>>22),E=I+(_^(A|~y))+R[6]+2734768916&4294967295,I=A+(E<<15&4294967295|E>>>17),E=y+(A^(I|~_))+R[13]+1309151649&4294967295,y=I+(E<<21&4294967295|E>>>11),E=_+(I^(y|~A))+R[4]+4149444226&4294967295,_=y+(E<<6&4294967295|E>>>26),E=A+(y^(_|~I))+R[11]+3174756917&4294967295,A=_+(E<<10&4294967295|E>>>22),E=I+(_^(A|~y))+R[2]+718787259&4294967295,I=A+(E<<15&4294967295|E>>>17),E=y+(A^(I|~_))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(I+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);const y=_-this.blockSize,R=this.C;let I=this.h,A=0;for(;A<_;){if(I==0)for(;A<=y;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(R[I++]=T.charCodeAt(A++),I==this.blockSize){i(this,R),I=0;break}}else for(;A<_;)if(R[I++]=T[A++],I==this.blockSize){i(this,R),I=0;break}}this.h=I,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var y=T.length-8;y<T.length;++y)T[y]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,y=0;y<4;++y)for(let R=0;R<32;R+=8)T[_++]=this.g[y]>>>R&255;return T};function s(T,_){var y=l;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=_(T)}function a(T,_){this.h=_;const y=[];let R=!0;for(let I=T.length-1;I>=0;I--){const A=T[I]|0;R&&A==_||(y[I]=A,R=!1)}this.g=y}var l={};function c(T){return-128<=T&&T<128?s(T,function(_){return new a([_|0],_<0?-1:0)}):new a([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return P(u(-T));const _=[];let y=1;for(let R=0;T>=y;R++)_[R]=T/y|0,y*=4294967296;return new a(_,0)}function p(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(p(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(_,8));let R=f;for(let A=0;A<T.length;A+=8){var I=Math.min(8,T.length-A);const E=parseInt(T.substring(A,A+I),_);I<8?(I=u(Math.pow(_,I)),R=R.j(I).add(u(E))):(R=R.j(y),R=R.add(u(E)))}return R}var f=c(0),g=c(1),v=c(16777216);n=a.prototype,n.m=function(){if(O(this))return-P(this).m();let T=0,_=1;for(let y=0;y<this.g.length;y++){const R=this.i(y);T+=(R>=0?R:4294967296+R)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(O(this))return"-"+P(this).toString(T);const _=u(Math.pow(T,6));var y=this;let R="";for(;;){const I=te(y,_).g;y=L(y,I.j(_));let A=((y.g.length>0?y.g[0]:y.h)>>>0).toString(T);if(y=I,k(y))return A+R;for(;A.length<6;)A="0"+A;R=A+R}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=L(this,T),O(T)?-1:k(T)?0:1};function P(T){const _=T.g.length,y=[];for(let R=0;R<_;R++)y[R]=~T.g[R];return new a(y,~T.h).add(g)}n.abs=function(){return O(this)?P(this):this},n.add=function(T){const _=Math.max(this.g.length,T.g.length),y=[];let R=0;for(let I=0;I<=_;I++){let A=R+(this.i(I)&65535)+(T.i(I)&65535),E=(A>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);R=E>>>16,A&=65535,E&=65535,y[I]=E<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function L(T,_){return T.add(P(_))}n.j=function(T){if(k(this)||k(T))return f;if(O(this))return O(T)?P(this).j(P(T)):P(P(this).j(T));if(O(T))return P(this.j(P(T)));if(this.l(v)<0&&T.l(v)<0)return u(this.m()*T.m());const _=this.g.length+T.g.length,y=[];for(var R=0;R<2*_;R++)y[R]=0;for(R=0;R<this.g.length;R++)for(let I=0;I<T.g.length;I++){const A=this.i(R)>>>16,E=this.i(R)&65535,ae=T.i(I)>>>16,Le=T.i(I)&65535;y[2*R+2*I]+=E*Le,V(y,2*R+2*I),y[2*R+2*I+1]+=A*Le,V(y,2*R+2*I+1),y[2*R+2*I+1]+=E*ae,V(y,2*R+2*I+1),y[2*R+2*I+2]+=A*ae,V(y,2*R+2*I+2)}for(T=0;T<_;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=_;T<2*_;T++)y[T]=0;return new a(y,0)};function V(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function B(T,_){this.g=T,this.h=_}function te(T,_){if(k(_))throw Error("division by zero");if(k(T))return new B(f,f);if(O(T))return _=te(P(T),_),new B(P(_.g),P(_.h));if(O(_))return _=te(T,P(_)),new B(P(_.g),_.h);if(T.g.length>30){if(O(T)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,R=_;R.l(T)<=0;)y=q(y),R=q(R);var I=C(y,1),A=C(R,1);for(R=C(R,2),y=C(y,2);!k(R);){var E=A.add(R);E.l(T)<=0&&(I=I.add(y),A=E),R=C(R,1),y=C(y,1)}return _=L(T,I.j(_)),new B(I,_)}for(I=f;T.l(_)>=0;){for(y=Math.max(1,Math.floor(T.m()/_.m())),R=Math.ceil(Math.log(y)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),A=u(y),E=A.j(_);O(E)||E.l(T)>0;)y-=R,A=u(y),E=A.j(_);k(A)&&(A=g),I=I.add(A),T=L(T,E)}return new B(I,T)}n.B=function(T){return te(this,T).h},n.and=function(T){const _=Math.max(this.g.length,T.g.length),y=[];for(let R=0;R<_;R++)y[R]=this.i(R)&T.i(R);return new a(y,this.h&T.h)},n.or=function(T){const _=Math.max(this.g.length,T.g.length),y=[];for(let R=0;R<_;R++)y[R]=this.i(R)|T.i(R);return new a(y,this.h|T.h)},n.xor=function(T){const _=Math.max(this.g.length,T.g.length),y=[];for(let R=0;R<_;R++)y[R]=this.i(R)^T.i(R);return new a(y,this.h^T.h)};function q(T){const _=T.g.length+1,y=[];for(let R=0;R<_;R++)y[R]=T.i(R)<<1|T.i(R-1)>>>31;return new a(y,T.h)}function C(T,_){const y=_>>5;_%=32;const R=T.g.length-y,I=[];for(let A=0;A<R;A++)I[A]=_>0?T.i(A+y)>>>_|T.i(A+y+1)<<32-_:T.i(A+y);return new a(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Cf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=p,Vn=a}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});var Ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kf,Ci,Df,Ws,xa,Nf,Lf,Of;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ds=="object"&&Ds];for(var h=0;h<o.length;++h){var d=o[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,h){if(h)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var S=o[m];if(!(S in d))break e;d=d[S]}o=o[o.length-1],m=d[o],h=h(m),h!=m&&h!=null&&e(d,o,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(h){var d=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&d.push([m,h[m]]);return d}});var s=s||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function c(o,h,d){return o.call.apply(o.bind,arguments)}function u(o,h,d){return u=c,u.apply(null,arguments)}function p(o,h){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function f(o,h){function d(){}d.prototype=h.prototype,o.Z=h.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(m,S,D){for(var F=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)F[oe-2]=arguments[oe];return h.prototype[S].apply(m,F)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function v(o){const h=o.length;if(h>0){const d=Array(h);for(let m=0;m<h;m++)d[m]=o[m];return d}return[]}function k(o,h){for(let m=1;m<arguments.length;m++){const S=arguments[m];var d=typeof S;if(d=d!="object"?d:S?Array.isArray(S)?"array":d:"null",d=="array"||d=="object"&&typeof S.length=="number"){d=o.length||0;const D=S.length||0;o.length=d+D;for(let F=0;F<D;F++)o[d+F]=S[F]}else o.push(S)}}class O{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function P(o){a.setTimeout(()=>{throw o},0)}function L(){var o=T;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,d){const m=B.get();m.set(h,d),this.h?this.h.next=m:this.g=m,this.h=m}}var B=new O(()=>new te,o=>o.reset());class te{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let q,C=!1,T=new V,_=()=>{const o=Promise.resolve(void 0);q=()=>{o.then(y)}};function y(){for(var o;o=L();){try{o.h.call(o.g)}catch(d){P(d)}var h=B;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}C=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,h),a.removeEventListener("test",d,h)}catch{}return o})();function E(o){return/^[\s\xa0]*$/.test(o)}function ae(o,h){I.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}f(ae,I),ae.prototype.init=function(o,h){const d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(d=="mouseover"?h=o.fromElement:d=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),ge=0;function lt(o,h,d,m,S){this.listener=o,this.proxy=null,this.src=h,this.type=d,this.capture=!!m,this.ha=S,this.key=++ge,this.da=this.fa=!1}function Ue(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Xe(o,h,d){for(const m in o)h.call(d,o[m],m,o)}function Ze(o,h){for(const d in o)h.call(void 0,o[d],d,o)}function st(o){const h={};for(const d in o)h[d]=o[d];return h}const ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(o,h){let d,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(d in m)o[d]=m[d];for(let D=0;D<ht.length;D++)d=ht[D],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function gt(o){this.src=o,this.g={},this.h=0}gt.prototype.add=function(o,h,d,m,S){const D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);const F=Zt(o,h,m,S);return F>-1?(h=o[F],d||(h.fa=!1)):(h=new lt(h,this.src,D,!!m,S),h.fa=d,o.push(h)),h};function dn(o,h){const d=h.type;if(d in o.g){var m=o.g[d],S=Array.prototype.indexOf.call(m,h,void 0),D;(D=S>=0)&&Array.prototype.splice.call(m,S,1),D&&(Ue(h),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Zt(o,h,d,m){for(let S=0;S<o.length;++S){const D=o[S];if(!D.da&&D.listener==h&&D.capture==!!d&&D.ha==m)return S}return-1}var ii="closure_lm_"+(Math.random()*1e6|0),si={};function fs(o,h,d,m,S){if(Array.isArray(h)){for(let D=0;D<h.length;D++)fs(o,h[D],d,m,S);return null}return d=ps(d),o&&o[Le]?o.J(h,d,l(m)?!!m.capture:!1,S):He(o,h,d,!1,m,S)}function He(o,h,d,m,S,D){if(!h)throw Error("Invalid event type");const F=l(S)?!!S.capture:!!S;let oe=li(o);if(oe||(o[ii]=oe=new gt(o)),d=oe.add(h,d,m,F,D),d.proxy)return d;if(m=fn(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)A||(S=F),S===void 0&&(S=!1),o.addEventListener(h.toString(),m,S);else if(o.attachEvent)o.attachEvent(Ot(h.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function fn(){function o(d){return h.call(o.src,o.listener,d)}const h=jo;return o}function oi(o,h,d,m,S){if(Array.isArray(h))for(var D=0;D<h.length;D++)oi(o,h[D],d,m,S);else m=l(m)?!!m.capture:!!m,d=ps(d),o&&o[Le]?(o=o.i,D=String(h).toString(),D in o.g&&(h=o.g[D],d=Zt(h,d,m,S),d>-1&&(Ue(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete o.g[D],o.h--)))):o&&(o=li(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Zt(h,d,m,S)),(d=o>-1?h[o]:null)&&ai(d))}function ai(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Le])dn(h.i,o);else{var d=o.type,m=o.proxy;h.removeEventListener?h.removeEventListener(d,m,o.capture):h.detachEvent?h.detachEvent(Ot(d),m):h.addListener&&h.removeListener&&h.removeListener(m),(d=li(h))?(dn(d,o),d.h==0&&(d.src=null,h[ii]=null)):Ue(o)}}}function Ot(o){return o in si?si[o]:si[o]="on"+o}function jo(o,h){if(o.da)o=!0;else{h=new ae(h,this);const d=o.listener,m=o.ha||o.src;o.fa&&ai(o),o=d.call(m,h)}return o}function li(o){return o=o[ii],o instanceof gt?o:null}var _r="__closure_events_fn_"+(Math.random()*1e9>>>0);function ps(o){return typeof o=="function"?o:(o[_r]||(o[_r]=function(h){return o.handleEvent(h)}),o[_r])}function ze(){R.call(this),this.i=new gt(this),this.M=this,this.G=null}f(ze,R),ze.prototype[Le]=!0,ze.prototype.removeEventListener=function(o,h,d,m){oi(this,o,h,d,m)};function Ge(o,h){var d,m=o.G;if(m)for(d=[];m;m=m.G)d.push(m);if(o=o.M,m=h.type||h,typeof h=="string")h=new I(h,o);else if(h instanceof I)h.target=h.target||o;else{var S=h;h=new I(m,o),dt(h,S)}S=!0;let D,F;if(d)for(F=d.length-1;F>=0;F--)D=h.g=d[F],S=yr(D,m,!0,h)&&S;if(D=h.g=o,S=yr(D,m,!0,h)&&S,S=yr(D,m,!1,h)&&S,d)for(F=0;F<d.length;F++)D=h.g=d[F],S=yr(D,m,!1,h)&&S}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const d=o.g[h];for(let m=0;m<d.length;m++)Ue(d[m]);delete o.g[h],o.h--}}this.G=null},ze.prototype.J=function(o,h,d,m){return this.i.add(String(o),h,!1,d,m)},ze.prototype.K=function(o,h,d,m){return this.i.add(String(o),h,!0,d,m)};function yr(o,h,d,m){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let S=!0;for(let D=0;D<h.length;++D){const F=h[D];if(F&&!F.da&&F.capture==d){const oe=F.listener,$e=F.ha||F.src;F.fa&&dn(o.i,F),S=oe.call($e,m)!==!1&&S}}return S&&!m.defaultPrevented}function en(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=u(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function pn(o){o.g=en(()=>{o.g=null,o.i&&(o.i=!1,pn(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class ms extends R{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:pn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(o){R.call(this),this.h=o,this.g={}}f(tn,R);var At=[];function _t(o){Xe(o.g,function(h,d){this.g.hasOwnProperty(d)&&ai(h)},o),o.g={}}tn.prototype.N=function(){tn.Z.N.call(this),_t(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=a.JSON.stringify,ci=a.JSON.parse,Ho=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function bt(){}function ui(){}var mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Er(){I.call(this,"d")}f(Er,I);function hi(){I.call(this,"c")}f(hi,I);var Vt={},Kn=null;function Qn(){return Kn=Kn||new ze}Vt.Ia="serverreachability";function wr(o){I.call(this,Vt.Ia,o)}f(wr,I);function Yn(o){const h=Qn();Ge(h,new wr(h))}Vt.STAT_EVENT="statevent";function di(o,h){I.call(this,Vt.STAT_EVENT,o),this.stat=h}f(di,I);function Ke(o){const h=Qn();Ge(h,new di(h,o))}Vt.Ja="timingevent";function fi(o,h){I.call(this,Vt.Ja,o),this.size=h}f(fi,I);function Mt(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function zo(o,h,d,m,S,D){o.info(function(){if(o.g)if(D){var F="",oe=D.split("&");for(let Ee=0;Ee<oe.length;Ee++){var $e=oe[Ee].split("=");if($e.length>1){const qe=$e[0];$e=$e[1];const jt=qe.split("_");F=jt.length>=2&&jt[1]=="type"?F+(qe+"="+$e+"&"):F+(qe+"=redacted&")}}}else F=null;else F=D;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+h+`
`+d+`
`+F})}function qo(o,h,d,m,S,D,F){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+h+`
`+d+`
`+D+" "+F})}function w(o,h,d,m){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+N(o,d)+(m?" "+m:"")})}function b(o,h){o.info(function(){return"TIMEOUT: "+h})}xt.prototype.info=function(){};function N(o,h){if(!o.g)return h;if(!h)return null;try{const D=JSON.parse(h);if(D){for(o=0;o<D.length;o++)if(Array.isArray(D[o])){var d=D[o];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var S=m[0];if(S!="noop"&&S!="stop"&&S!="close")for(let F=1;F<m.length;F++)m[F]=""}}}}return vr(D)}catch{return h}}var x={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},W;function G(){}f(G,bt),G.prototype.g=function(){return new XMLHttpRequest},W=new G;function z(o){return encodeURIComponent(String(o))}function J(o){var h=1;o=o.split(":");const d=[];for(;h>0&&o.length;)d.push(o.shift()),h--;return o.length&&d.push(o.join(":")),d}function Y(o,h,d,m){this.j=o,this.i=h,this.l=d,this.S=m||1,this.V=new tn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Q}function Q(){this.i=null,this.g="",this.h=!1}var K={},ce={};function ye(o,h,d){o.M=1,o.A=_s(Bt(h)),o.u=d,o.R=!0,Pe(o,null)}function Pe(o,h){o.F=Date.now(),yt(o),o.B=Bt(o.A);var d=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),ec(d.i,"t",m),o.C=0,d=o.j.L,o.h=new Q,o.g=yc(o.j,d?h:null,!o.u),o.P>0&&(o.O=new ms(u(o.Y,o,o.g),o.P)),h=o.V,d=o.g,m=o.ba;var S="readystatechange";Array.isArray(S)||(S&&(At[0]=S.toString()),S=At);for(let D=0;D<S.length;D++){const F=fs(d,S[D],m||h.handleEvent,!1,h.h||h);if(!F)break;h.g[F.key]=F}h=o.J?st(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Yn(),zo(o.i,o.v,o.B,o.l,o.S,o.u)}Y.prototype.ba=function(o){o=o.target;const h=this.O;h&&yn(o)==3?h.j():this.Y(o)},Y.prototype.Y=function(o){try{if(o==this.g)e:{const oe=yn(this.g),$e=this.g.ya(),Ee=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||ac(this.g)))){this.K||oe!=4||$e==7||($e==8||Ee<=0?Yn(3):Yn(2)),vt(this);var h=this.g.ca();this.X=h;var d=Qe(this);if(this.o=h==200,qo(this.i,this.v,this.B,this.l,this.S,oe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,S=this.g;if((m=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(m)){var D=m;break t}}D=null}if(o=D)w(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nn(this,o);else{this.o=!1,this.m=3,Ke(12),St(this),et(this);break e}}if(this.R){o=!0;let qe;for(;!this.K&&this.C<d.length;)if(qe=ve(this,d),qe==ce){oe==4&&(this.m=4,Ke(14),o=!1),w(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==K){this.m=4,Ke(15),w(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else w(this.i,this.l,qe,null),nn(this,qe);if(we(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||d.length!=0||this.h.h||(this.m=1,Ke(16),o=!1),this.o=this.o&&o,!o)w(this.i,this.l,d,"[Invalid Chunked Response]"),St(this),et(this);else if(d.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Jo(F),F.P=!0,Ke(11))}}else w(this.i,this.l,d,null),nn(this,d);oe==4&&St(this),this.o&&!this.K&&(oe==4?pc(this.j,this):(this.o=!1,yt(this)))}else Kp(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),St(this),et(this)}}}catch{}finally{}};function Qe(o){if(!we(o))return o.g.la();const h=ac(o.g);if(h==="")return"";let d="";const m=h.length,S=yn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return St(o),et(o),"";o.h.i=new a.TextDecoder}for(let D=0;D<m;D++)o.h.h=!0,d+=o.h.i.decode(h[D],{stream:!(S&&D==m-1)});return h.length=0,o.h.g+=d,o.C=0,o.h.g}function we(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function ve(o,h){var d=o.C,m=h.indexOf(`
`,d);return m==-1?ce:(d=Number(h.substring(d,m)),isNaN(d)?K:(m+=1,m+d>h.length?ce:(h=h.slice(m,m+d),o.C=m+d,h)))}Y.prototype.cancel=function(){this.K=!0,St(this)};function yt(o){o.T=Date.now()+o.H,gn(o,o.H)}function gn(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Mt(u(o.aa,o),h)}function vt(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Y.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(b(this.i,this.B),this.M!=2&&(Yn(),Ke(17)),St(this),this.m=2,et(this)):gn(this,this.T-o)};function et(o){o.j.I==0||o.K||pc(o.j,o)}function St(o){vt(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,_t(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function nn(o,h){try{var d=o.j;if(d.I!=0&&(d.g==o||Oe(d.h,o))){if(!o.L&&Oe(d.h,o)&&d.I==3){try{var m=d.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Ts(d),Es(d);else break e;Yo(d),Ke(18)}}else d.xa=S[1],0<d.xa-d.K&&S[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Mt(u(d.Va,d),6e3));he(d.h)<=1&&d.ta&&(d.ta=void 0)}else tr(d,11)}else if((o.L||d.g==o)&&Ts(d),!E(h))for(S=d.Ba.g.parse(h),h=0;h<S.length;h++){let Ee=S[h];const qe=Ee[0];if(!(qe<=d.K))if(d.K=qe,Ee=Ee[1],d.I==2)if(Ee[0]=="c"){d.M=Ee[1],d.ba=Ee[2];const jt=Ee[3];jt!=null&&(d.ka=jt,d.j.info("VER="+d.ka));const nr=Ee[4];nr!=null&&(d.za=nr,d.j.info("SVER="+d.za));const vn=Ee[5];vn!=null&&typeof vn=="number"&&vn>0&&(m=1.5*vn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const En=o.g;if(En){const Rs=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var D=m.h;D.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Ft(D,D.h),D.h=null))}if(m.G){const Xo=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(m.wa=Xo,Te(m.J,m.G,Xo))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var F=o;if(m.na=_c(m,m.L?m.ba:null,m.W),F.L){Ut(m.h,F);var oe=F,$e=m.O;$e&&(oe.H=$e),oe.D&&(vt(oe),yt(oe)),m.g=F}else dc(m);d.i.length>0&&ws(d)}else Ee[0]!="stop"&&Ee[0]!="close"||tr(d,7);else d.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?tr(d,7):Qo(d):Ee[0]!="noop"&&d.l&&d.l.qa(Ee),d.A=0)}}Yn(4)}catch{}}var rn=class{constructor(o,h){this.g=o,this.map=h}};function Jn(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xn(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function he(o){return o.h?1:o.g?o.g.size:0}function Oe(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Ft(o,h){o.g?o.g.add(h):o.h=h}function Ut(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Jn.prototype.cancel=function(){if(this.i=be(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function be(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const d of o.g.values())h=h.concat(d.G);return h}return v(o.i)}var Zn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gs(o,h){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const m=o[d].indexOf("=");let S,D=null;m>=0?(S=o[d].substring(0,m),D=o[d].substring(m+1)):S=o[d],h(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function $t(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof $t?(this.l=o.l,pi(this,o.j),this.o=o.o,this.g=o.g,mi(this,o.u),this.h=o.h,Wo(this,tc(o.i)),this.m=o.m):o&&(h=String(o).match(Zn))?(this.l=!1,pi(this,h[1]||"",!0),this.o=gi(h[2]||""),this.g=gi(h[3]||"",!0),mi(this,h[4]),this.h=gi(h[5]||"",!0),Wo(this,h[6]||"",!0),this.m=gi(h[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}$t.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(_i(h,Yl,!0),":");var d=this.g;return(d||h=="file")&&(o.push("//"),(h=this.o)&&o.push(_i(h,Yl,!0),"@"),o.push(z(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(_i(d,d.charAt(0)=="/"?Up:Fp,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",_i(d,Bp)),o.join("")},$t.prototype.resolve=function(o){const h=Bt(this);let d=!!o.j;d?pi(h,o.j):d=!!o.o,d?h.o=o.o:d=!!o.g,d?h.g=o.g:d=o.u!=null;var m=o.h;if(d)mi(h,o.u);else if(d=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var S=h.h.lastIndexOf("/");S!=-1&&(m=h.h.slice(0,S+1)+m)}if(S=m,S==".."||S==".")m="";else if(S.indexOf("./")!=-1||S.indexOf("/.")!=-1){m=S.lastIndexOf("/",0)==0,S=S.split("/");const D=[];for(let F=0;F<S.length;){const oe=S[F++];oe=="."?m&&F==S.length&&D.push(""):oe==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),m&&F==S.length&&D.push("")):(D.push(oe),m=!0)}m=D.join("/")}else m=S}return d?h.h=m:d=o.i.toString()!=="",d?Wo(h,tc(o.i)):d=!!o.m,d&&(h.m=o.m),h};function Bt(o){return new $t(o)}function pi(o,h,d){o.j=d?gi(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function mi(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function Wo(o,h,d){h instanceof yi?(o.i=h,jp(o.i,o.l)):(d||(h=_i(h,$p)),o.i=new yi(h,o.l))}function Te(o,h,d){o.i.set(h,d)}function _s(o){return Te(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function gi(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function _i(o,h,d){return typeof o=="string"?(o=encodeURI(o).replace(h,xp),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function xp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Yl=/[#\/\?@]/g,Fp=/[#\?:]/g,Up=/[#\?]/g,$p=/[#\?@]/g,Bp=/#/g;function yi(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function er(o){o.g||(o.g=new Map,o.h=0,o.i&&gs(o.i,function(h,d){o.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}n=yi.prototype,n.add=function(o,h){er(this),this.i=null,o=Tr(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(h),this.h+=1,this};function Jl(o,h){er(o),h=Tr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Xl(o,h){return er(o),h=Tr(o,h),o.g.has(h)}n.forEach=function(o,h){er(this),this.g.forEach(function(d,m){d.forEach(function(S){o.call(h,S,m,this)},this)},this)};function Zl(o,h){er(o);let d=[];if(typeof h=="string")Xl(o,h)&&(d=d.concat(o.g.get(Tr(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)d=d.concat(o[h]);return d}n.set=function(o,h){return er(this),this.i=null,o=Tr(this,o),Xl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},n.get=function(o,h){return o?(o=Zl(this,o),o.length>0?String(o[0]):h):h};function ec(o,h,d){Jl(o,h),d.length>0&&(o.i=null,o.g.set(Tr(o,h),v(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var d=h[m];const S=z(d);d=Zl(this,d);for(let D=0;D<d.length;D++){let F=S;d[D]!==""&&(F+="="+z(d[D])),o.push(F)}}return this.i=o.join("&")};function tc(o){const h=new yi;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function Tr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function jp(o,h){h&&!o.j&&(er(o),o.i=null,o.g.forEach(function(d,m){const S=m.toLowerCase();m!=S&&(Jl(this,m),ec(this,S,d))},o)),o.j=h}function Hp(o,h){const d=new xt;if(a.Image){const m=new Image;m.onload=p(_n,d,"TestLoadImage: loaded",!0,h,m),m.onerror=p(_n,d,"TestLoadImage: error",!1,h,m),m.onabort=p(_n,d,"TestLoadImage: abort",!1,h,m),m.ontimeout=p(_n,d,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else h(!1)}function zp(o,h){const d=new xt,m=new AbortController,S=setTimeout(()=>{m.abort(),_n(d,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:m.signal}).then(D=>{clearTimeout(S),D.ok?_n(d,"TestPingServer: ok",!0,h):_n(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),_n(d,"TestPingServer: error",!1,h)})}function _n(o,h,d,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(d)}catch{}}function qp(){this.g=new Ho}function Go(o){this.i=o.Sb||null,this.h=o.ab||!1}f(Go,bt),Go.prototype.g=function(){return new ys(this.i,this.h)};function ys(o,h){ze.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(ys,ze),n=ys.prototype,n.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Ei(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function nc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?vi(this):Ei(this),this.readyState==3&&nc(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,vi(this))},n.Na=function(o){this.g&&(this.response=o,vi(this))},n.ga=function(){this.g&&vi(this)};function vi(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Ei(o)}n.setRequestHeader=function(o,h){this.A.append(o,h)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=h.next();return o.join(`\r
`)};function Ei(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function rc(o){let h="";return Xe(o,function(d,m){h+=m,h+=":",h+=d,h+=`\r
`}),h}function Ko(o,h,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=rc(d),typeof o=="string"?d!=null&&z(d):Te(o,h,d))}function Se(o){ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Se,ze);var Wp=/^https?$/i,Gp=["POST","PUT"];n=Se.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,h,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():W.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(D){ic(this,D);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)d.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())d.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),S=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Gp,h,void 0)>=0)||m||S||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,F]of d)this.g.setRequestHeader(D,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(D){ic(this,D)}};function ic(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,sc(o),vs(o)}function sc(o){o.A||(o.A=!0,Ge(o,"complete"),Ge(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Ge(this,"complete"),Ge(this,"abort"),vs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),Se.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?oc(this):this.Xa())},n.Xa=function(){oc(this)};function oc(o){if(o.h&&typeof s<"u"){if(o.v&&yn(o)==4)setTimeout(o.Ca.bind(o),0);else if(Ge(o,"readystatechange"),yn(o)==4){o.h=!1;try{const D=o.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var m;if(m=D===0){let F=String(o.D).match(Zn)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),m=!Wp.test(F?F.toLowerCase():"")}d=m}if(d)Ge(o,"complete"),Ge(o,"success");else{o.o=6;try{var S=yn(o)>2?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.ca()+"]",sc(o)}}finally{vs(o)}}}}function vs(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,h||Ge(o,"ready");try{d.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yn(o){return o.g?o.g.readyState:0}n.ca=function(){try{return yn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),ci(h)}};function ac(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Kp(o){const h={};o=(o.g&&yn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(E(o[m]))continue;var d=J(o[m]);const S=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=h[S]||[];h[S]=D,D.push(d)}Ze(h,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(o,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||h}function lc(o){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,o),this.Za=wi("retryDelaySeedMs",1e4,o),this.Ta=wi("forwardChannelMaxRetries",2,o),this.va=wi("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Jn(o&&o.concurrentRequestLimit),this.Ba=new qp,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=lc.prototype,n.ka=8,n.I=1,n.connect=function(o,h,d,m){Ke(0),this.W=o,this.H=h||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=_c(this,null,this.W),ws(this)};function Qo(o){if(cc(o),o.I==3){var h=o.V++,d=Bt(o.J);if(Te(d,"SID",o.M),Te(d,"RID",h),Te(d,"TYPE","terminate"),Ti(o,d),h=new Y(o,o.j,h),h.M=2,h.A=_s(Bt(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=h.A,d=!0),d||(h.g=yc(h.j,null),h.g.ea(h.A)),h.F=Date.now(),yt(h)}gc(o)}function Es(o){o.g&&(Jo(o),o.g.cancel(),o.g=null)}function cc(o){Es(o),o.v&&(a.clearTimeout(o.v),o.v=null),Ts(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ws(o){if(!Xn(o.h)&&!o.m){o.m=!0;var h=o.Ea;q||_(),C||(q(),C=!0),T.add(h,o),o.D=0}}function Qp(o,h){return he(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Mt(u(o.Ea,o,h),mc(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const S=new Y(this,this.j,o);let D=this.o;if(this.U&&(D?(D=st(D),dt(D,this.U)):D=this.U),this.u!==null||this.R||(S.J=D,D=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=hc(this,S,h),d=Bt(this.J),Te(d,"RID",o),Te(d,"CVER",22),this.G&&Te(d,"X-HTTP-Session-Id",this.G),Ti(this,d),D&&(this.R?h="headers="+z(rc(D))+"&"+h:this.u&&Ko(d,this.u,D)),Ft(this.h,S),this.Ra&&Te(d,"TYPE","init"),this.S?(Te(d,"$req",h),Te(d,"SID","null"),S.U=!0,ye(S,d,null)):ye(S,d,h),this.I=2}}else this.I==3&&(o?uc(this,o):this.i.length==0||Xn(this.h)||uc(this))};function uc(o,h){var d;h?d=h.l:d=o.V++;const m=Bt(o.J);Te(m,"SID",o.M),Te(m,"RID",d),Te(m,"AID",o.K),Ti(o,m),o.u&&o.o&&Ko(m,o.u,o.o),d=new Y(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),h&&(o.i=h.G.concat(o.i)),h=hc(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ft(o.h,d),ye(d,m,h)}function Ti(o,h){o.H&&Xe(o.H,function(d,m){Te(h,m,d)}),o.l&&Xe({},function(d,m){Te(h,m,d)})}function hc(o,h,d){d=Math.min(o.i.length,d);const m=o.l?u(o.l.Ka,o.l,o):null;e:{var S=o.i;let oe=-1;for(;;){const $e=["count="+d];oe==-1?d>0?(oe=S[0].g,$e.push("ofs="+oe)):oe=0:$e.push("ofs="+oe);let Ee=!0;for(let qe=0;qe<d;qe++){var D=S[qe].g;const jt=S[qe].map;if(D-=oe,D<0)oe=Math.max(0,S[qe].g-100),Ee=!1;else try{D="req"+D+"_"||"";try{var F=jt instanceof Map?jt:Object.entries(jt);for(const[nr,vn]of F){let En=vn;l(vn)&&(En=vr(vn)),$e.push(D+nr+"="+encodeURIComponent(En))}}catch(nr){throw $e.push(D+"type="+encodeURIComponent("_badmap")),nr}}catch{m&&m(jt)}}if(Ee){F=$e.join("&");break e}}F=void 0}return o=o.i.splice(0,d),h.G=o,F}function dc(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;q||_(),C||(q(),C=!0),T.add(h,o),o.A=0}}function Yo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Mt(u(o.Da,o),mc(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Mt(u(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),Es(this),fc(this))};function Jo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function fc(o){o.g=new Y(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Bt(o.na);Te(h,"RID","rpc"),Te(h,"SID",o.M),Te(h,"AID",o.K),Te(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Te(h,"TO",o.ia),Te(h,"TYPE","xmlhttp"),Ti(o,h),o.u&&o.o&&Ko(h,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=_s(Bt(h)),d.u=null,d.R=!0,Pe(d,o)}n.Va=function(){this.C!=null&&(this.C=null,Es(this),Yo(this),Ke(19))};function Ts(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function pc(o,h){var d=null;if(o.g==h){Ts(o),Jo(o),o.g=null;var m=2}else if(Oe(o.h,h))d=h.G,Ut(o.h,h),m=1;else return;if(o.I!=0){if(h.o)if(m==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var S=o.D;m=Qn(),Ge(m,new fi(m,d)),ws(o)}else dc(o);else if(S=h.m,S==3||S==0&&h.X>0||!(m==1&&Qp(o,h)||m==2&&Yo(o)))switch(d&&d.length>0&&(h=o.h,h.i=h.i.concat(d)),S){case 1:tr(o,5);break;case 4:tr(o,10);break;case 3:tr(o,6);break;default:tr(o,2)}}}function mc(o,h){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*h}function tr(o,h){if(o.j.info("Error code "+h),h==2){var d=u(o.bb,o),m=o.Ua;const S=!m;m=new $t(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pi(m,"https"),_s(m),S?Hp(m.toString(),d):zp(m.toString(),d)}else Ke(2);o.I=0,o.l&&o.l.pa(h),gc(o),cc(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function gc(o){if(o.I=0,o.ja=[],o.l){const h=be(o.h);(h.length!=0||o.i.length!=0)&&(k(o.ja,h),k(o.ja,o.i),o.h.i.length=0,v(o.i),o.i.length=0),o.l.oa()}}function _c(o,h,d){var m=d instanceof $t?Bt(d):new $t(d);if(m.g!="")h&&(m.g=h+"."+m.g),mi(m,m.u);else{var S=a.location;m=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;const D=new $t(null);m&&pi(D,m),h&&(D.g=h),S&&mi(D,S),d&&(D.h=d),m=D}return d=o.G,h=o.wa,d&&h&&Te(m,d,h),Te(m,"VER",o.ka),Ti(o,m),m}function yc(o,h,d){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new Se(new Go({ab:d})):new Se(o.ma),h.Fa(o.L),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vc(){}n=vc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Is(){}Is.prototype.g=function(o,h){return new ft(o,h)};function ft(o,h){ze.call(this),this.g=new lc(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!E(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Ir(this)}f(ft,ze),ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ft.prototype.close=function(){Qo(this.g)},ft.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=vr(o),o=d);h.i.push(new rn(h.Ya++,o)),h.I==3&&ws(h)},ft.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,ft.Z.N.call(this)};function Ec(o){Er.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const d in h){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}f(Ec,Er);function wc(){hi.call(this),this.status=1}f(wc,hi);function Ir(o){this.g=o}f(Ir,vc),Ir.prototype.ra=function(){Ge(this.g,"a")},Ir.prototype.qa=function(o){Ge(this.g,new Ec(o))},Ir.prototype.pa=function(o){Ge(this.g,new wc)},Ir.prototype.oa=function(){Ge(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,ft.prototype.send=ft.prototype.o,ft.prototype.open=ft.prototype.m,ft.prototype.close=ft.prototype.close,Of=function(){return new Is},Lf=function(){return Qn()},Nf=Vt,xa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},x.NO_ERROR=0,x.TIMEOUT=8,x.HTTP_ERROR=6,Ws=x,$.COMPLETE="complete",Df=$,ui.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Ci=ui,Se.prototype.listenOnce=Se.prototype.K,Se.prototype.getLastError=Se.prototype.Ha,Se.prototype.getLastErrorCode=Se.prototype.ya,Se.prototype.getStatus=Se.prototype.ca,Se.prototype.getResponseJson=Se.prototype.La,Se.prototype.getResponseText=Se.prototype.la,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Fa,kf=Se}).apply(typeof Ds<"u"?Ds:typeof self<"u"?self:typeof window<"u"?window:{});const Bu="@firebase/firestore",ju="4.9.2";class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");let ti="12.3.0";const fr=new gl("@firebase/firestore");function Ar(){return fr.logLevel}function H(n,...e){if(fr.logLevel<=ue.DEBUG){const t=e.map(Sl);fr.debug(`Firestore (${ti}): ${n}`,...t)}}function un(n,...e){if(fr.logLevel<=ue.ERROR){const t=e.map(Sl);fr.error(`Firestore (${ti}): ${n}`,...t)}}function Hr(n,...e){if(fr.logLevel<=ue.WARN){const t=e.map(Sl);fr.warn(`Firestore (${ti}): ${n}`,...t)}}function Sl(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Vf(n,r,t)}function Vf(n,e,t){let r=`FIRESTORE (${ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw un(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Vf(e,i,r)}function pe(n,e){return n}const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends hn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nt.UNAUTHENTICATED)))}shutdown(){}}class kw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Dw{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Or,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const c=s;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Or)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new Mf(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new nt(e)}}class Nw{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lw{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Nw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ow{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hu(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Vw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Pl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Vw(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function de(n,e){return n<e?-1:n>e?1:0}function Fa(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return fa(i)===fa(s)?de(i,s):fa(i)?1:-1}return de(n.length,e.length)}const Mw=55296,xw=57343;function fa(n){const e=n.charCodeAt(0);return e>=Mw&&e<=xw}function zr(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const zu="__name__";class Ht{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ht.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ht?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ht.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return de(e.length,t.length)}static compareSegments(e,t){const r=Ht.isNumericId(e),i=Ht.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ht.extractNumericId(e).compare(Ht.extractNumericId(t)):Fa(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vn.fromString(e.substring(4,e.length-2))}}class Re extends Ht{construct(e,t,r){return new Re(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Re(t)}static emptyPath(){return new Re([])}}const Fw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ht{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return Fw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zu}static keyField(){return new ot([zu])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Re.fromString(e))}static fromName(e){return new Z(Re.fromString(e).popFirst(5))}static empty(){return new Z(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Re(e.slice()))}}function Uw(n,e,t){if(!t)throw new X(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $w(n,e,t,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qu(n){if(!Z.isDocumentKey(n))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Bw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie(12329,{type:typeof n})}function Gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jw(n);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fe(n,e){const t={typeString:n};return e&&(t.value=e),t}function ls(n,e){if(!Bw(n))throw new X(U.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new X(U.INVALID_ARGUMENT,t);return!0}const Wu=-62135596800,Gu=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Gu);return new xe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wu)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gu}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ls(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Fe("string",xe._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new xe(0,0))}static max(){return new ne(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gi=-1;function Hw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new xe(t+1,0):new xe(t,r));return new Un(i,Z.empty(),e)}function zw(n){return new Un(n.readTime,n.key,Gi)}class Un{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Un(ne.min(),Z.empty(),Gi)}static max(){return new Un(ne.max(),Z.empty(),Gi)}}function qw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}const Ww="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ko(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==Ww)throw n;H("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):M.reject(t)}static resolve(e){return new M(((t,r)=>{t(e)}))}static reject(e){return new M(((t,r)=>{r(e)}))}static waitFor(e){return new M(((t,r)=>{let i=0,s=0,a=!1;e.forEach((l=>{++i,l.next((()=>{++s,a&&s===i&&t()}),(c=>r(c)))})),a=!0,s===i&&t()}))}static or(e){let t=M.resolve(!1);for(const r of e)t=t.next((i=>i?M.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new M(((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next((p=>{a[u]=p,++l,l===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new M(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}function Kw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ni(n){return n.name==="IndexedDbTransactionError"}class Do{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Do.ce=-1;const Qw=-1;function No(n){return n==null}function Ua(n){return n===0&&1/n==-1/0}const xf="";function Yw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ku(e)),e=Jw(n.get(t),e);return Ku(e)}function Jw(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case xf:t+="";break;default:t+=s}}return t}function Ku(n){return n+xf+""}function Qu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Xw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ne{constructor(e,t){this.comparator=e,this.root=t||Ye.EMPTY}insert(e,t){return new Ne(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ns(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ns(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ns(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ns(this.root,e,this.comparator,!0)}}class Ns{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ye.RED,this.left=i??Ye.EMPTY,this.right=s??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ye(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ye.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ye(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yu(this.data.getIterator())}getIteratorFrom(e){return new Yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new je(this.comparator);return t.data=e,t}}class Yu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new je(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zr(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Ff extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ff("Invalid base64 string: "+s):s}})(e);return new Je(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const Zw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $n(n){if(Ae(!!n,39018),typeof n=="string"){let e=0;const t=Zw.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bn(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}const Uf="server_timestamp",$f="__type__",Bf="__previous_value__",jf="__local_write_time__";function Cl(n){return(n?.mapValue?.fields||{})[$f]?.stringValue===Uf}function Lo(n){const e=n.mapValue.fields[Bf];return Cl(e)?Lo(e):e}function Ki(n){const e=$n(n.mapValue.fields[jf].timestampValue);return new xe(e.seconds,e.nanos)}class eT{constructor(e,t,r,i,s,a,l,c,u,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=p}}const ho="(default)";class Qi{constructor(e,t){this.projectId=e,this.database=t||ho}static empty(){return new Qi("","")}get isDefaultDatabase(){return this.database===ho}isEqual(e){return e instanceof Qi&&e.projectId===this.projectId&&e.database===this.database}}const tT="__type__",nT="__max__",Ls={mapValue:{}},rT="__vector__",$a="value";function jn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cl(n)?4:sT(n)?9007199254740991:iT(n)?10:11:ie(28295,{value:n})}function Jt(n,e){if(n===e)return!0;const t=jn(n);if(t!==jn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ki(n).isEqual(Ki(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=$n(i.timestampValue),l=$n(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Bn(i.bytesValue).isEqual(Bn(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return ke(i.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return ke(i.integerValue)===ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=ke(i.doubleValue),l=ke(s.doubleValue);return a===l?Ua(a)===Ua(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return zr(n.arrayValue.values||[],e.arrayValue.values||[],Jt);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Qu(a)!==Qu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Jt(a[c],l[c])))return!1;return!0})(n,e);default:return ie(52216,{left:n})}}function Yi(n,e){return(n.values||[]).find((t=>Jt(t,e)))!==void 0}function qr(n,e){if(n===e)return 0;const t=jn(n),r=jn(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const l=ke(s.integerValue||s.doubleValue),c=ke(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,e);case 3:return Ju(n.timestampValue,e.timestampValue);case 4:return Ju(Ki(n),Ki(e));case 5:return Fa(n.stringValue,e.stringValue);case 6:return(function(s,a){const l=Bn(s),c=Bn(a);return l.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const l=s.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const p=de(l[u],c[u]);if(p!==0)return p}return de(l.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const l=de(ke(s.latitude),ke(a.latitude));return l!==0?l:de(ke(s.longitude),ke(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Xu(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const l=s.fields||{},c=a.fields||{},u=l[$a]?.arrayValue,p=c[$a]?.arrayValue,f=de(u?.values?.length||0,p?.values?.length||0);return f!==0?f:Xu(u,p)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Ls.mapValue&&a===Ls.mapValue)return 0;if(s===Ls.mapValue)return 1;if(a===Ls.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=a.fields||{},p=Object.keys(u);c.sort(),p.sort();for(let f=0;f<c.length&&f<p.length;++f){const g=Fa(c[f],p[f]);if(g!==0)return g;const v=qr(l[c[f]],u[p[f]]);if(v!==0)return v}return de(c.length,p.length)})(n.mapValue,e.mapValue);default:throw ie(23264,{he:t})}}function Ju(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);const t=$n(n),r=$n(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function Xu(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=qr(t[i],r[i]);if(s)return s}return de(t.length,r.length)}function Wr(n){return Ba(n)}function Ba(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=$n(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Ba(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Ba(t.fields[a])}`;return i+"}"})(n.mapValue):ie(61005,{value:n})}function Ks(n){switch(jn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lo(n);return e?16+Ks(e):16;case 5:return 2*n.stringValue.length;case 6:return Bn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Ks(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return cs(r.fields,((s,a)=>{i+=s.length+Ks(a)})),i})(n.mapValue);default:throw ie(13486,{value:n})}}function ja(n){return!!n&&"integerValue"in n}function kl(n){return!!n&&"arrayValue"in n}function Zu(n){return!!n&&"nullValue"in n}function eh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pa(n){return!!n&&"mapValue"in n}function iT(n){return(n?.mapValue?.fields||{})[tT]?.stringValue===rT}function Vi(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return cs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Vi(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vi(n.arrayValue.values[t]);return e}return{...n}}function sT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nT}class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach(((a,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=l.popLast()}a?r[l.lastSegment()]=Vi(a):i.push(l.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());pa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cs(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new zt(Vi(this.value))}}class rt{constructor(e,t,r,i,s,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new rt(e,0,ne.min(),ne.min(),ne.min(),zt.empty(),0)}static newFoundDocument(e,t,r,i){return new rt(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new rt(e,2,t,ne.min(),ne.min(),zt.empty(),0)}static newUnknownDocument(e,t){return new rt(e,3,t,ne.min(),ne.min(),zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fo{constructor(e,t){this.position=e,this.inclusive=t}}function th(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),t.key):r=qr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jt(n.position[t],e.position[t]))return!1;return!0}class po{constructor(e,t="asc"){this.field=e,this.dir=t}}function oT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Hf{}class Be extends Hf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lT(e,t,r):t==="array-contains"?new hT(e,r):t==="in"?new dT(e,r):t==="not-in"?new fT(e,r):t==="array-contains-any"?new pT(e,r):new Be(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new cT(e,r):new uT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qr(t,this.value)):t!==null&&jn(this.value)===jn(t)&&this.matchesComparison(qr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends Hf{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xt(e,t)}matches(e){return zf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zf(n){return n.op==="and"}function qf(n){return aT(n)&&zf(n)}function aT(n){for(const e of n.filters)if(e instanceof Xt)return!1;return!0}function Ha(n){if(n instanceof Be)return n.field.canonicalString()+n.op.toString()+Wr(n.value);if(qf(n))return n.filters.map((e=>Ha(e))).join(",");{const e=n.filters.map((t=>Ha(t))).join(",");return`${n.op}(${e})`}}function Wf(n,e){return n instanceof Be?(function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&Jt(r.value,i.value)})(n,e):n instanceof Xt?(function(r,i){return i instanceof Xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,l)=>s&&Wf(a,i.filters[l])),!0):!1})(n,e):void ie(19439)}function Gf(n){return n instanceof Be?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wr(t.value)}`})(n):n instanceof Xt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Gf).join(" ,")+"}"})(n):"Filter"}class lT extends Be{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){const t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}}class cT extends Be{constructor(e,t){super(e,"in",t),this.keys=Kf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uT extends Be{constructor(e,t){super(e,"not-in",t),this.keys=Kf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kf(n,e){return(e.arrayValue?.values||[]).map((t=>Z.fromName(t.referenceValue)))}class hT extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kl(t)&&Yi(t.arrayValue,this.value)}}class dT extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yi(this.value.arrayValue,t)}}class fT extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yi(this.value.arrayValue,t)}}class pT extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Yi(this.value.arrayValue,r)))}}class mT{constructor(e,t=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function rh(n,e=null,t=[],r=[],i=null,s=null,a=null){return new mT(n,e,t,r,i,s,a)}function Dl(n){const e=pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ha(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),No(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Wr(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Wr(r))).join(",")),e.Te=t}return e.Te}function Nl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Wf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nh(n.startAt,e.startAt)&&nh(n.endAt,e.endAt)}function za(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Oo{constructor(e,t=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gT(n,e,t,r,i,s,a,l){return new Oo(n,e,t,r,i,s,a,l)}function Ll(n){return new Oo(n)}function ih(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _T(n){return n.collectionGroup!==null}function Mi(n){const e=pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new je(ot.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(l=l.add(u.field))}))})),l})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new po(s,r))})),t.has(ot.keyField().canonicalString())||e.Ie.push(new po(ot.keyField(),r))}return e.Ie}function Yt(n){const e=pe(n);return e.Ee||(e.Ee=yT(e,Mi(n))),e.Ee}function yT(n,e){if(n.limitType==="F")return rh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new po(i.field,s)}));const t=n.endAt?new fo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fo(n.startAt.position,n.startAt.inclusive):null;return rh(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qa(n,e,t){return new Oo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vo(n,e){return Nl(Yt(n),Yt(e))&&n.limitType===e.limitType}function Qf(n){return`${Dl(Yt(n))}|lt:${n.limitType}`}function br(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Gf(i))).join(", ")}]`),No(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Wr(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Wr(i))).join(",")),`Target(${r})`})(Yt(n))}; limitType=${n.limitType})`}function Mo(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Mi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,l,c){const u=th(a,l,c);return a.inclusive?u<=0:u<0})(r.startAt,Mi(r),i)||r.endAt&&!(function(a,l,c){const u=th(a,l,c);return a.inclusive?u>=0:u>0})(r.endAt,Mi(r),i))})(n,e)}function vT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yf(n){return(e,t)=>{let r=!1;for(const i of Mi(n)){const s=ET(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ET(n,e,t){const r=n.field.isKeyField()?Z.comparator(e.key,t.key):(function(s,a,l){const c=a.data.field(s),u=l.data.field(s);return c!==null&&u!==null?qr(c,u):ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:n.dir})}}class gr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Xw(this.inner)}size(){return this.innerSize}}const wT=new Ne(Z.comparator);function Hn(){return wT}const Jf=new Ne(Z.comparator);function ki(...n){let e=Jf;for(const t of n)e=e.insert(t.key,t);return e}function TT(n){let e=Jf;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function or(){return xi()}function Xf(){return xi()}function xi(){return new gr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IT=new je(Z.comparator);function me(...n){let e=IT;for(const t of n)e=e.add(t);return e}const RT=new je(de);function AT(){return RT}function bT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function ST(n){return{integerValue:""+n}}class xo{constructor(){this._=void 0}}function PT(n,e,t){return n instanceof Wa?(function(i,s){const a={fields:{[$f]:{stringValue:Uf},[jf]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cl(s)&&(s=Lo(s)),s&&(a.fields[Bf]=s),{mapValue:a}})(t,e):n instanceof mo?Zf(n,e):n instanceof go?ep(n,e):(function(i,s){const a=kT(i,s),l=sh(a)+sh(i.Ae);return ja(a)&&ja(i.Ae)?ST(l):bT(i.serializer,l)})(n,e)}function CT(n,e,t){return n instanceof mo?Zf(n,e):n instanceof go?ep(n,e):t}function kT(n,e){return n instanceof Ga?(function(r){return ja(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Wa extends xo{}class mo extends xo{constructor(e){super(),this.elements=e}}function Zf(n,e){const t=tp(e);for(const r of n.elements)t.some((i=>Jt(i,r)))||t.push(r);return{arrayValue:{values:t}}}class go extends xo{constructor(e){super(),this.elements=e}}function ep(n,e){let t=tp(e);for(const r of n.elements)t=t.filter((i=>!Jt(i,r)));return{arrayValue:{values:t}}}class Ga extends xo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sh(n){return ke(n.integerValue||n.doubleValue)}function tp(n){return kl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function DT(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof mo&&i instanceof mo||r instanceof go&&i instanceof go?zr(r.elements,i.elements,Jt):r instanceof Ga&&i instanceof Ga?Jt(r.Ae,i.Ae):r instanceof Wa&&i instanceof Wa})(n.transform,e.transform)}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qs(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ol{}function np(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new LT(n.key,ar.none()):new Vl(n.key,n.data,ar.none());{const t=n.data,r=zt.empty();let i=new je(ot.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Fo(n.key,r,new Cn(i.toArray()),ar.none())}}function NT(n,e,t){n instanceof Vl?(function(i,s,a){const l=i.value.clone(),c=ah(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Fo?(function(i,s,a){if(!Qs(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=ah(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(rp(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Fi(n,e,t,r){return n instanceof Vl?(function(s,a,l,c){if(!Qs(s.precondition,a))return l;const u=s.value.clone(),p=lh(s.fieldTransforms,c,a);return u.setAll(p),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fo?(function(s,a,l,c){if(!Qs(s.precondition,a))return l;const u=lh(s.fieldTransforms,c,a),p=a.data;return p.setAll(rp(s)),p.setAll(u),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(s,a,l){return Qs(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function oh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zr(r,i,((s,a)=>DT(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vl extends Ol{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fo extends Ol{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rp(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ah(n,e,t){const r=new Map;Ae(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,CT(a,l,t[i]))}return r}function lh(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,PT(s,a,e))}return r}class LT extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NT(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Xf();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=t.has(i.key)?null:l;const c=np(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),me())}isEqual(e){return this.batchId===e.batchId&&zr(this.mutations,e.mutations,((t,r)=>oh(t,r)))&&zr(this.baseMutations,e.baseMutations,((t,r)=>oh(t,r)))}}class VT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class MT{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ve,fe;function ip(n){if(n===void 0)return un("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ve.OK:return U.OK;case Ve.CANCELLED:return U.CANCELLED;case Ve.UNKNOWN:return U.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return U.INTERNAL;case Ve.UNAVAILABLE:return U.UNAVAILABLE;case Ve.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ve.NOT_FOUND:return U.NOT_FOUND;case Ve.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ve.ABORTED:return U.ABORTED;case Ve.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ve.DATA_LOSS:return U.DATA_LOSS;default:return ie(39323,{code:n})}}(fe=Ve||(Ve={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";function xT(){return new TextEncoder}const FT=new Vn([4294967295,4294967295],0);function ch(n){const e=xT().encode(n),t=new Cf;return t.update(e),new Uint8Array(t.digest())}function uh(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vn([t,r],0),new Vn([i,s],0)]}class Ml{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Di(`Invalid padding: ${t}`);if(r<0)throw new Di(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Di(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Di(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Vn.fromNumber(r)));return i.compare(FT)===1&&(i=new Vn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ch(e),[r,i]=uh(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ml(s,i,t);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.ge===0)return;const t=ch(e),[r,i]=uh(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Di extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uo{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,us.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Uo(ne.min(),i,new Ne(de),Hn(),me())}}class us{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new us(r,t,me(),me(),me())}}class Ys{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class sp{constructor(e,t){this.targetId=e,this.Ce=t}}class op{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class hh{constructor(){this.ve=0,this.Fe=dh(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),t=me(),r=me();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie(38017,{changeType:s})}})),new us(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=dh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hn(),this.Je=Os(),this.He=Os(),this.Ye=new Ne(de)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(za(s))if(r===0){const a=new Z(s.path);this.et(t,a,rt.newNoDocument(a,ne.min()))}else Ae(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,l;try{a=Bn(r).toUint8Array()}catch(c){if(c instanceof Ff)return Hr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ml(a,i,s)}catch(c){return Hr(c instanceof Di?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const l=this.ot(a);if(l){if(s.current&&za(l.target)){const c=new Z(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,rt.newNoDocument(c,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=me();this.He.forEach(((s,a)=>{let l=!0;a.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Uo(e,t,this.Ye,this.je,r);return this.je=Hn(),this.Je=Os(),this.He=Os(),this.Ye=new Ne(de),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new je(de),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new je(de),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hh),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Os(){return new Ne(Z.comparator)}function dh(){return new Ne(Z.comparator)}const $T={asc:"ASCENDING",desc:"DESCENDING"},BT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jT={and:"AND",or:"OR"};class HT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ka(n,e){return n.useProto3Json||No(e)?e:{value:e}}function zT(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Vr(n){return Ae(!!n,49232),ne.fromTimestamp((function(t){const r=$n(t);return new xe(r.seconds,r.nanos)})(n))}function WT(n,e){return Qa(n,e).canonicalString()}function Qa(n,e){const t=(function(i){return new Re(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ap(n){const e=Re.fromString(n);return Ae(dp(e),10190,{key:e.toString()}),e}function ma(n,e){const t=ap(e);if(t.get(1)!==n.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(cp(t))}function lp(n,e){return WT(n.databaseId,e)}function GT(n){const e=ap(n);return e.length===4?Re.emptyPath():cp(e)}function fh(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cp(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KT(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,p){return u.useProto3Json?(Ae(p===void 0||typeof p=="string",58123),Je.fromBase64String(p||"")):(Ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Je.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(u){const p=u.code===void 0?U.UNKNOWN:ip(u.code);return new X(p,u.message||"")})(a);t=new op(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ma(n,r.document.name),s=Vr(r.document.updateTime),a=r.document.createTime?Vr(r.document.createTime):ne.min(),l=new zt({mapValue:{fields:r.document.fields}}),c=rt.newFoundDocument(i,s,a,l),u=r.targetIds||[],p=r.removedTargetIds||[];t=new Ys(u,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ma(n,r.document),s=r.readTime?Vr(r.readTime):ne.min(),a=rt.newNoDocument(i,s),l=r.removedTargetIds||[];t=new Ys([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ma(n,r.document),s=r.removedTargetIds||[];t=new Ys([],s,i,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new MT(i,s),l=r.targetId;t=new sp(l,a)}}return t}function QT(n,e){return{documents:[lp(n,e.path)]}}function YT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lp(n,i);const s=(function(u){if(u.length!==0)return hp(Xt.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((p=>(function(g){return{field:Sr(g.field),direction:ZT(g.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Ka(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function JT(n){let e=GT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(f){const g=up(f);return g instanceof Xt&&qf(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(f){return f.map((g=>(function(k){return new po(Pr(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(g)))})(t.orderBy));let l=null;t.limit&&(l=(function(f){let g;return g=typeof f=="object"?f.value:f,No(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(f){const g=!!f.before,v=f.values||[];return new fo(v,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const g=!f.before,v=f.values||[];return new fo(v,g)})(t.endAt)),gT(e,i,a,s,l,"F",c,u)}function XT(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function up(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pr(t.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pr(t.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pr(t.unaryFilter.field);return Be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Pr(t.unaryFilter.field);return Be.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Be.create(Pr(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Xt.create(t.compositeFilter.filters.map((r=>up(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(t.compositeFilter.op))})(n):ie(30097,{filter:n})}function ZT(n){return $T[n]}function eI(n){return BT[n]}function tI(n){return jT[n]}function Sr(n){return{fieldPath:n.canonicalString()}}function Pr(n){return ot.fromServerFormat(n.fieldPath)}function hp(n){return n instanceof Be?(function(t){if(t.op==="=="){if(eh(t.value))return{unaryFilter:{field:Sr(t.field),op:"IS_NAN"}};if(Zu(t.value))return{unaryFilter:{field:Sr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eh(t.value))return{unaryFilter:{field:Sr(t.field),op:"IS_NOT_NAN"}};if(Zu(t.value))return{unaryFilter:{field:Sr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sr(t.field),op:eI(t.op),value:t.value}}})(n):n instanceof Xt?(function(t){const r=t.getFilters().map((i=>hp(i)));return r.length===1?r[0]:{compositeFilter:{op:tI(t.op),filters:r}}})(n):ie(54877,{filter:n})}function dp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class kn{constructor(e,t,r,i,s=ne.min(),a=ne.min(),l=Je.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nI{constructor(e){this.yt=e}}function rI(n){const e=JT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qa(e,e.limit,"L"):e}class iI{constructor(){this.Cn=new sI}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Un.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class sI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(Re.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Re.comparator)).toArray()}}const ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fp=41943040;class ct{static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(fp,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);class Gr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gr(0)}static cr(){return new Gr(-1)}}const mh="LruGarbageCollector",oI=1048576;function gh([n,e],[t,r]){const i=de(n,t);return i===0?de(e,r):i}class aI{constructor(e){this.Ir=e,this.buffer=new je(gh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(mh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ni(t)?H(mh,"Ignoring IndexedDB error during garbage collection: ",t):await ko(t)}await this.Vr(3e5)}))}}class cI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Do.ce);const r=new aI(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(ph)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ph):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,l,c,u;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i)))).next((f=>(r=f,l=Date.now(),this.removeTargets(e,r,t)))).next((f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),Ar()<=ue.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-p}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f}))))}}function uI(n,e){return new cI(n,e)}class hI{constructor(){this.changes=new gr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fI{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Fi(r.mutation,i,Cn.empty(),xe.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,me()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=me()){const i=or();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=ki();return s.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=or();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,me())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,l)=>{t.set(a,l)}))}))}computeViews(e,t,r,i){let s=Hn();const a=xi(),l=(function(){return xi()})();return t.forEach(((c,u)=>{const p=r.get(u.key);i.has(u.key)&&(p===void 0||p.mutation instanceof Fo)?s=s.insert(u.key,u):p!==void 0?(a.set(u.key,p.mutation.getFieldMask()),Fi(p.mutation,u,p.mutation.getFieldMask(),xe.now())):a.set(u.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,s).next((c=>(c.forEach(((u,p)=>a.set(u,p))),t.forEach(((u,p)=>l.set(u,new dI(p,a.get(u)??null)))),l)))}recalculateAndSaveOverlays(e,t){const r=xi();let i=new Ne(((a,l)=>a-l)),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const l of a)l.keys().forEach((c=>{const u=t.get(c);if(u===null)return;let p=r.get(c)||Cn.empty();p=l.applyToLocalView(u,p),r.set(c,p);const f=(i.get(l.batchId)||me()).add(c);i=i.insert(l.batchId,f)}))})).next((()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,p=c.value,f=Xf();p.forEach((g=>{if(!s.has(g)){const v=np(t.get(g),r.get(g));v!==null&&f.set(g,v),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_T(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(or());let l=Gi,c=s;return a.next((u=>M.forEach(u,((p,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(p)?M.resolve():this.remoteDocumentCache.getEntry(e,p).next((g=>{c=c.insert(p,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,c,u,me()))).next((p=>({batchId:l,changes:TT(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next((r=>{let i=ki();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=ki();return this.indexManager.getCollectionParents(e,s).next((l=>M.forEach(l,(c=>{const u=(function(f,g){return new Oo(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((p=>{p.forEach(((f,g)=>{a=a.insert(f,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((c,u)=>{const p=u.getKey();a.get(p)===null&&(a=a.insert(p,rt.newInvalidDocument(p)))}));let l=ki();return a.forEach(((c,u)=>{const p=s.get(c);p!==void 0&&Fi(p.mutation,u,Cn.empty(),xe.now()),Mo(t,u)&&(l=l.insert(c,u))})),l}))}}class pI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return M.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Vr(i.createTime)}})(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:rI(i.bundledQuery),readTime:Vr(i.readTime)}})(t)),M.resolve()}}class mI{constructor(){this.overlays=new Ne(Z.comparator),this.qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const r=or();return M.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),M.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){const i=or(),s=t.length+1,a=new Z(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ne(((u,p)=>u-p));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let p=s.get(u.largestBatchId);p===null&&(p=or(),s=s.insert(u.largestBatchId,p)),p.set(u.getKey(),u)}}const l=or(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,p)=>l.set(u,p))),!(l.size()>=i)););return M.resolve(l)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new VT(t,r));let s=this.qr.get(t);s===void 0&&(s=me(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class gI{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}class xl{constructor(){this.Qr=new je(We.$r),this.Ur=new je(We.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new We(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new We(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Z(new Re([])),r=new We(t,e),i=new We(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Z(new Re([])),r=new We(t,e),i=new We(t,e+1);let s=me();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new We(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Z.comparator(e.key,t.key)||de(e.Yr,t.Yr)}static Kr(e,t){return de(e.Yr,t.Yr)||Z.comparator(e.key,t.key)}}class _I{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new je(We.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new OT(s,t,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new We(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,t){return M.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Qw:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new We(t,0),i=new We(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const l=this.Xr(a.Yr);s.push(l)})),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(de);return t.forEach((i=>{const s=new We(i,0),a=new We(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(l=>{r=r.add(l.Yr)}))})),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const a=new We(new Z(s),0);let l=new je(de);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.Yr)),!0)}),a),M.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(t.mutations,(i=>{const s=new We(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new We(t,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yI{constructor(e){this.ri=e,this.docs=(function(){return new Ne(Z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=Hn();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rt.newInvalidDocument(i))})),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hn();const a=t.path,l=new Z(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:p}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||qw(zw(p),r)<=0||(i.has(p.key)||Mo(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ie(9500)}ii(e,t){return M.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new vI(this)}getSize(e){return M.resolve(this.size)}}class vI extends hI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),M.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class EI{constructor(e){this.persistence=e,this.si=new gr((t=>Dl(t)),Nl),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new xl,this.targetCount=0,this.ai=Gr.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),M.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Gr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Pr(t),M.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),M.waitFor(s).next((()=>i))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this._i.containsKey(t))}}class pp{constructor(e,t){this.ui={},this.overlays={},this.ci=new Do(0),this.li=!1,this.li=!0,this.hi=new gI,this.referenceDelegate=e(this),this.Pi=new EI(this),this.indexManager=new iI,this.remoteDocumentCache=(function(i){return new yI(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new nI(t),this.Ii=new pI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new _I(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);const i=new wI(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return M.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class wI extends Gw{constructor(e){super(),this.currentSequenceNumber=e}}class Fl{constructor(e){this.persistence=e,this.Ri=new xl,this.Vi=null}static mi(e){return new Fl(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(r=>{const i=Z.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return M.or([()=>M.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _o{constructor(e,t){this.persistence=e,this.pi=new gr((r=>Yw(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=uI(this,t)}static mi(e,t){return new _o(e,t)}Ei(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return M.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?M.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((l=>{l||(r++,s.removeEntry(a,ne.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),M.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ks(e.data.value)),t}br(e,t,r){return M.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ul{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=me(),i=me();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ul(e,t.fromCache,r,i)}}class TI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class II{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return X_()?8:Kw(it())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new TI;return this.Ss(e,t,a).next((l=>{if(s.result=l,this.Vs)return this.bs(e,t,a,l.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ar()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",br(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Ar()<=ue.DEBUG&&H("QueryEngine","Query:",br(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ar()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",br(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(t))):M.resolve())}ys(e,t){if(ih(t))return M.resolve(null);let r=Yt(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=qa(t,null,"F"),r=Yt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=me(...s);return this.ps.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(t,l);return this.Cs(t,u,a,c.readTime)?this.ys(e,qa(t,null,"F")):this.vs(e,u,t,c)}))))})))))}ws(e,t,r,i){return ih(t)||i.isEqual(ne.min())?M.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?M.resolve(null):(Ar()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),br(t)),this.vs(e,a,t,Hw(i,Gi)).next((l=>l)))}))}Ds(e,t){let r=new je(Yf(e));return t.forEach(((i,s)=>{Mo(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ar()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",br(t)),this.ps.getDocumentsMatchingQuery(e,t,Un.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const $l="LocalStore",RI=3e8;class AI{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ne(de),this.xs=new gr((s=>Dl(s)),Nl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function bI(n,e,t,r){return new AI(n,e,t,r)}async function mp(n,e){const t=pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],l=[];let c=me();for(const u of i){a.push(u.batchId);for(const p of u.mutations)c=c.add(p.key)}for(const u of s){l.push(u.batchId);for(const p of u.mutations)c=c.add(p.key)}return t.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:l})))}))}))}function gp(n){const e=pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function SI(n,e){const t=pe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach(((p,f)=>{const g=i.get(f);if(!g)return;l.push(t.Pi.removeMatchingKeys(s,p.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(s,p.addedDocuments,f))));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Je.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(f,v),(function(O,P,L){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=RI?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(g,v,p)&&l.push(t.Pi.updateTargetData(s,v))}));let c=Hn(),u=me();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),l.push(PI(s,a,e.documentUpdates).next((p=>{c=p.ks,u=p.qs}))),!r.isEqual(ne.min())){const p=t.Pi.getLastRemoteSnapshotVersion(s).next((f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));l.push(p)}return M.waitFor(l).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,c,u))).next((()=>c))})).then((s=>(t.Ms=i,s)))}function PI(n,e,t){let r=me(),i=me();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Hn();return t.forEach(((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):H($l,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)})),{ks:a,qs:i}}))}function CI(n,e){const t=pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,M.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new kn(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Ya(n,e,t){const r=pe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!ni(a))throw a;H($l,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function _h(n,e,t){const r=pe(n);let i=ne.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,u,p){const f=pe(c),g=f.xs.get(p);return g!==void 0?M.resolve(f.Ms.get(g)):f.Pi.getTargetData(u,p)})(r,a,Yt(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{s=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:ne.min(),t?s:me()))).next((l=>(kI(r,vT(e),l),{documents:l,Qs:s})))))}function kI(n,e,t){let r=n.Os.get(e)||ne.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class yh{constructor(){this.activeTargetIds=AT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DI{constructor(){this.Mo=new yh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NI{Oo(e){}shutdown(){}}const vh="ConnectivityMonitor";class Eh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(vh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(vh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vs=null;function Ja(){return Vs===null?Vs=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vs++,"0x"+Vs.toString(16)}const ga="RestConnection",LI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ho?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=Ja(),l=this.zo(e,t.toUriEncodedString());H(ga,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:u}=new URL(l),p=Jr(u);return this.Jo(e,l,c,r,p).then((f=>(H(ga,`Received RPC '${e}' ${a}: `,f),f)),(f=>{throw Hr(ga,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ti})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=LI[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class VI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const tt="WebChannelConnection";class MI extends OI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=Ja();return new Promise(((l,c)=>{const u=new kf;u.setWithCredentials(!0),u.listenOnce(Df.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ws.NO_ERROR:const f=u.getResponseJson();H(tt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Ws.TIMEOUT:H(tt,`RPC '${e}' ${a} timed out`),c(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:const g=u.getStatus();if(H(tt,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const k=v?.error;if(k&&k.status&&k.message){const O=(function(L){const V=L.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(V)>=0?V:U.UNKNOWN})(k.status);c(new X(O,k.message))}else c(new X(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new X(U.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(tt,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(i);H(tt,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Ja(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Of(),l=Lf(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=s.join("");H(tt,`Creating RPC '${e}' stream ${i}: ${p}`,c);const f=a.createWebChannel(p,c);this.I_(f);let g=!1,v=!1;const k=new VI({Yo:P=>{v?H(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(H(tt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),H(tt,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Zo:()=>f.close()}),O=(P,L,V)=>{P.listen(L,(B=>{try{V(B)}catch(te){setTimeout((()=>{throw te}),0)}}))};return O(f,Ci.EventType.OPEN,(()=>{v||(H(tt,`RPC '${e}' stream ${i} transport opened.`),k.o_())})),O(f,Ci.EventType.CLOSE,(()=>{v||(v=!0,H(tt,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(f))})),O(f,Ci.EventType.ERROR,(P=>{v||(v=!0,Hr(tt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new X(U.UNAVAILABLE,"The operation could not be completed")))})),O(f,Ci.EventType.MESSAGE,(P=>{if(!v){const L=P.data[0];Ae(!!L,16349);const V=L,B=V?.error||V[0]?.error;if(B){H(tt,`RPC '${e}' stream ${i} received error:`,B);const te=B.status;let q=(function(_){const y=Ve[_];if(y!==void 0)return ip(y)})(te),C=B.message;q===void 0&&(q=U.INTERNAL,C="Unknown error status: "+te+" with message "+B.message),v=!0,k.a_(new X(q,C)),f.close()}else H(tt,`RPC '${e}' stream ${i} received:`,L),k.u_(L)}})),O(l,Nf.STAT_EVENT,(P=>{P.stat===xa.PROXY?H(tt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===xa.NOPROXY&&H(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _a(){return typeof document<"u"?document:null}function _p(n){return new HT(n,!0)}class yp{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wh="PersistentStream";class xI{constructor(e,t,r,i,s,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return H(wh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(H(wh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FI extends xI{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KT(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ne.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?Vr(a.readTime):ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=fh(this.serializer),t.addTarget=(function(s,a){let l;const c=a.target;if(l=za(c)?{documents:QT(s,c)}:{query:YT(s,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=qT(s,a.resumeToken);const u=Ka(s,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(ne.min())>0){l.readTime=zT(s,a.snapshotVersion.toTimestamp());const u=Ka(s,a.expectedCount);u!==null&&(l.expectedCount=u)}return l})(this.serializer,e);const r=XT(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=fh(this.serializer),t.removeTarget=e,this.q_(t)}}class UI{}class $I extends UI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,Qa(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(U.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(e,Qa(t,r),i,a,l,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(U.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(un(t),this.aa=!1):H("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Kr="RemoteStore";class jI{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{ds(this)&&(H(Kr,"Restarting streams for network reachability change."),await(async function(c){const u=pe(c);u.Ea.add(4),await hs(u),u.Ra.set("Unknown"),u.Ea.delete(4),await $o(u)})(this))}))})),this.Ra=new BI(r,i)}}async function $o(n){if(ds(n))for(const e of n.da)await e(!0)}async function hs(n){for(const e of n.da)await e(!1)}function vp(n,e){const t=pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zl(t)?Hl(t):ri(t).O_()&&jl(t,e))}function Bl(n,e){const t=pe(n),r=ri(t);t.Ia.delete(e),r.O_()&&Ep(t,e),t.Ia.size===0&&(r.O_()?r.L_():ds(t)&&t.Ra.set("Unknown"))}function jl(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ri(n).Y_(e)}function Ep(n,e){n.Va.Ue(e),ri(n).Z_(e)}function Hl(n){n.Va=new UT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ri(n).start(),n.Ra.ua()}function zl(n){return ds(n)&&!ri(n).x_()&&n.Ia.size>0}function ds(n){return pe(n).Ea.size===0}function wp(n){n.Va=void 0}async function HI(n){n.Ra.set("Online")}async function zI(n){n.Ia.forEach(((e,t)=>{jl(n,e)}))}async function qI(n,e){wp(n),zl(n)?(n.Ra.ha(e),Hl(n)):n.Ra.set("Unknown")}async function WI(n,e,t){if(n.Ra.set("Online"),e instanceof op&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))})(n,e)}catch(r){H(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Th(n,r)}else if(e instanceof Ys?n.Va.Ze(e):e instanceof sp?n.Va.st(e):n.Va.tt(e),!t.isEqual(ne.min()))try{const r=await gp(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.Ia.get(u);p&&s.Ia.set(u,p.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,u)=>{const p=s.Ia.get(c);if(!p)return;s.Ia.set(c,p.withResumeToken(Je.EMPTY_BYTE_STRING,p.snapshotVersion)),Ep(s,c);const f=new kn(p.target,c,u,p.sequenceNumber);jl(s,f)})),s.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(r){H(Kr,"Failed to raise snapshot:",r),await Th(n,r)}}async function Th(n,e,t){if(!ni(e))throw e;n.Ea.add(1),await hs(n),n.Ra.set("Offline"),t||(t=()=>gp(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{H(Kr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $o(n)}))}async function Ih(n,e){const t=pe(n);t.asyncQueue.verifyOperationInProgress(),H(Kr,"RemoteStore received new credentials");const r=ds(t);t.Ea.add(3),await hs(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $o(t)}async function GI(n,e){const t=pe(n);e?(t.Ea.delete(2),await $o(t)):e||(t.Ea.add(2),await hs(t),t.Ra.set("Unknown"))}function ri(n){return n.ma||(n.ma=(function(t,r,i){const s=pe(t);return s.sa(),new FI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:HI.bind(null,n),t_:zI.bind(null,n),r_:qI.bind(null,n),H_:WI.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),zl(n)?Hl(n):n.Ra.set("Unknown")):(await n.ma.stop(),wp(n))}))),n.ma}class ql{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,l=new ql(e,t,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(un("AsyncQueue",`${e}: ${n}`),ni(n))return new X(U.UNAVAILABLE,`${e}: ${n}`);throw n}class Mr{static emptySet(e){return new Mr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=ki(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Mr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rh{constructor(){this.ga=new Ne(Z.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Qr{constructor(e,t,r,i,s,a,l,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((l=>{a.push({type:0,doc:l})})),new Qr(e,t,Mr.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class KI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class QI{constructor(){this.queries=Ah(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=pe(t),s=i.queries;i.queries=Ah(),s.forEach(((a,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new X(U.ABORTED,"Firestore shutting down"))}}function Ah(){return new gr((n=>Qf(n)),Vo)}async function YI(n,e){const t=pe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new KI,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const l=Tp(a,`Initialization of query '${br(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Wl(t)}async function JI(n,e){const t=pe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function XI(n,e){const t=pe(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&Wl(t)}function ZI(n,e,t){const r=pe(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Wl(n){n.Ca.forEach((e=>{e.next()}))}var Xa,bh;(bh=Xa||(Xa={})).Ma="default",bh.Cache="cache";class eR{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xa.Cache}}class Ip{constructor(e){this.key=e}}class Rp{constructor(e){this.key=e}}class tR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=Yf(e),this.tu=new Mr(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Rh,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,f)=>{const g=i.get(p),v=Mo(this.query,f)?f:null,k=!!g&&this.mutatedKeys.has(g.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;g&&v?g.data.isEqual(v.data)?k!==O&&(r.track({type:3,doc:v}),P=!0):this.su(g,v)||(r.track({type:2,doc:v}),P=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(l=!0)):!g&&v?(r.track({type:0,doc:v}),P=!0):g&&!v&&(r.track({type:1,doc:g}),P=!0,(c||u)&&(l=!0)),P&&(v?(a=a.add(v),s=O?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:l,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((p,f)=>(function(v,k){const O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:P})}};return O(v)-O(k)})(p.type,f.type)||this.eu(p.doc,f.doc))),this.ou(r),i=i??!1;const l=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new Qr(this.query,e.tu,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Rp(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Ip(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gl="SyncEngine";class nR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rR{constructor(e){this.key=e,this.hu=!1}}class iR{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new gr((l=>Qf(l)),Vo),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(Z.comparator),this.Au=new Map,this.Ru=new xl,this.Vu={},this.mu=new Map,this.fu=Gr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sR(n,e,t=!0){const r=Cp(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Ap(r,e,t,!0),i}async function oR(n,e){const t=Cp(n);await Ap(t,e,!0,!1)}async function Ap(n,e,t,r){const i=await CI(n.localStore,Yt(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await aR(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&vp(n.remoteStore,i),l}async function aR(n,e,t,r,i){n.pu=(f,g,v)=>(async function(O,P,L,V){let B=P.view.ru(L);B.Cs&&(B=await _h(O.localStore,P.query,!1).then((({documents:T})=>P.view.ru(T,B))));const te=V&&V.targetChanges.get(P.targetId),q=V&&V.targetMismatches.get(P.targetId)!=null,C=P.view.applyChanges(B,O.isPrimaryClient,te,q);return Ph(O,P.targetId,C.au),C.snapshot})(n,f,g,v);const s=await _h(n.localStore,e,!0),a=new tR(e,s.Qs),l=a.ru(s.documents),c=us.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(l,n.isPrimaryClient,c);Ph(n,t,u.au);const p=new nR(e,t,a);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function lR(n,e,t){const r=pe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Vo(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ya(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bl(r.remoteStore,i.targetId),Za(r,i.targetId)})).catch(ko)):(Za(r,i.targetId),await Ya(r.localStore,i.targetId,!0))}async function cR(n,e){const t=pe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bl(t.remoteStore,r.targetId))}async function bp(n,e){const t=pe(n);try{const r=await SI(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Ae(a.hu,14607):i.removedDocuments.size>0&&(Ae(a.hu,42227),a.hu=!1))})),await Pp(t,r,e)}catch(r){await ko(r)}}function Sh(n,e,t){const r=pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(a,l){const c=pe(a);c.onlineState=l;let u=!1;c.queries.forEach(((p,f)=>{for(const g of f.Sa)g.va(l)&&(u=!0)})),u&&Wl(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uR(n,e,t){const r=pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ne(Z.comparator);a=a.insert(s,rt.newNoDocument(s,ne.min()));const l=me().add(s),c=new Uo(ne.min(),new Map,new Ne(de),a,l);await bp(r,c),r.du=r.du.remove(s),r.Au.delete(e),Kl(r)}else await Ya(r.localStore,e,!1).then((()=>Za(r,e,t))).catch(ko)}function Za(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Sp(n,r)}))}function Sp(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Kl(n))}function Ph(n,e,t){for(const r of t)r instanceof Ip?(n.Ru.addReference(r.key,e),hR(n,r)):r instanceof Rp?(H(Gl,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Sp(n,r.key)):ie(19791,{wu:r})}function hR(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(H(Gl,"New document in limbo: "+t),n.Eu.add(r),Kl(n))}function Kl(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Z(Re.fromString(e)),r=n.fu.next();n.Au.set(r,new rR(t)),n.du=n.du.insert(t,r),vp(n.remoteStore,new kn(Yt(Ll(t.path)),r,"TargetPurposeLimboResolution",Do.ce))}}async function Pp(n,e,t){const r=pe(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{a.push(r.pu(c,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const p=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);const p=Ul.As(c.targetId,u);s.push(p)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(c,u){const p=pe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>M.forEach(u,(g=>M.forEach(g.Es,(v=>p.persistence.referenceDelegate.addReference(f,g.targetId,v))).next((()=>M.forEach(g.ds,(v=>p.persistence.referenceDelegate.removeReference(f,g.targetId,v)))))))))}catch(f){if(!ni(f))throw f;H($l,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const v=p.Ms.get(g),k=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(k);p.Ms=p.Ms.insert(g,O)}}})(r.localStore,s))}async function dR(n,e){const t=pe(n);if(!t.currentUser.isEqual(e)){H(Gl,"User change. New user:",e.toKey());const r=await mp(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((l=>{l.forEach((c=>{c.reject(new X(U.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pp(t,r.Ls)}}function fR(n,e){const t=pe(n),r=t.Au.get(e);if(r&&r.hu)return me().add(r.key);{let i=me();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const l=t.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function Cp(n){const e=pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uR.bind(null,e),e.Pu.H_=XI.bind(null,e.eventManager),e.Pu.yu=ZI.bind(null,e.eventManager),e}class yo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return bI(this.persistence,new II,e.initialUser,this.serializer)}Cu(e){return new pp(Fl.mi,this.serializer)}Du(e){return new DI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yo.provider={build:()=>new yo};class pR extends yo{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof _o,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new pp((r=>_o.mi(r,t)),this.serializer)}}class el{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dR.bind(null,this.syncEngine),await GI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QI})()}createDatastore(e){const t=_p(e.databaseInfo.databaseId),r=(function(s){return new MI(s)})(e.databaseInfo);return(function(s,a,l,c){return new $I(s,a,l,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,l){return new jI(r,i,s,a,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>Sh(this.syncEngine,t,0)),(function(){return Eh.v()?new Eh:new NI})())}createSyncEngine(e,t){return(function(i,s,a,l,c,u,p){const f=new iR(i,s,a,l,c,u);return p&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=pe(t);H(Kr,"RemoteStore shutting down."),r.Ea.add(5),await hs(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}el.provider={build:()=>new el};class mR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const zn="FirestoreClient";class gR{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=Pl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{H(zn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(zn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Tp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ya(n,e){n.asyncQueue.verifyOperationInProgress(),H(zn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await mp(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ch(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _R(n);H(zn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ih(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Ih(e.remoteStore,i))),n._onlineComponents=e}async function _R(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H(zn,"Using user provided OfflineComponentProvider");try{await ya(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Hr("Error using user provided cache. Falling back to memory cache: "+t),await ya(n,new yo)}}else H(zn,"Using default OfflineComponentProvider"),await ya(n,new pR(void 0));return n._offlineComponents}async function yR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(H(zn,"Using user provided OnlineComponentProvider"),await Ch(n,n._uninitializedComponentsProvider._online)):(H(zn,"Using default OnlineComponentProvider"),await Ch(n,new el))),n._onlineComponents}async function kh(n){const e=await yR(n),t=e.eventManager;return t.onListen=sR.bind(null,e.syncEngine),t.onUnlisten=lR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cR.bind(null,e.syncEngine),t}function kp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Dh=new Map;const Dp="firestore.googleapis.com",Nh=!0;class Lh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dp,this.ssl=Nh}else this.host=e.host,this.ssl=e.ssl??Nh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fp;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oI)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$w("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kp(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ql{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Cw;switch(r.type){case"firstParty":return new Lw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Dh.get(t);r&&(H("ComponentProvider","Removing Datastore"),Dh.delete(t),r.terminate())})(this),Promise.resolve()}}function vR(n,e,t,r={}){n=Gs(n,Ql);const i=Jr(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;i&&(Ud(`https://${l}`),$d("Firestore",!0)),s.host!==Dp&&s.host!==l&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!ur(c,a)&&(n._setSettings(c),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=nt.MOCK_USER;else{u=H_(r.mockUserToken,n._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nt(f)}n._authCredentials=new kw(new Mf(u,p))}}class Bo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class at{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ls(t,at._jsonSchema))return new at(e,r||null,new Z(Re.fromString(t.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:Fe("string",at._jsonSchemaVersion),referencePath:Fe("string")};class Ji extends Bo{constructor(e,t,r){super(e,t,Ll(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new Z(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function ER(n,e,...t){if(n=Rt(n),arguments.length===1&&(e=Pl.newId()),Uw("doc","path",e),n instanceof Ql){const r=Re.fromString(e,...t);return qu(r),new at(n,null,new Z(r))}{if(!(n instanceof at||n instanceof Ji))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Re.fromString(e,...t));return qu(r),new at(n.firestore,n instanceof Ji?n.converter:null,new Z(r))}}const Oh="AsyncQueue";class Vh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yp(this,"async_queue_retry"),this._c=()=>{const r=_a();r&&H(Oh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=_a();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_a();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ni(e))throw e;H(Oh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,un("INTERNAL UNHANDLED ERROR: ",Mh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ql.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&ie(47125,{Pc:Mh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function xh(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}class tl extends Ql{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vh(e),this._firestoreClient=void 0,await e}}}function wR(n,e){const t=typeof n=="object"?n:zd(),r=typeof n=="string"?n:ho,i=yl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=B_("firestore");s&&vR(i,...s)}return i}function TR(n){if(n._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IR(n),n._firestoreClient}function IR(n){const e=n._freezeSettings(),t=(function(i,s,a,l){return new eT(i,s,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,kp(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(Je.fromBase64String(e))}catch(t){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qt(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ls(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Fe("string",qt._jsonSchemaVersion),bytes:Fe("string")};class Np{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(e){if(ls(e,Mn._jsonSchema))return new Mn(e.latitude,e.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:Fe("string",Mn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};class xn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ls(e,xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xn(e.vectorValues);throw new X(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xn._jsonSchemaVersion="firestore/vectorValue/1.0",xn._jsonSchema={type:Fe("string",xn._jsonSchemaVersion),vectorValues:Fe("object")};const RR=new RegExp("[~\\*/\\[\\]]");function AR(n,e,t){if(e.search(RR)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Np(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function Fh(n,e,t,r,i){let s=`Function ${e}() called with invalid data`;s+=". ";let a="";return new X(U.INVALID_ARGUMENT,s+n+a)}class Lp{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bR extends Lp{data(){return super.data()}}function Op(n,e){return typeof e=="string"?AR(n,e):e instanceof Np?e._internalPath:e._delegate._internalPath}function SR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PR{convertValue(e,t="none"){switch(jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cs(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[$a].arrayValue?.values?.map((r=>ke(r.doubleValue)));return new xn(t)}convertGeoPoint(e){return new Mn(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ki(e));default:return null}}convertTimestamp(e){const t=$n(e);return new xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Re.fromString(e);Ae(dp(r),9688,{name:e});const i=new Qi(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Ni{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lr extends Lp{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Js(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",lr._jsonSchema={type:Fe("string",lr._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class Js extends lr{data(e={}){return super.data(e)}}class xr{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ni(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Js(this._firestore,this._userDataWriter,r.key,r,new Ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((l=>{const c=new Js(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ni(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const c=new Js(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ni(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,p=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:CR(l.type),doc:c,oldIndex:u,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:n})}}xr._jsonSchemaVersion="firestore/querySnapshot/1.0",xr._jsonSchema={type:Fe("string",xr._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class Vp extends PR{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}function kR(n,...e){n=Rt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xh(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(xh(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,a,l;if(n instanceof at)a=Gs(n.firestore,tl),l=Ll(n._key.path),s={next:c=>{e[r]&&e[r](DR(a,n,c))},error:e[r+1],complete:e[r+2]};else{const c=Gs(n,Bo);a=Gs(c.firestore,tl),l=c._query;const u=new Vp(a);s={next:p=>{e[r]&&e[r](new xr(a,u,c,p))},error:e[r+1],complete:e[r+2]},SR(n._query)}return(function(u,p,f,g){const v=new mR(g),k=new eR(p,v,f);return u.asyncQueue.enqueueAndForget((async()=>YI(await kh(u),k))),()=>{v.Nu(),u.asyncQueue.enqueueAndForget((async()=>JI(await kh(u),k)))}})(TR(a),l,i,s)}function DR(n,e,t){const r=t.docs.get(e._key),i=new Vp(n);return new lr(n,i,e._key,r,new Ni(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ti=i})(Xr),Br(new hr("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new tl(new Dw(r.getProvider("auth-internal")),new Ow(a,r.getProvider("app-check-internal")),(function(u,p){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qi(u.options.projectId,p)})(a,i),a);return s={useFetchStreams:t,...s},l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),Ln(Bu,ju,e),Ln(Bu,ju,"esm2020")})();var NR="firebase",LR="12.6.0";Ln(NR,LR,"app");const OR={apiKey:"AIzaSyBZmK_KD7mZ29sRkYhP9dNe0yJIyNk0Ah8",authDomain:"assamairproducts-4c315.firebaseapp.com",projectId:"assamairproducts-4c315",storageBucket:"assamairproducts-4c315.firebasestorage.app",messagingSenderId:"747849062310",appId:"1:747849062310:web:f7e5829772cca3d0382167",measurementId:"G-0MPS7ZNJ34"},Mp=Hd(OR),VR=wR(Mp),Xi=Sw(Mp),MR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='m256-200-56-56%20224-224-224-224%2056-56%20224%20224%20224-224%2056%2056-224%20224%20224%20224-56%2056-224-224-224%20224Z'/%3e%3c/svg%3e",xR=()=>{const[n,e]=Me(!1),[t,r]=Me(""),[i,s]=Me(""),[a,l]=Me(""),c=Io();mt(()=>{if(a){const f=setTimeout(()=>l(""),5e3);return()=>clearTimeout(f)}},[a]);const u=f=>({"auth/user-not-found":"No user found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-email":"Please enter a valid email address.","auth/invalid-credential":"Invalid email or password. Please try again.","auth/too-many-requests":"Access to this account has been temporarily disabled due to many failed login attempts."})[f]||"An unexpected error occurred. Please try again.";return j("div",{className:"login-container",id:"login-container",children:[a&&j("div",{className:"login-error-container",children:[j("p",{className:"login-error-text",children:a}),j("button",{onClick:()=>l(""),className:"login-close-button",children:j("img",{src:MR,alt:"close"})})]}),j("div",{className:"login-card",children:[j("div",{className:"login-left",children:j("div",{className:"login-logos-container",children:[j("img",{src:Dd,id:"ongcLogo",className:"ongcLogo",alt:""}),j("img",{src:Nd,id:"assamAirLogo",className:"assamAirLogo",alt:""})]})}),j("div",{className:"login-right",children:[j("h2",{children:"Hello Again!"}),j("p",{children:"Welcome Back"}),j("form",{onSubmit:async f=>{f.preventDefault(),l(""),e(!0);try{const g=Ef,v=t.trim(),k=i;await pE(Xi,g);const O=await fE(Xi,v,k),{user:P}=O;console.log(" User logged in:",P.uid,P.email),c("/",{replace:!0})}catch(g){console.error(" Firebase Login Error:",g);const v=g.code;l(u(v))}finally{e(!1)}},className:"login-form",children:[j("div",{className:"form-group",children:[j("label",{htmlFor:"email",children:"Email address"}),j("input",{type:"email",id:"email",placeholder:"Email address",value:t,onChange:f=>r(f.target.value),required:!0})]}),j("div",{className:"form-group",children:[j("label",{htmlFor:"password",children:"Password"}),j("input",{type:"password",id:"password",placeholder:"Password",value:i,onChange:f=>s(f.target.value),required:!0})]}),j("button",{type:"submit",className:"login-btn",id:"login-btn",disabled:n,children:n?"Logging in...":"Login"})]})]})]})]})},FR=({sensor:n})=>n.sensor==="RTD-15"?null:j("div",{className:"sensor-card",children:[j("p",{className:"sensor-name",children:n.sensor==="RTD-13"?"Metering skid line 1 flow":n.sensor==="RTD-14"?"Metering skid line 2 flow":n.sensor}),j("div",{className:"measurement",children:[j("span",{className:"value",children:n.measurement.toFixed(2)}),j("span",{className:"unit",children:n.unit})]})]});function UR(n){return!n||!Array.isArray(n)?[]:n.map(e=>({sensor:e.Sensor??e.sensor??"",measurement:Number(e.Measurement??e.measurement??0),unit:e.Unit??e.unit??"",category:e.Category??e.category??""}))}const $R=()=>{const[n,e]=Me({}),[t,r]=Me(""),[i,s]=Me("");return mt(()=>{const a=ER(VR,"sensors","latestData"),l=kR(a,c=>{if(!c.exists()){r("No Firestore data found.");return}const u=c.data().data;if(!u||typeof u!="string"){r("Invalid Firestore data format.");return}try{const p=JSON.parse(u),g=UR(p.sensors).reduce((O,P)=>{const L=P.category||"Uncategorized";return O[L]||(O[L]=[]),O[L].push(P),O},{}),v=["PS Inlet Pressure","TS Inlet Pressure","TS Gas Outlet Pressure","TS Condensate Outlet PDM","TS Effluent Outlet TFM","Condesate Outline PDM","RTD-16"],k=Object.fromEntries(Object.entries(g).map(([O,P])=>[O,P.filter(L=>!v.includes(L.sensor))]));s(p.updatedAt),e(k),r("")}catch(p){console.error(" Failed to parse Firestore JSON:",p),r("Failed to parse Firestore JSON.")}},c=>{console.error(" Firestore snapshot error:",c),r("Failed to fetch data.")});return()=>l()},[]),j("div",{className:"dashboard",children:[j("section",{children:j("div",{className:"updated-status",children:[j("span",{children:"Updated At:"}),j("span",{className:"date",children:i.slice(0,10)}),j("span",{className:"at",children:"Time:"}),j("span",{className:"time",children:i.slice(11,19)})]})}),j("div",{className:"dashboard-container",children:[t&&j("p",{className:"error",children:t}),Object.entries(n).map(([a,l])=>{if(a!="Misc")return j("div",{className:"section",children:[j("h2",{className:"section-heading",children:a.toUpperCase()}),j("div",{className:"section-content",children:l.map((c,u)=>j(FR,{sensor:c},u))})]},a)})]})]})},Uh=({goTo:n})=>{const e=Io();return j("div",{className:"error-container",children:j("div",{className:"error-card",children:[j("div",{className:"error-icon-wrapper",children:j("span",{className:"error-icon-text",children:""})}),j("h1",{className:"error-title",children:"Invalid URL"}),j("p",{className:"error-message",children:"You have entered a wrong URL. Please go back to previous page."}),j("button",{onClick:()=>{e(n)},className:"error-button",children:"Go Back"})]})})},BR=()=>{const n=a=>{const l=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear();return`${l}-${c}-${u}`},e=a=>a.toLocaleTimeString("en-IN",{hour12:!0}),[t,r]=Me(n(new Date)),[i,s]=Me(e(new Date));return mt(()=>{const a=setInterval(()=>{const l=new Date;r(n(l)),s(e(l))},1e3);return()=>clearInterval(a)},[]),j("footer",{className:"footer",children:[j("div",{className:"footer-left",children:[" DEVELOPED BY IOTELLIGENCE SOFTWARE SOLUTIONS |"," ",j("a",{className:"footer-link",href:"tel:+919158151405",children:"+91 9158151405"})," ","| 2025"]}),j("div",{className:"footer-right",children:[j("div",{children:t}),j("div",{children:i})]})]})},jR=()=>{const[n,e]=Me(null),[t,r]=Me(!0);return mt(()=>{const i=_f(Xi,s=>{e(s),r(!1)});return()=>i()},[]),{user:n,loading:t}},HR=({children:n})=>{const{user:e,loading:t}=jR();return t?j("div",{children:"Loading..."}):e?n||j(Rd,{}):j(Qg,{to:"/login",replace:!0})},zR=300*1e3,qR=()=>{const n=Ur(null),e=Ur(null),t=()=>{n.current!==null&&clearTimeout(n.current),e.current&&(n.current=setTimeout(()=>{console.log(" User inactive for 1 minute. Logging out..."),_E(Xi).catch(r=>console.error("Logout error:",r))},zR))};return mt(()=>{const r=_f(Xi,i=>{e.current=i,i?(t(),document.addEventListener("mousemove",t),document.addEventListener("keypress",t),document.addEventListener("touchstart",t),document.addEventListener("click",t)):(n.current!==null&&clearTimeout(n.current),document.removeEventListener("mousemove",t),document.removeEventListener("keypress",t),document.removeEventListener("touchstart",t),document.removeEventListener("click",t))});return()=>{r(),n.current!==null&&clearTimeout(n.current),document.removeEventListener("mousemove",t),document.removeEventListener("keypress",t),document.removeEventListener("touchstart",t),document.removeEventListener("click",t)}},[]),null},WR=()=>j("div",{className:"layout",children:[j("header",{children:j(N_,{})}),j("main",{className:"content",children:[j(Rd,{})," "]}),j("footer",{children:j(BR,{})})]}),GR=()=>{qR();const n=v_([{element:j(WR,{}),children:[{path:"/",element:j(HR,{children:j($R,{})}),errorElement:j(Uh,{goTo:"/"})}]},{path:"/login",element:j(xR,{}),errorElement:j(Uh,{goTo:"/login"})}]);return j(D_,{router:n})};tm(j(GR,{}),document.getElementById("app"));
